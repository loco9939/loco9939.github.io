
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Loco&#39;s Dev Blog">
    <title>아카이브 - Loco&#39;s Dev Blog</title>
    <meta name="author" content="loco9939">
    
        <meta name="keywords" content="loco9939,javascript,">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Loco&#39;s Dev Blog">
<meta property="og:url" content="https://loco9939.github.io/archives/page/10/index.html">
<meta property="og:site_name" content="Loco&#39;s Dev Blog">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="loco9939">
<meta property="article:tag" content="loco9939">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-alaac2o0p8lb5n7mx8aazw1dzhwcsltexgjtf9twurzytkujqiefoq1soijy.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Loco&#39;s Dev Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="검색"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/30/PairProgramming/level%202/diff%20Algorithm%20Tip/"
                            aria-label=": diff Algorithm Tip"
                        >
                            diff Algorithm Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-30T18:21:26+09:00">
	
		    2022/09/30
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-2/">level 2</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="diffing-구현"><a href="#diffing-구현" class="headerlink" title="diffing 구현"></a>diffing 구현</h1><p>React에서는 화면에서 바뀐 부분만 부분적으로 렌더링 해주기 위해 diffing 알고리즘을 구현하였다.</p>
<p>virtualDOM과 realDOM을 비교해주기 위해 리액트 홈페이지에서 설명한 방법으로 vanilla JS로 diffing 알고리즘을 구현해보자.</p>
<h1 id="0-두-요소의-길이부터-비교한다"><a href="#0-두-요소의-길이부터-비교한다" class="headerlink" title="0. 두 요소의 길이부터 비교한다."></a>0. 두 요소의 길이부터 비교한다.</h1><p>우리가 작업하고 있는 요소를 $old, 새롭게 생성된 요소를 $new 요소라고 하자. 우리는 $new를 기준으로 $old의 요소들을 일치 시켜주는 행위를 하면 된다.</p>
<p>$new의 노드길이가 $old의 노드 길이보다 길다면, $old에서 추가해주면 되지만, $new가 $old보다 길이가 짧다면, $old의 나머지 부분을 제거해줘야한다.</p>
<h2 id="0-1-길이가-짧은-경우"><a href="#0-1-길이가-짧은-경우" class="headerlink" title="0.1. 길이가 짧은 경우"></a>0.1. 길이가 짧은 경우</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">diff</span> = (<span class="params">$new, $old</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> newNodes = [...$new.<span class="property">childNodes</span>];</span><br><span class="line">  <span class="keyword">const</span> oldNodes = [...$old.<span class="property">childNodes</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (oldNodes.<span class="property">length</span> &gt; newNodes.<span class="property">length</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; oldNodes.<span class="property">length</span> - newNodes.<span class="property">length</span>; i++)</span><br><span class="line">      $old.<span class="title function_">removeChild</span>($old.<span class="property">lastChild</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="0-2-길이가-긴-경우"><a href="#0-2-길이가-긴-경우" class="headerlink" title="0.2. 길이가 긴 경우"></a>0.2. 길이가 긴 경우</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">newNodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">$n, i</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $o = oldNodes[i];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ($o === <span class="literal">undefined</span>) &#123;</span><br><span class="line">    $old.<span class="title function_">appendChild</span>($n.<span class="title function_">cloneNode</span>(<span class="literal">true</span>));</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>이전 요소에 새로운 요소가 가진 자식 노드가 없다면 이전 요소에 추가해준다.</li>
</ul>
<blockquote>
<p>cloneNode(true)는 해당 요소의 자식노드들 까지 모두 복제해주기 위한 옵션이다.</p>
</blockquote>
<h1 id="1-두-요소의-루트-노드부터-비교한다"><a href="#1-두-요소의-루트-노드부터-비교한다" class="headerlink" title="1. 두 요소의 루트 노드부터 비교한다."></a>1. 두 요소의 루트 노드부터 비교한다.</h1><p>먼저 두 루트 요소의 타입이 다르면 $old 요소에서 제거하고 새로운 트리를 구축한다.</p>
<p>ex) <a>에서 <div>로, <Article>에서 <Comment>로 바뀌는 경우</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">newNodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">$n, i</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $o = oldNodes[i];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> ($o.<span class="property">tagName</span> !== $n.<span class="property">tagName</span>) &#123;</span><br><span class="line">    $old.<span class="title function_">replaceChild</span>($n.<span class="title function_">cloneNode</span>(<span class="literal">true</span>), $o);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>이전 요소의 자식노드과 새로운 요소의 자식노드를 1:1로 tagName을 비교하여 서로 다르면 교체를 해주었다.</li>
</ul>
<h1 id="2-textNode-commentNode-들은-textContent를-비교한-뒤-교체해준다"><a href="#2-textNode-commentNode-들은-textContent를-비교한-뒤-교체해준다" class="headerlink" title="2. textNode, commentNode 들은 textContent를 비교한 뒤 교체해준다."></a>2. textNode, commentNode 들은 textContent를 비교한 뒤 교체해준다.</h1><p>앞서 tagName으로 비교하여 같지 않을 때, 자식노드까지 비교해주었는데, textNode와 commentNode는 서로 tagName이 같으므로 이들의 textContent로 비교해주어야 한다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">newNodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">$n, i</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $o = oldNodes[i];</span><br><span class="line">  <span class="comment">// textNode:3, commentNode:8</span></span><br><span class="line">  <span class="keyword">if</span> ($n.<span class="property">nodeType</span> === <span class="number">3</span> || $n.<span class="property">nodeType</span> === <span class="number">8</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> ($n.<span class="property">textContent</span> !== $o.<span class="property">textContent</span>)</span><br><span class="line">      $old.<span class="title function_">replaceChild</span>($n.<span class="title function_">cloneNode</span>(<span class="literal">true</span>), $o);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="3-이제-각-노드의-attribute-노드를-비교한다"><a href="#3-이제-각-노드의-attribute-노드를-비교한다" class="headerlink" title="3. 이제 각 노드의 attribute 노드를 비교한다."></a>3. 이제 각 노드의 attribute 노드를 비교한다.</h1><p>2번까지의 과정으로 $old 요소의 자식노드와 $new 요소의 자식노드들의 비교가 끝났고 일치까지 시켜줬다. 그러므로 이제는 자식 노드가 가지고 있는 attribute(class, inline-style, checked, disabled…)를 비교해줘야 한다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">newNodes.<span class="title function_">forEach</span>(<span class="function">(<span class="params">$n, i</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $o = oldNodes[i];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newAttrs = [...$n.<span class="property">attributes</span>];</span><br><span class="line">  <span class="keyword">const</span> oldAttrs = [...$o.<span class="property">attributes</span>];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> $nAttr <span class="keyword">of</span> newAttrs) &#123;</span><br><span class="line">    <span class="keyword">const</span> $sameAttr = oldAttrs.<span class="title function_">find</span>(<span class="function">(<span class="params">$oAttr</span>) =&gt;</span> $oAttr.<span class="property">name</span> === $nAttr.<span class="property">name</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ($sameAttr === <span class="literal">undefined</span>) &#123;</span><br><span class="line">      $old.<span class="title function_">replaceChild</span>($n.<span class="title function_">cloneNode</span>(<span class="literal">true</span>), $o);</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ($sameAttr.<span class="property">value</span> !== $nAttr.<span class="property">value</span>) $sameAttr.<span class="property">value</span> = $nAttr.<span class="property">value</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  oldAttrs.<span class="title function_">forEach</span>(<span class="function">(<span class="params">$oAttr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!newAttrs.<span class="title function_">find</span>(<span class="function">(<span class="params">$nAttr</span>) =&gt;</span> $nAttr.<span class="property">name</span> === $oAttr.<span class="property">name</span>))</span><br><span class="line">      $o.<span class="title function_">removeAttribute</span>($oAttr.<span class="property">name</span>);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">diff</span>($n, $o);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>새로운 노드의 attritube 중 이전 노드의 attribute와 같은 attribute가 없다면, 이전 요소 노드의 attribute를 새로운 노드의 attribute로 추가해준다.</p>
</li>
<li><p>이전 노드의 attribute 값과 새로운 노드의 attribute 값이 다르면 이전 노드 attribute에 값을 할당해준다.</p>
</li>
<li><p>만약 이전 노드의 attribute 중 새로운 노드의 attribute가 없다면 이전 노드의 해당 attribute를 제거해준다.</p>
</li>
</ul>
<p>그리고 마지막으로 자식 노드들을 재귀적으로 diff 함수를 호출해주면 자식 노드까지 바뀐 부분만 확인해줄 수 있다.</p>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><ul>
<li><p>diff 알고리즘을 경현님과 같이 이야기 하면서 작성하다보니 완성할 수 있어서 기뻤다.</p>
</li>
<li><p>이전 노드의 attribute와 새로운 노드의 attribute가 다를 때, attribute를 추가해주기 위해 setAttribute()를 사용하였는데, attribute는 HTML 구조의 초기값을 설정해주는 것이므로, 사용자의 화면에 변화되는 것이 반영되지 않고 todo를 삭제할 때, 삭제한 다음 요소에 삭제 요소의 attribute가 남아있는 것처럼 보이는 문제가 발생하여 attribute를 추가하는 경우에는 replaceChild() 메서드를 사용하여 해당 요소의 노드를 바꿔주는 방식을 사용하였다.</p>
</li>
</ul>
<p>때문에 attribute를 추가하는 경우에는 li 요소가 전부 렌더링 되는 모습을 보이고 attribute를 제거할 때는 input에 있는 checked attribute만 제거되므로 li 요소가 아닌 li 자식 요소의 input과 input의 다음 형제 요소들만 렌더링 되는 모습을 볼 수 있었다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/30/PairProgramming/level%202/diff%20Algorithm%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/29/PairProgramming/level%202/CBD%20Library%20Tip/"
                            aria-label=": CBD Library Tip"
                        >
                            CBD Library Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-29T23:09:53+09:00">
	
		    2022/09/29
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-2/">level 2</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="9-CBD"><a href="#9-CBD" class="headerlink" title="9. CBD"></a>9. CBD</h1><h2 id="로직"><a href="#로직" class="headerlink" title="로직"></a>로직</h2><ol>
<li>처음 DOMContentLoaded 이벤트가 발생하였을 때, 초기 state 값 설정 및 render 함수를 실행한다.</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">createState</span>(&#123;</span><br><span class="line">    <span class="attr">todos</span>: [</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">content</span>: <span class="string">&quot;Javascript&quot;</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">content</span>: <span class="string">&quot;CSS&quot;</span>, <span class="attr">completed</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">content</span>: <span class="string">&quot;HTML&quot;</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">todoFilter</span>: [<span class="string">&quot;All&quot;</span>, <span class="string">&quot;Completed&quot;</span>, <span class="string">&quot;Active&quot;</span>],</span><br><span class="line">    <span class="attr">currentTodoFilterId</span>: <span class="number">0</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ol>
<li>render가 실행되면 App 클래스의 인스턴스를 생성하고 생성된 인스턴스를 domStr 프로토타입 메서드를 사용하여 문자열로 반환하고 이 문자열을 <strong>node(virtual DOM)로 반환</strong>해주었다. 생성된 Virtual DOM과 기존 index.html에 있는 root가 생성한 Real DOM을 비교하는 diff 함수를 실행한다.</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">render</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> app = <span class="keyword">new</span> <span class="title class_">App</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(app);</span><br><span class="line">  <span class="title function_">diff</span>(app.<span class="title function_">newDOM</span>(), $root);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ol>
<li>App 클래스에서는 todoInput, todoList, todoFilter 라는 인스턴스 프로퍼티에 각각 클래스형 컴포넌트의 인스턴스를 할당해주었다. 이 프로퍼티(컴포넌트)를 components 배열에서 관리를 해준다. 또한, 각 컴포넌트에서 데이터가 변경되어 재렌더링이 발생하면 2번 과정이 발생한다.</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> components = []; <span class="comment">// App 인스턴스 여러개 만들면 구분해주기 위해 전역에서 선언</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    components.<span class="title function_">forEach</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c.<span class="title function_">unmount</span>());</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">todoInput</span> = <span class="keyword">new</span> <span class="title class_">TodoInput</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">todoList</span> = <span class="keyword">new</span> <span class="title class_">TodoList</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">todoFilter</span> = <span class="keyword">new</span> <span class="title class_">TodoFilter</span>();</span><br><span class="line"></span><br><span class="line">    components = [<span class="variable language_">this</span>.<span class="property">todoInput</span>, <span class="variable language_">this</span>.<span class="property">todoList</span>, <span class="variable language_">this</span>.<span class="property">todoFilter</span>];</span><br><span class="line"></span><br><span class="line">    components.<span class="title function_">forEach</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> c.<span class="title function_">mount</span>());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">domStr</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;<span class="variable language_">this</span>.todoInput.domStr()&#125;</span></span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;<span class="variable language_">this</span>.todoList.domStr()&#125;</span></span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;<span class="variable language_">this</span>.todoFilter.domStr()&#125;</span></span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">newDOM</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">domStrToNode</span>(<span class="variable language_">this</span>.<span class="title function_">domStr</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>이렇게 생성된 컴포넌트에 이벤트 핸들러를 등록시켜주기 위해서는 App 클래스의 인스턴스가 생성될 때, 즉 데이터가 변경되어 렌더링이 될 때 마다 기존 컴포넌트 목록들에게 unmount(이벤트 제거)를 실행하고 다시 컴포넌트를 등록하고 mount(이벤트 등록)을 실행한다.</li>
<li>이벤트를 등록하고 제거해주어 <strong>컴포넌트의 생명주기를 관리</strong>해주는 이유는 이벤트 위임으로 window에게 이벤트를 등록만 하고 제거해주지 않는다면 <strong>재렌더링 발생하여 컴포넌트가 새로 생성되면 그 때 다시 또 이벤트를 등록해주므로 불필요한 이벤트 등록과 성능상 문제가 발생</strong>할 수 있기 때문에 재렌더링이 발생할 때 꼭 이전 컴포넌트의 이벤트를 제거해줘야한다.</li>
</ul>
<ol>
<li>각 컴포넌트에서는 이벤트 핸들러를 작성해주고 mount 함수 안에 이벤트 리스너를 등록하고 unmount 함수안에 이벤트를 제거해준다. domStr 함수는 해당 컴포넌트를 HTML 구조를 문자열로 반환해준다.</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TodoList</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> todos = [...state.<span class="property">todos</span>];</span><br><span class="line">    <span class="keyword">if</span> (state.<span class="property">currentTodoFilterId</span> === <span class="number">1</span>)</span><br><span class="line">      todos = state.<span class="property">todos</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">todo</span>) =&gt;</span> todo.<span class="property">completed</span>);</span><br><span class="line">    <span class="keyword">if</span> (state.<span class="property">currentTodoFilterId</span> === <span class="number">2</span>)</span><br><span class="line">      todos = state.<span class="property">todos</span>.<span class="title function_">filter</span>(<span class="function">(<span class="params">todo</span>) =&gt;</span> !todo.<span class="property">completed</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">items</span> = todos.<span class="title function_">map</span>(<span class="function">(<span class="params">&#123; id &#125;</span>) =&gt;</span> <span class="keyword">new</span> <span class="title class_">TodoItem</span>(id));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">mount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="title function_">mount</span>());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">unmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">items</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="title function_">unmount</span>());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">domStr</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;ul class=&quot;todo-list&quot;&gt;</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;<span class="variable language_">this</span>.items.map((item) =&gt; item.domStr()).join(<span class="string">&quot;&quot;</span>)&#125;</span></span></span><br><span class="line"><span class="string">      &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>todoList 경우는 App 에서 todoList, todoInput, todoFilter 컴포넌트를 관리해주는 것처럼 todoItem 컴포넌트를 관리해준다. App 에서 mount 함수를 실행하여 각 컴포넌트의 mount, unmount를 통해 생명주기를 관리해준 것 처럼 todoList의 mount 에서는 todoItem 컴포넌트의 mount, unmount를 관리해준다.</li>
<li>this.items 에는 각 id에 해당하는 TodoItem의 컴포넌트들로 구성된 배열이 할당된다. 그리고 domStr 함수에서 TodoItem 컴포넌트들을 map 고차함수로 돌면서 각 컴포넌트들의 domStr 함수로 호출하여 문자열로 반환한다.</li>
<li>TodoFilter에서 domStr 부분에서 id가 꼭 필요한가?<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">domStr</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;ul class=&#x27;todo-filter&#x27;&gt;</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;state.todoFilter</span></span></span><br><span class="line"><span class="subst"><span class="string">        .map(</span></span></span><br><span class="line"><span class="subst"><span class="string">          (filter, i) =&gt;</span></span></span><br><span class="line"><span class="subst"><span class="string">            <span class="string">`&lt;li class=&quot; filter <span class="subst">$&#123;i === state.currentTodoFilterId ? <span class="string">&#x27;active&#x27;</span> : <span class="string">&#x27;&#x27;</span>&#125;</span>&quot; id=&quot;<span class="subst">$&#123;i&#125;</span>&quot;&gt;<span class="subst">$&#123;filter&#125;</span>&lt;/li&gt;`</span></span></span></span><br><span class="line"><span class="subst"><span class="string">        )</span></span></span><br><span class="line"><span class="subst"><span class="string">        .join(<span class="string">&#x27;&#x27;</span>)&#125;</span></span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">  `</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>all, completed, active 에 id가 굳이 필요한가??</li>
</ul>
</li>
</ul>
<ol>
<li>각 컴포넌트에서 state로 관리하는 부분이 변경될 때, 상태가 바뀌는 부분만 재렌더링이 일어나도록 구현하였으므로 todoInput에서는 재렌더링이 일어날 부분이 없으므로 autofocus 기능이 사라지지 않는다.</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">TodoInput</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">addTodo</span> = <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">key</span> !== <span class="string">&quot;Enter&quot;</span> || e.<span class="property">target</span>.<span class="property">value</span>.<span class="title function_">trim</span>() === <span class="string">&quot;&quot;</span>) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">      state.<span class="property">todos</span> = [</span><br><span class="line">        ...state.<span class="property">todos</span>,</span><br><span class="line">        &#123; <span class="attr">id</span>: <span class="title function_">getNextId</span>(), <span class="attr">content</span>: e.<span class="property">target</span>.<span class="property">value</span>, <span class="attr">completed</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      ];</span><br><span class="line">      e.<span class="property">target</span>.<span class="property">value</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">mount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keyup&quot;</span>, <span class="variable language_">this</span>.<span class="property">addTodo</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">unmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;keyup&quot;</span>, <span class="variable language_">this</span>.<span class="property">addTodo</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">domStr</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;input class=&#x27;todo-input&#x27; autofocus/&gt;`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="문제"><a href="#문제" class="headerlink" title="문제"></a>문제</h1><ul>
<li>checkbox 클릭하면 checked가 생성되고 사라지는 렌더링은 잘 되지만, 화면에서는 바뀌지 않는 문제가 발생하였다.<ul>
<li>attribute와 property의 차이때문에 발생하는 문제점이라고 생각되었다.</li>
<li>setAttribute대신에 요소를 replaceChild()로 자식노드를 교체해주었다.</li>
</ul>
</li>
</ul>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><ul>
<li>혼자서 공식문서들여다 보는 것 보다 확실히 옆에서 같이 이야기 하고 생각을 공유하면서 코드를 작성해나가다 보니 diff 알고리즘도 완성할 수 있어서 기뻤다.</li>
<li>node.children 은 텍스트 노드를 제외한 자식 노드들을 반환</li>
<li>node.childNodes는 모든 자식 노드를 반환한다.</li>
<li>attribute와 property의 차이점에 대해 한번 더 생각해볼 수 있는 시간이 있어서 좋았다. attribute는 HTML에 있는 속성으로 rendering이 되면 attribute는 DOM property로 변환된다. 하지만 1:1 매칭이 되지는 않는다는 점을 주의하자.<ul>
<li>attribute : 변하지 않는 초기 default 값 전달</li>
<li>property : 사용자의 행동으로 변할 수 있다.</li>
<li>diff 구현할 때, removeAttribute는 제대로 동작했는데, setAttribute할 때는 checkbox값이 삭제했을 때, 다음 todo에 이전되는 문제가 발생하였는데 이는 따로 정리해둬야겠다.</li>
</ul>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/29/PairProgramming/level%202/CBD%20Library%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/28/PairProgramming/level%202/newsViewer,%20CBD%20Library%20Tip/"
                            aria-label=": newsViewer, CBD Library Tip"
                        >
                            newsViewer, CBD Library Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-28T22:09:23+09:00">
	
		    2022/09/28
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-2/">level 2</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="8-news-viewer"><a href="#8-news-viewer" class="headerlink" title="8. news viewer"></a>8. news viewer</h1><ol>
<li>전체적인 구조를 설명하면, Nav, NewsList는 컴포넌트로 관리하여 독립적인 요소로 관리하고 root 요소에 appendChild 해주었다.</li>
<li>Nav 요소가 클릭되면 state 상태 데이터를 클릭한 요소의 id와 변경해준다. ⇒ Nav 요소는 상태를 변경 시키지만 리렌더링은 일어나지 않는다.</li>
<li>state 상태 데이터가 변경이 일어나면 NewsList가 리렌더링이 발생한다.</li>
</ol>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> state = <span class="keyword">new</span> <span class="title class_">Proxy</span>(</span><br><span class="line">  &#123; <span class="attr">category</span>: <span class="string">&quot;all&quot;</span> &#125;, <span class="comment">// state 객체에 key,value로 들어가게된다.</span></span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">set</span>: <span class="function">(<span class="params">obj, key, value</span>) =&gt;</span> &#123;</span><br><span class="line">      obj[key] = value;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(</span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">CustomEvent</span>(<span class="string">&quot;statechange&quot;</span>, &#123;</span><br><span class="line">          <span class="attr">detail</span>: obj,</span><br><span class="line">        &#125;)</span><br><span class="line">      );</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">// setter 는 성공했음을 나타내기 위해 true를 반환해줘야 한다.</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">state[category] = <span class="string">&quot;business&quot;</span>; <span class="comment">// handler 객체의 setter 접근자 프로퍼티가 실행된다.</span></span><br></pre></td></tr></table></figure>

<ul>
<li>프록시 객체를 생성하여 state(상태)가 변경, 할당이 발생하면 proxy의 handler에서 먼저 로직을 실행</li>
<li>setter 접근자 프로퍼티가 실행된다는 의미는 state(상태)에 변경이 일어난 경우이므로 이 때, window에게 custom event의 이벤트 객체를 보낸다.</li>
</ul>
<h2 id="Observer-Intersection-Observer-API"><a href="#Observer-Intersection-Observer-API" class="headerlink" title="Observer(Intersection Observer API)"></a>Observer(Intersection Observer API)</h2><p>옵저버 패턴은 이벤트를 발생 시킨 객체(subject)에 옵저버나 리스너를 등록하여서 이들이 subject를 관찰하면서 구독 혹은 구독 취소 같은 행위를 할 수 있도록 하는 패턴을 말한다.</p>
<ul>
<li>상태가 변경되면 옵저버에게 notify() 메서드로 알림을 보낸다</li>
<li>옵저버(handler)는 subject가 변경될 때, 호출할 함수들이다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> observer = <span class="keyword">new</span> <span class="title class_">IntersectionObserver</span>(</span><br><span class="line">    <span class="function"><span class="params">entries</span> =&gt;</span> &#123;</span><br><span class="line">      entries.<span class="title function_">forEach</span>(<span class="function"><span class="params">entry</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (entry.<span class="property">isIntersecting</span>) &#123;</span><br><span class="line">          currentNews = [...currentNews, ...<span class="title function_">getCategoryData</span>(currentCategory)];</span><br><span class="line">          <span class="title function_">render</span>(currentNews);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">threshold</span>: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  observer.<span class="title function_">observe</span>($newsList.<span class="title function_">querySelector</span>(<span class="string">&#x27;.scroll-observer&#x27;</span>));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>spinner(’.scroll-obeserver’)</code> 가 viewport에 지정한 임계점(threshold) 이상 나타났을 때, if문 안의 코드를 실행시킨다.</li>
<li>entries forEach로 조건식 entry.isIntersecting이 true 이면 처음 스크롤을 내려서 보였을 때 실행하고 false면 다시 스크롤을 올렸을 때는 코드를 실행하지 말라는 의미이다. (양방향으로 일어나기 때문에 관리해줘야한다.)</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  observer.<span class="title function_">subscribe</span>(render);</span><br><span class="line">  intersectionObserver = <span class="title function_">createObserver</span>();</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">render</span>();</span><br><span class="line">  intersectionObserver.<span class="title function_">observe</span>($container.<span class="title function_">querySelector</span>(<span class="string">&quot;.scroll-observer&quot;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>observe() 메서드를 사용하여 옵저버 타겟을 설정할 수 있다.<ul>
<li>이 코드는 DOMContentLoaded 이벤트가 발생했을 때, 한번만 발생하면 된다. 리팩터링 이전 코드는 render 할 때마다 spinner 요소를 재생성하여 위 메서드를 사용하여 target으로 지정하기 위해서 꼭 render 함수 내부에 있어야 했는데, 이는 불필요한 함수 호출과 리렌더링이므로 이를 해결하기 위해 렌더링이 불필요한 템플릿들은 App.js에서 $container innerHTML로 미리 할당해준다.</li>
<li>위와 같이 await로 렌더가 될 때 까지 기다렸다가 <code>‘.scroll-observer’</code> 요소가 생성된게 보장이 되면 옵저버 타겟을 등록한다.</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">addNews</span> = (<span class="params">category, nextNews</span>) =&gt; &#123;</span><br><span class="line">  news = &#123;</span><br><span class="line">    ...news,</span><br><span class="line">    [category]: &#123;</span><br><span class="line">      ...news[category],</span><br><span class="line">      <span class="attr">articles</span>: [...news[category].<span class="property">articles</span>, ...nextNews],</span><br><span class="line">      <span class="attr">page</span>: news[category].<span class="property">page</span> + <span class="number">1</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>기존에 있던 news 객체에 새로운 news 객체를 스프레드 문법으로 추가해줘야하는데, 추가해줄 때, <strong>기존의 값을 스프레드 문법으로 풀어준 뒤 새로운 객체를 추가해줘야지 아니면 새로운 값만 할당된다.</strong></li>
</ul>
<h1 id="9-CBD"><a href="#9-CBD" class="headerlink" title="9. CBD"></a>9. CBD</h1><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">$container</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">$container</span> = $container;</span><br><span class="line">    observer.<span class="title function_">subscribe</span>(<span class="variable language_">this</span>.<span class="property">render</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>this.render는 handler 내부에 있는 함수이름으로 호출하면 이는 일반함수로 호출되므로 this가 전역객체에 바인딩된다. 그래서 this가 불일치하는 현상이 발생한다. 이 때 bind 메서드를 사용하여 Component로 this를 바인딩한 새로운 함수를 전달해주므로 this를 일치시켜준다.</li>
</ul>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><ul>
<li>객체의 깊이가 길어지고 대괄호 표기법과 마침표 표기법 사용시점을 확실히 알지 못한다.</li>
<li>구조분해 해줄 수 있는 것들은 구조분해 해줘서 간단하게 작성하자.</li>
<li>클래스 new 연산자로 생성했을 때, 인스턴스의 구조가 어떤지 모른다. + super()</li>
<li>8번 옵저버 패턴 구조 설명을 제대로 못한다.</li>
<li>$container를 잘못이해하고있다. 클래스 구조에서 받은 $container 매개변수를 컴포넌트로 단위로 구성할 것이다. InnerHTML과 혼동하고 있다. 컴포넌트로 사용할 컨테이너를 매개변수로 받는다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/28/PairProgramming/level%202/newsViewer,%20CBD%20Library%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/27/PairProgramming/level%202/sidebar,%20tictactoe,%20acordion%20Tip/"
                            aria-label=": sidebar, tictactoe, acordion Tip"
                        >
                            sidebar, tictactoe, acordion Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-27T22:58:30+09:00">
	
		    2022/09/27
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-2/">level 2</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-ToggleSideNav"><a href="#1-ToggleSideNav" class="headerlink" title="1. ToggleSideNav"></a>1. ToggleSideNav</h1><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> isOpen = &#123;</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">local</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;isOpen&quot;</span>));</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">local</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;isOpen&quot;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(value));</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>접근자 프로퍼티 사용하면 함수를 사용하지 않아도 응집도를 높힐 수 있다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (isOpen.<span class="property">local</span> === <span class="literal">null</span>) isOpen.<span class="property">local</span> = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  $nav.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;active&quot;</span>, isOpen.<span class="property">local</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">style</span>.<span class="property">visibility</span> = <span class="string">&quot;visible&quot;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;preload&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>DOMContentLoaded 에서 CSS 속성을 설정해준 뒤 load 이벤트가 발생했을 때, body의 preload 클래스를 제거해줘야 요구사항대로 깜빡임 없이 작동한다. 왜냐하면 preload 클래스가 있으면 모든 자식요소의 transition 이벤트가 무효화된다.</li>
</ul>
<h1 id="2-tictactoe"><a href="#2-tictactoe" class="headerlink" title="2. tictactoe"></a>2. tictactoe</h1><ul>
<li>즉시실행함수로 클로저를 구현한다. ⇒ 정보은닉가능, 응집도 높이고, 관심사 분리</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> people = &#123;</span><br><span class="line">  <span class="attr">a</span>: [],</span><br><span class="line">  <span class="attr">b</span>: [],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 승자를 가려내는 로직</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">entries</span>(people).<span class="title function_">forEach</span>(<span class="function">(<span class="params">[key, value]</span>) =&gt;</span> &#123;</span><br><span class="line">  winning.<span class="title function_">some</span>(<span class="function">(<span class="params">w</span>) =&gt;</span></span><br><span class="line">    w.<span class="title function_">every</span>(<span class="function">(<span class="params">v, index</span>) =&gt;</span> v === value.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b)[index])</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리팩터링 후</span></span><br><span class="line"><span class="keyword">const</span> items = <span class="title class_">Array</span>(<span class="number">9</span>).<span class="title function_">fill</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 승자를 가려내는 함수</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getWinner</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> winning = [</span><br><span class="line">    [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">    [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">    [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>],</span><br><span class="line">    [<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">    [<span class="number">0</span>, <span class="number">4</span>, <span class="number">8</span>],</span><br><span class="line">    [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>],</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; winning.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> [a, b, c] = winning[i];</span><br><span class="line">    <span class="keyword">if</span> (items[a] &amp;&amp; items[a] === items[b] &amp;&amp; items[a] === items[c]) &#123;</span><br><span class="line">      <span class="keyword">return</span> items[a];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>people 객체 안에서 플레이어가 선택한 요소를 배열로 관리하니깐 depth가 깊어져서 가독성도 떨어지고 유지보수가 좋지 않다.<ul>
<li>요소를 클릭할 때 마다 getWinner() 함수 조건문을 판단한다. 그래서 items 배열에 0번째 인덱스부터 차례대로 player “O” or “X”가 삽입된다. 그런 다음에 승리의 경우의 수를 담은 winning 2차원 배열을 순회하면서 items 배열이 winning 배열과 같은지 비교해주고 있다.<br>예를 들면, 처음에 X가 시작하면 X가 누른 요소의 data-id가 items의 index에 ‘X’가 할당되고 그 다음 ‘O’가 누른 요소의 data-id가 items의 index에 ‘O’가 할당된다. 그 때마다 반복문 돌면서 items 배열에 winning 배열의 인덱스에 모두 같은 player가 있는지 확인하여 승리 여부를 확인한다.</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 리팩터링 전</span></span><br><span class="line"><span class="keyword">let</span> current = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> people = &#123;</span><br><span class="line">  <span class="attr">O</span>: [],</span><br><span class="line">  <span class="attr">X</span>: [],</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> isWin = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> winner = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리팩터링 후</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">  <span class="attr">player</span>: <span class="string">&#x27;O&#x27;</span>,</span><br><span class="line">  <span class="attr">people</span>: &#123;</span><br><span class="line">    <span class="attr">O</span>: [],</span><br><span class="line">    <span class="attr">X</span>: [],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">isWin</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> winning = [</span><br><span class="line">      [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>],</span><br><span class="line">      [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],</span><br><span class="line">      [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>],</span><br><span class="line">      [<span class="number">0</span>, <span class="number">3</span>, <span class="number">6</span>],</span><br><span class="line">      [<span class="number">1</span>, <span class="number">4</span>, <span class="number">7</span>],</span><br><span class="line">      [<span class="number">2</span>, <span class="number">5</span>, <span class="number">8</span>],</span><br><span class="line">      [<span class="number">0</span>, <span class="number">4</span>, <span class="number">8</span>],</span><br><span class="line">      [<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>],</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getCombinations</span>(<span class="variable language_">this</span>.<span class="property">people</span>[<span class="variable language_">this</span>.<span class="property">player</span>], <span class="number">3</span>).<span class="title function_">some</span>(<span class="function"><span class="params">c</span> =&gt;</span> winning.<span class="title function_">some</span>(<span class="function"><span class="params">w</span> =&gt;</span> w.<span class="title function_">every</span>(<span class="function">(<span class="params">v, index</span>) =&gt;</span> v === c.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b)[index])));</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">winner</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">isWin</span> ? <span class="variable language_">this</span>.<span class="property">player</span> : <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">length</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">values</span>(<span class="variable language_">this</span>.<span class="property">people</span>).<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, c</span>) =&gt;</span> a + c.<span class="property">length</span>, <span class="number">0</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2번째 리팩터링 후</span></span><br><span class="line"><span class="keyword">let</span> player = <span class="string">&#x27;X&#x27;</span>;</span><br><span class="line"><span class="keyword">let</span> items = <span class="title class_">Array</span>(<span class="number">9</span>).<span class="title function_">fill</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getWinner</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setPlayer</span> = nextPlayer =&gt; &#123;</span><br><span class="line"> ...</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>관리해야할 상태가 많아지면 부수효과 발생할 가능성이 높아지므로, 상태 최소화를 해주었다.<ul>
<li>리팩터링 후 상태값은 줄고 접근자 프로퍼티를 사용하여 로직의 기준을 설정해주었다. 함수를 사용하는 것 대신 접근자 프로퍼티를 쓰게되면 매개변수에 대한 고민이 줄어들어 사용하였다.</li>
<li>하지만 접근자 프로퍼티를 사용하기 위해서는 데이터를 객체안에서 보관해야 하고 그에 따라 접근 방식이 마침표 표기법과 대괄호 표기법으로 depth가 길어져 가독성이 떨어지는 것을 느꼈고 굳이 state로 관리해줄 필요가 없다고 판단하여 state를 제거하여 변수로 나타내고 접근자 프로퍼티는 함수로 나타내었다.</li>
</ul>
</li>
</ul>
<h1 id="3-Acordion"><a href="#3-Acordion" class="headerlink" title="3. Acordion"></a>3. Acordion</h1><ul>
<li>$container &#x3D; document.querySelector(’.acordian1’) 이다. querySelector가 꼭 document, window에만 붙을 수 있는 것이 아니라 node에 사용 가능한 메서드이다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 리팩터링 전</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getHeight</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> $item = $container.<span class="title function_">querySelector</span>(<span class="string">&quot;.active &gt; ul &gt; li&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> height = <span class="title function_">getComputedStyle</span>($item).<span class="title function_">getPropertyValue</span>(<span class="string">&quot;height&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> count = e.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">&quot;.active&quot;</span>).<span class="title function_">querySelector</span>(<span class="string">&quot;ul &gt; li&quot;</span>).<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> +height.<span class="title function_">replace</span>(<span class="string">&quot;px&quot;</span>, <span class="string">&quot;&quot;</span>) * count + <span class="string">&quot;px&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리팩터링 후</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getHeight</span> = (<span class="params">$article = $container.querySelector(<span class="string">&quot;article&quot;</span>)</span>) =&gt;</span><br><span class="line">  $article.<span class="title function_">querySelector</span>(<span class="string">&quot;ul&quot;</span>).<span class="property">scrollHeight</span> + <span class="string">&quot;px&quot;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>ul 요소의 scrollHeight 값을 구하면 overflow : hidden 처리된 요소까지 포함한 높이를 구할 수 있으므로 간결하게 사용할 수 있다.</li>
</ul>
<h1 id="오늘-배운-점"><a href="#오늘-배운-점" class="headerlink" title="오늘 배운 점"></a>오늘 배운 점</h1><ol>
<li>접근자 프로퍼티를 사용하여 객체의 응집도를 높이고 가독성을 키울 수 있다는 것을 배웠다.</li>
<li>Array.fill() vs Array.from() 의 차이를 알게 되었다.</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr.<span class="title function_">fill</span>(value[, start[, end]])</span><br><span class="line"></span><br><span class="line"><span class="comment">// EX)</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">fill</span>(<span class="number">4</span>);               <span class="comment">// [4, 4, 4]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">fill</span>(<span class="number">4</span>, <span class="number">1</span>);            <span class="comment">// [1, 4, 4]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].<span class="title function_">fill</span>(<span class="number">4</span>, <span class="number">1</span>, <span class="number">2</span>);         <span class="comment">// [1, 4, 3]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Array.fill()은 ()안의 요소를 배열에 시작부터 끝 인덱스까지 채운다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike[, mapFn[, thisArg]])</span><br><span class="line"></span><br><span class="line">mapFn : 배열의 모든 요소에 대해 호출할 맵핑 함수</span><br><span class="line"></span><br><span class="line"><span class="comment">// EX)</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="function"><span class="params">x</span> =&gt;</span> x + x); <span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>Array.from()은 배열로 변환하고자 하는 유사배열 객체 또는 Iterable 객체를 얕게 복사하여 새로운 Array 객체를 만든다.</li>
<li>주로 이중배열을 작성할 때 사용한다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/27/PairProgramming/level%202/sidebar,%20tictactoe,%20acordion%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/26/PairProgramming/level%201/%ED%8E%98%EC%96%B4%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20level%201%20%EA%B8%B0%EC%88%A0%EC%A0%81%20%ED%9A%8C%EA%B3%A0/"
                            aria-label=": 페어프로그래밍 level 1 기술적 회고"
                        >
                            페어프로그래밍 level 1 기술적 회고
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-26T18:35:38+09:00">
	
		    2022/09/26
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-1/">level 1</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="stopWatch-회고"><a href="#stopWatch-회고" class="headerlink" title="stopWatch 회고"></a>stopWatch 회고</h1><h2 id="1-복잡한-삼항-연산자를-메서드로-간단하게"><a href="#1-복잡한-삼항-연산자를-메서드로-간단하게" class="headerlink" title="1. 복잡한 삼항 연산자를 메서드로 간단하게"></a>1. 복잡한 삼항 연산자를 메서드로 간단하게</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> formatElapsedTime = (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1 =&gt; &#x27;01&#x27;, 10 =&gt; &#x27;10&#x27;</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">format</span> = (<span class="params">n</span>) =&gt; (n + <span class="string">&quot;&quot;</span>).<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="comment">// const format = n =&gt; (n &lt; 10 ? &#x27;0&#x27; + n : n + &#x27;&#x27;);</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">&#123; mm, ss, ms &#125;</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;format(mm)&#125;</span>:<span class="subst">$&#123;format(ss)&#125;</span>:<span class="subst">$&#123;format(ms)&#125;</span>`</span>;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>

<ul>
<li>삼항 연산자로 조건에 따라 문자열을 직접 넣어서 구현하였는데 padStart 메서드를 사용하면 가독성을 키웠다.</li>
<li>리팩터링 전에는 minutes, seconds 같은 변수를 사용했는데, format 함수를 사용하여 중복을 제거해주었다.</li>
</ul>
<h2 id="2-일관성있는-코드를-작성하자"><a href="#2-일관성있는-코드를-작성하자" class="headerlink" title="2. 일관성있는 코드를 작성하자"></a>2. 일관성있는 코드를 작성하자</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> renderLaps = (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $laps = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.stopwatch &gt; .laps&#x27;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 랩 타임을 생성하고 DOM에 반영한다.</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">createLapElement</span> = (<span class="params">newLap, index</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> $fragment = <span class="variable language_">document</span>.<span class="title function_">createDocumentFragment</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> $index = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    $index.<span class="property">textContent</span> = index;</span><br><span class="line">    $fragment.<span class="title function_">appendChild</span>($index);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> $newLab = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">    $newLab.<span class="property">textContent</span> = <span class="title function_">formatElapsedTime</span>(newLap);</span><br><span class="line">    $fragment.<span class="title function_">appendChild</span>($newLab);</span><br><span class="line"></span><br><span class="line">    $laps.<span class="title function_">appendChild</span>($fragment);</span><br><span class="line"></span><br><span class="line">    $laps.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;grid&#x27;</span>;</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>리팩터링 전에는 addLap 함수에서 insertAdjacentHTML 메서드 사용하고 reset 함수에서는 innerHTML을 사용하여 일관성이 떨어졌다.</p>
</li>
<li><p>위 코드는 fragment 라는 서브 DOM을 구성하여 기존 DOM을 추가하는 용도로 사용하여 일관성을 갖췄다.</p>
</li>
</ul>
<h2 id="3-템플릿-건드리지-말라면-건드리지-말기"><a href="#3-템플릿-건드리지-말라면-건드리지-말기" class="headerlink" title="3. 템플릿 건드리지 말라면 건드리지 말기"></a>3. 템플릿 건드리지 말라면 건드리지 말기</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 리팩터링 전</span></span><br><span class="line">$laps.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;div class=&quot;lap-title&quot;&gt;Laps&lt;/div&gt;</span></span><br><span class="line"><span class="string">  &lt;div class=&quot;lap-title&quot;&gt;Time&lt;/div&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리팩터링 후</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">removeAllLapElement</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="variable language_">document</span></span><br><span class="line">    .<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.laps &gt; div:not(.lap-title)&quot;</span>)</span><br><span class="line">    .<span class="title function_">forEach</span>(<span class="function">(<span class="params">$lap</span>) =&gt;</span> $lap.<span class="title function_">remove</span>());</span><br><span class="line">  $laps.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&quot;none&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>요구사항에 맞게 템플릿을 건드리지 않아야한다면 템플릿을 건드리지 않아야 하므로 innerHTML로 새로운 값을 할당하는 대신, 자식 노드에 반복문을 사용하였다.</li>
</ul>
<h1 id="Tabs-회고"><a href="#Tabs-회고" class="headerlink" title="Tabs 회고"></a>Tabs 회고</h1><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 리팩터링 전</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, init);</span><br><span class="line"></span><br><span class="line">$tabs.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $navItems = [...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.tab-content&quot;</span>)];</span><br><span class="line">  <span class="keyword">if</span> (!e.<span class="property">target</span>.<span class="title function_">matches</span>(<span class="string">&quot;.tab&quot;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">activateTab</span>(e, $navItems);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리팩터링 후</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;nav&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!e.<span class="property">target</span>.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;tab&quot;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  currentTabIndex = +e.<span class="property">target</span>.<span class="property">dataset</span>.<span class="property">index</span>;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.glider&quot;</span>).<span class="property">style</span>.<span class="property">transform</span> = <span class="string">`translate3D(<span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    currentTabIndex * <span class="number">100</span></span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>%, 0, 0)`</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.tab-content&quot;</span>).<span class="title function_">forEach</span>(<span class="function">(<span class="params">$tabContent, i</span>) =&gt;</span> &#123;</span><br><span class="line">    $tabContent.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;active&quot;</span>, i === currentTabIndex);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>async init 함수 내부에서 $tabs 이벤트 핸들러 등록까지 함께 해줘서 응집도 높은 코드를 설계할 수 있다.</li>
</ul>
<h1 id="autocomplete-회고"><a href="#autocomplete-회고" class="headerlink" title="autocomplete 회고"></a>autocomplete 회고</h1><h2 id="1-정규표현식에-콜백함수-사용"><a href="#1-정규표현식에-콜백함수-사용" class="headerlink" title="1. 정규표현식에 콜백함수 사용"></a>1. 정규표현식에 콜백함수 사용</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 리팩터링 전</span></span><br><span class="line">country.<span class="title function_">replace</span>(regExp, <span class="string">`&lt;strong&gt;<span class="subst">$&#123;country.match(regExp)&#125;</span>&lt;/strong&gt;`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 리팩터링 후</span></span><br><span class="line">name.<span class="title function_">replace</span>(</span><br><span class="line">  <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">`(<span class="subst">$&#123;searchString&#125;</span>)`</span>, <span class="string">&quot;i&quot;</span>),</span><br><span class="line">  <span class="function">(<span class="params">matched</span>) =&gt;</span> <span class="string">`&lt;strong&gt;<span class="subst">$&#123;matched&#125;</span>&lt;/strong&gt;`</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="2-요구사항을-잘-읽고-적합하게-설계하자"><a href="#2-요구사항을-잘-읽고-적합하게-설계하자" class="headerlink" title="2. 요구사항을 잘 읽고 적합하게 설계하자."></a>2. 요구사항을 잘 읽고 적합하게 설계하자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">selectSuggestItem</span> = (<span class="params">$selectedItem</span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">// prettier-ignore</span></span><br><span class="line">  $toggleButton.<span class="property">innerHTML</span> = ($selectedItem</span><br><span class="line">    ? $selectedItem.<span class="property">innerHTML</span></span><br><span class="line">    : <span class="string">`&lt;span&gt;</span></span><br><span class="line"><span class="string">        &lt;i class=&quot;bx bx-search&quot;&gt;&lt;/i&gt;</span></span><br><span class="line"><span class="string">        &lt;span class=&quot;autocomplete-title&quot;&gt;Select a country&lt;/span&gt;</span></span><br><span class="line"><span class="string">      &lt;/span&gt;`</span></span><br><span class="line">  ) + <span class="string">`&lt;i class=&quot;bx bx-caret-down&quot;&gt;&lt;/i&gt;`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>리팩터링 이전 코드는 li 요소 안의 span 요소를 클릭하면 제대로 동작하지 않았다. 그래서 위와 같이 로직을 수정을 해줬어야 했다. 그러므로 꼭 요구사항을 적절히 읽고 그에 적절한 코드를 작성하는 습관을 기르자.</li>
</ul>
<h1 id="Carousel-회고"><a href="#Carousel-회고" class="headerlink" title="Carousel 회고"></a>Carousel 회고</h1><h2 id="1-transitionend-이벤트가-발생했다-안하는-현상"><a href="#1-transitionend-이벤트가-발생했다-안하는-현상" class="headerlink" title="1. transitionend 이벤트가 발생했다 안하는 현상"></a>1. transitionend 이벤트가 발생했다 안하는 현상</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$container.<span class="title function_">addEventListener</span>(<span class="string">&quot;transitionend&quot;</span>, carouselSlider.<span class="property">completeTransition</span>);</span><br><span class="line"></span><br><span class="line">$container.<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&quot;transitioncancel&quot;</span>,</span><br><span class="line">  carouselSlider.<span class="property">completeTransition</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>transition 이벤트가 완료 되었을 때, 이벤트 핸들러를 호출하도록 코드를 작성하였다.<br>그런데 transitionend 이벤트가 발생하기 전 즉, <strong>transition이 완료되기 전에 transition-property가 제거되거나 display:none 으로 설정이 변경되면 <span style='color:red'>이벤트가 생성되지 않는다.</span></strong></li>
</ul>
<p>그래서 보통은 안전하게 CSS 속성 변화가 되었을 때, transitionend 이벤트를 사용하기 위해 라이브러리를 사용하는데, 요구사항에서 라이브러리를 사용하지 말라고 하였으므로, transitioncancel 이벤트를 사용하였다.</p>
<p>transitionend이벤트와 transitioncancel이벤트는 양방향으로 발생한다. 즉, transitionend 이벤트가 발생하면 transitioncancel 이벤트는 발생하지 않는다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/26/PairProgramming/level%201/%ED%8E%98%EC%96%B4%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20level%201%20%EA%B8%B0%EC%88%A0%EC%A0%81%20%ED%9A%8C%EA%B3%A0/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/23/PairProgramming/level%201/%ED%8E%98%EC%96%B4%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20level%201%20%ED%9A%8C%EA%B3%A0/"
                            aria-label=": 페어프로그래밍 level 1 회고"
                        >
                            페어프로그래밍 level 1 회고
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-23T19:10:18+09:00">
	
		    2022/09/23
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-1/">level 1</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="2주간의-페어-프로그래밍-회고"><a href="#2주간의-페어-프로그래밍-회고" class="headerlink" title="2주간의 페어 프로그래밍 회고"></a>2주간의 페어 프로그래밍 회고</h1><h1 id="1-무지성-코딩을-하지-말자"><a href="#1-무지성-코딩을-하지-말자" class="headerlink" title="1. 무지성 코딩을 하지 말자."></a>1. 무지성 코딩을 하지 말자.</h1><p>생각 없이 코드를 짜면 내가 이 코드를 다른사람에게 설명해야하는 순간이 올 때, 말문이 턱 ! 막혀버리게 된다.</p>
<p>“여기서 왜 이 메서드를 사용했나요?”</p>
<p>“왜 이 변수는 이곳에 위치해야하나요?”</p>
<p>“이 함수의 이름으로 봐선 이러이러한 함수같은데 그게 맞나요?”</p>
<ul>
<li>위와 같은 질문들을 받았을 때, 나의 기준과 코드를 작성하는 신념을 세워 코드를 짜야지만 앞으로도 계속해서 발전하는 코드를 작성할 수 있다.</li>
</ul>
<h2 id="무지성-코딩을-하지-않기-위한-팁"><a href="#무지성-코딩을-하지-않기-위한-팁" class="headerlink" title="무지성 코딩을 하지 않기 위한 팁"></a><span style="color:red">무지성 코딩을 하지 않기</span> 위한 팁</h2><ol>
<li>상대방에게 말로 설명하면서 코딩을 하자</li>
</ol>
<p>상대방에게 말로 설명하면서 코딩을 하다보면 논리에 맞지 않는 코드를 짤 수 없게 된다.</p>
<p>상대방이 이해하지 못하면 이해시킨 뒤 코딩을 이어간다.</p>
<h1 id="2-틀에-잡힌-생각을-버려라"><a href="#2-틀에-잡힌-생각을-버려라" class="headerlink" title="2. 틀에 잡힌 생각을 버려라"></a>2. 틀에 잡힌 생각을 버려라</h1><p>처음부터 MVC 패턴을 머릿속에 담아두고 그 틀대로 코드를 짜려고 하지 말자. 틀을 가지고 코드를 짜게되면 하나의 패턴에 국한되어 생각하는 힘을 기르는 것을 막는다.</p>
<p>수업 때 배운 state와 setState를 사용한 MVC 패턴은 분명 좋은 패턴이지만, 모든 기능 구현에 필요하진 않다. 그러므로 처음부터 틀에 밖힌 사고를 하지 말고 차근차근 짜보면서 필요한 것들이 생긴다면 추가하도록 한다.</p>
<h1 id="3-성능과-가독성의-딜레마"><a href="#3-성능과-가독성의-딜레마" class="headerlink" title="3. 성능과 가독성의 딜레마"></a>3. 성능과 가독성의 딜레마</h1><p>성능을 생각하면 코드의 가독성이 떨어지고,</p>
<p>코드의 가독성을 생각하면 성능이 떨어지는 경우가 다반사이다.</p>
<p>성능이 미비한 차이이니 무조건 가독성만 챙기는 것은 옳지 않다. 각각의 상황에 맞게 성능과 가독성 중 하나의 우선순위를 택했다면, 선택받지 못한 것을 사용하였을 때, 장점도 알아두고 넘어가자.</p>
<h1 id="4-되는-이유와-되지-않는-이유"><a href="#4-되는-이유와-되지-않는-이유" class="headerlink" title="4. 되는 이유와 되지 않는 이유"></a>4. 되는 이유와 되지 않는 이유</h1><p>코드를 작성하다보면 막히는 부분이 분명있을 것이다. 그럴 때 마다 우선 어떤 부분에서 문제가 발생하는지를 파악하는 것이 우선이다.</p>
<p>그리고 그 문제를 해결하기 위해 구글링을 하거나 시도를 해보는데, 그 때마다 코드가 작동해서 좋아할 것이 아니고, 왜 코드가 작동하고, 왜 코드가 작동하지 않는지를 명확히 파악하고 진행해야 한다.</p>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>처음 페어 프로그래밍을 시작했을 때는 코드에 대한 두려움은 없었다. 일단 요구사항에서 언급한 기능을 구현하기 위해 코드를 작성해 나갔는데, 그렇게 의식의 흐름대로 따라가다 보니 어느 순간 막히는 부분이 분명 생겼다. 그 때 마다 <span style="font-size:1rem; color:red">발생한 문제를 직면하고 파악하려 하지 않고</span> 어떻게 하면 작동하게 될지에 집중하였다. 하지만 이렇게 작동에만 집중하다보니 <span style="color:red">내가 무엇을 모르고 무엇을 아는 것인지 메타인지가 떨어지게</span> 되어 학습에 별로 도움이 되지 않았다.</p>
<p>내가 어떤 기능을 구현하기 위한 방법을 모르는 것과 문제가 발생했을 때, 문제를 직면하지 않고 구현에만 집착하는 것은 완전히 별개의 문제이다.</p>
<p>전자는 처음에는 당연히 모를 수 밖에 없는 부분으로 개발을 해나가면서 구글링을 통해 지식을 습득해나가면 되는 부분이지만, 후자는 다음에 똑같은 문제가 발생했을 때 같은 실수를 반복하고 발전이 있는 코드를 작성할 수 없게 된다.</p>
<p>그러므로, 어떤 문제가 발생하면 <span style="font-size:1rem">왜 그런 문제가 발생했는지 근본적인 원인을 파악하고 현재 상황에서 해당 문제의 원인을 해결하기 위해 어떤 방법이 있는지를 찾아보고</span> 시도해보면서 성공하게 되면 이것보다 더 좋은 방법은 없는지를 생각해보는 방향으로 코딩을 해야한다는 것을 느꼈다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/23/PairProgramming/level%201/%ED%8E%98%EC%96%B4%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D%20level%201%20%ED%9A%8C%EA%B3%A0/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/22/PairProgramming/level%201/scroll%20%EC%9D%B4%EB%B2%A4%ED%8A%B8,%20counter,%20isPalindrome,%20darkmode,%20modal,%20stopwatch%20Tip/"
                            aria-label=": scroll 이벤트, counter, isPalindrome, darkmode, modal, stopwatch Tip"
                        >
                            scroll 이벤트, counter, isPalindrome, darkmode, modal, stopwatch Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-22T19:09:28+09:00">
	
		    2022/09/22
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-1/">level 1</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="2번째-리팩터링-하면서-느낀점"><a href="#2번째-리팩터링-하면서-느낀점" class="headerlink" title="2번째 리팩터링 하면서 느낀점"></a>2번째 리팩터링 하면서 느낀점</h1><h1 id="scrollGotoTop"><a href="#scrollGotoTop" class="headerlink" title="scrollGotoTop"></a>scrollGotoTop</h1><ul>
<li>스크롤 깊이와 스로틀 딜레이와 같은 정해진 숫자는 상수이므로, 가독성을 높이기 위해 대문자로 네이밍해주었다.<ul>
<li>은닉해야할 정보가 없기 때문에 클로저로 만들어줄 필요가 없다.</li>
</ul>
</li>
</ul>
<h1 id="counter"><a href="#counter" class="headerlink" title="counter"></a>counter</h1><ul>
<li>리팩터링 전 코드에서는 생성자 함수로 만들어서 인스턴스를 생성하여 클로저를 구현하였다<ul>
<li>하지만 이 방식은 불필요한 인스턴스 생성을 한다는 생각이 들었다.</li>
<li>리팩토링한 코드는 즉시 실행 함수로 감싸서 변수 할당 같이 한번만 실행해도 되는 것들은 한 번만 실행되도록 만들어주었고, 내부의 데이터에 유일하게 접근할 수 있는 해당 함수를 return 해주어 데이터를 은닉해주었다.</li>
<li>counter에 관련된(해당 기능에만 사용되는) 데이터들과 함수들을 한데 묶어줘 응집도를 높여주었다</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//document.body.addEventListener(&#x27;click&#x27;, e =&gt; &#123;</span></span><br><span class="line"><span class="comment">//  if (!e.target.matches(&#x27;button&#x27;)) return;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//  e.target.matches(&#x27;.increase&#x27;) ? counter.increase() : counter.decrease();</span></span><br><span class="line"><span class="comment">//&#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.increase&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, counter.<span class="property">increase</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.decrease&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, counter.<span class="property">decrease</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>증가, 감소 버튼을 이벤트 위임으로 작성해보았다. 이럴 경우 이벤트 핸들러 등록 갯수가 줄어들어 증감 버튼에 대한 로직을 한곳에서 관리할 수 있고 각각의 이벤트 마다 이벤트 핸들러를 등록하지 않아도 된다는 장점이 있다고 생각했다.<ul>
<li>하지만, 이벤트 위임의 경우 각 버튼이 다른 기능을 해야하는 경우라면 이벤트가 발생한 요소에 대한 조건문이 많아지고 그에 따라 코드가 복잡해질 수 있으므로 이벤트 위임 대신 각 요소에 이벤트 핸들러를 등록하는 방법으로 선택하였다.</li>
</ul>
</li>
</ul>
<h1 id="isPalindrome"><a href="#isPalindrome" class="headerlink" title="isPalindrome"></a>isPalindrome</h1><ul>
<li>문자열을 배열로 만들어 주는 경우 <code>str.split(&#39;&#39;)</code> 를 사용하는 것보단 문자열이 이터러블 요소인 것을 감안하여 스프레드 문법(<code>[…string]</code>)을 사용하였다.<ul>
<li>메서드를 사용하기위해 알아야 할 것들이 많은데 스프레드 문법은 알아야할 정보가 적어 코드의 이해성을 높일 수 있다.</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$result.textContent = isPalindrome(value) ? `&quot;$&#123;value&#125;&quot; is a palindrome` : `&quot;$&#123;value&#125;&quot; is not a palindrome`</span></span><br><span class="line"></span><br><span class="line">$result.<span class="property">textContent</span> = <span class="string">`&quot;<span class="subst">$&#123;value&#125;</span>&quot; is <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">  isPalindrome(value) ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;not&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">&#125;</span> a palindrome`</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>중복이 아닌 부분만 삼항 연산자를 이용하여 중복을 줄였다.</li>
<li>innerHTML 대신 textContent를 사용한 이유는 해당 요소에 할당한 값이 text 요소로만 이루어져 있기 때문이다.<ul>
<li>innerText는 숨겨진 텍스트는 무시하고 사용자에게 보여지는 text만 가져올 수 있기 때문에 원하지 않는 오류가 발생할 수 있다. 내부에 특별히 스타일 적용이 없는 문자열을 할당할 때는 성능상 적합하지 않다.</li>
</ul>
</li>
</ul>
<h1 id="DarkMode"><a href="#DarkMode" class="headerlink" title="DarkMode"></a>DarkMode</h1><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// +getComputedStyle(document.querySelector(&#x27;:root&#x27;)).getPropertyValue(&#x27;--transition-duration&#x27;)</span></span><br><span class="line"></span><br><span class="line">+<span class="title function_">getComputedStyle</span>(<span class="variable language_">document</span>.<span class="property">documentElement</span>).<span class="title function_">getPropertyValue</span>(</span><br><span class="line">  <span class="string">&quot;--transition-duration&quot;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>:root 에 존재하는 사용자 정의 변수를 가지고 올 경우에는 document.documentElement로 접근해야 한다.<ul>
<li><code>document.querySelector(&#39;:root&#39;)</code> 도 가능하지만 querySelector 메서드를 사용하는 것보다 프로퍼티를 접근하는 것이 더 효율적이므로 판단하여 사용하자.</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getCurrentMode</span> = (<span class="params"></span>) =&gt; <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;isDark&quot;</span>));</span><br></pre></td></tr></table></figure>

<ul>
<li>로컬스토리지에 정보를 저장할 때 문자열로 저장되기 때문에 이를 getter 함수로 가져올 때 문자열 ‘true’ 값을 boolean 값으로 받기 위해 JSON.parse() 메서드를 사용하였다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// const setCurrentMode = selectedMode =&gt; &#123;</span></span><br><span class="line"><span class="comment">//    localStorage.setItem(&#x27;isDark&#x27;, selectedMode);</span></span><br><span class="line"><span class="comment">//    toggleMode();</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="comment">// localStorage.getItem(&#x27;isDark&#x27;) === null ? setCurrentMode(userTheme) : toggleMode();</span></span><br><span class="line">   <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&#x27;isDark&#x27;</span>) ?? userTheme);</span><br><span class="line">   <span class="title function_">toggleMode</span>();</span><br><span class="line">&#125;,</span><br><span class="line"><span class="title function_">toggle</span>(<span class="params"></span>) &#123;</span><br><span class="line">   <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;isDark&#x27;</span>, !<span class="title function_">getCurrentMode</span>());</span><br><span class="line">   <span class="title function_">toggleMode</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>기존에는 삼항연산자를 사용하였지만, 초기값이 없는 null 상태일 때 null 병합 연산자를 사용하여 초기값을 할당함으로써 함수를 줄일 수 있었다. 또한, setCurrentMode 함수가 필요없으므로 함수를 제거하여 코드의 이해성과 가독성을 높였다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, setDarkMode.<span class="property">init</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, setDarkMode.<span class="property">preventBlink</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>렌더링 되는 시점이 다르면 다른 역할을 하는 함수로 판단한다.</li>
</ul>
<h1 id="popupModal"><a href="#popupModal" class="headerlink" title="popupModal"></a>popupModal</h1><ul>
<li>변수를 사용한 이유는 단지 코드의 중복때문만이 아니라 이벤트가 발생할 때마다 호출될 필요가 없는 함수의 반환값을 변수에 저장하여 사용하기 위함이다.</li>
<li>특정 목적을 위해서 밀접하게 연관된 기능들을 한데 모아 관리하면 해당 함수에 대한 이해도가 증가하게 되고 이는 유지보수성을 높이는데 도움이 된다. 또한 코드의 재사용성도 증가하는 장점도 있어 응집도를 높이는 구조로 코드를 설계하였습니다. 응집도를 높인 코드를 짜면서 정보를 안전하게 다룰 수 있도록 클로저를 구현하였습니다.</li>
<li>요구사항에 맞게 Enter키 입력과 OK버튼 클릭시 중복을 줄이는 코드를 작성하기 위해서 이들을 form 태그로 감싸주었고 ‘submit’ 이벤트 타입으로 이벤트 핸들러를 등록하였습니다. cancel 버튼도 연관성을 위해 form 태그 안에 추가하였는데, cancel 버튼은 기본타입을 버튼으로 변경하여 submit 이벤트가 발생하지 않도록 하였습니다.</li>
<li>is-open 클래스를 이용하여 모달창을 보여주고 사라지도록 구현하였습니다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> popupModal = (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $modalContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal-container&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> $modal = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> $popupMessage = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.popup-message&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="title function_">toggle</span>(<span class="params"></span>) &#123;</span><br><span class="line">      $modal.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;is-open&quot;</span>);</span><br><span class="line">      $modalContainer.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;background-gray&quot;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">//    remove() &#123;</span></span><br><span class="line">    <span class="comment">//      $modal.classList.remove(&#x27;is-open&#x27;);</span></span><br><span class="line">    <span class="comment">//      $modalContainer.classList.remove(&#x27;background-gray&#x27;);</span></span><br><span class="line">    <span class="comment">//   &#125;,</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      e.<span class="title function_">preventDefault</span>();</span><br><span class="line">      $popupMessage.<span class="property">textContent</span> = <span class="string">`from popup : <span class="subst">$&#123;e.target.firstElementChild.value&#125;</span>`</span>;</span><br><span class="line">      popupModal.<span class="title function_">toggle</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span></span><br><span class="line">  .<span class="title function_">querySelector</span>(<span class="string">&quot;.popup-form&quot;</span>)</span><br><span class="line">  .<span class="title function_">addEventListener</span>(<span class="string">&quot;submit&quot;</span>, popupModal.<span class="property">render</span>);</span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!e.<span class="property">target</span>.<span class="title function_">matches</span>(<span class="string">&quot;.is-close&quot;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// popupModal.remove()</span></span><br><span class="line">  popupModal.<span class="title function_">toggle</span>();</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal-container&quot;</span>).<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (!e.<span class="property">target</span>.<span class="title function_">matches</span>(<span class="string">&quot;.modal-container&quot;</span>)) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// popupModal.remove()</span></span><br><span class="line">  popupModal.<span class="title function_">toggle</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>e ⇒ &#123;popupModal.render(e)&#125; === popupModal</code> 인수 전달안해줘도 event 객체 첫번째 인수로 넘어간다. <strong>축약형</strong></li>
<li>toggle 메서드를 사용하여 remove 메서드가 필요없어지므로 제거하였다.</li>
</ul>
<h1 id="stopWatch"><a href="#stopWatch" class="headerlink" title="stopWatch"></a>stopWatch</h1><ul>
<li>동일한 버튼을 구분할 때 textContent가 Start인지 Stop인지로 판단하는 것은 매우 좋지 않은 방식이므로, isStarted라는 현재 상태(시작&#x2F;정지)를 판단하는 변수를 사용하였습니다.</li>
<li>leftButton &#x2F; rightButton , laps&#x2F; title은 동일한 클래스를 가져 querySelectAll로 불러와서 인덱스 값으로 접근하는 것이 아닌 배열 디스트럭처링 할당으로 식별자를 할당해주었습니다.<ul>
<li>리팩터링 이후 이벤트 핸들러를 위한 leftButton, rightButton만 querySelectorAll로 받아오고 lap,title은 내부적으로 해결하였다.</li>
</ul>
</li>
<li>스톱워치내에서 관리해야할 데이터(isStarted, elapsedTime, timerId)를 하나의 객체에 담았다.<ul>
<li>isStarted : 스톱워치가 시작되었는지 여부 (true &#x2F; false)</li>
<li>elapsedTime : Start 버튼을 누르고 경과된 시간<br>(setInterval의 delay마다 값이 증가하며, 이를 convertTime 함수를 통해 display에 표시한다.)</li>
<li>timerId : setInterval 함수의 리턴값을 가지며 clearInterval 함수와 함께 stop 기능을 구현하였다.</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">convertTime</span> = (<span class="params">time</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> minutes =</span><br><span class="line">    <span class="title class_">Math</span>.<span class="title function_">floor</span>(time / <span class="number">6000</span>) &lt; <span class="number">10</span></span><br><span class="line">      ? <span class="string">`0<span class="subst">$&#123;<span class="built_in">Math</span>.floor(time / <span class="number">6000</span>)&#125;</span>`</span></span><br><span class="line">      : <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.floor(time / <span class="number">6000</span>)&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> seconds =</span><br><span class="line">    <span class="title class_">Math</span>.<span class="title function_">floor</span>((time % <span class="number">6000</span>) / <span class="number">100</span>) &lt; <span class="number">10</span></span><br><span class="line">      ? <span class="string">`0<span class="subst">$&#123;<span class="built_in">Math</span>.floor((time % <span class="number">6000</span>) / <span class="number">100</span>)&#125;</span>`</span></span><br><span class="line">      : <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.floor((time % <span class="number">6000</span>) / <span class="number">100</span>)&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">const</span> ms =</span><br><span class="line">    <span class="title class_">Math</span>.<span class="title function_">floor</span>(time % <span class="number">6000</span>) % <span class="number">100</span> &lt; <span class="number">10</span></span><br><span class="line">      ? <span class="string">`0<span class="subst">$&#123;<span class="built_in">Math</span>.floor(time % <span class="number">6000</span>) % <span class="number">100</span>&#125;</span>`</span></span><br><span class="line">      : <span class="string">`<span class="subst">$&#123;<span class="built_in">Math</span>.floor(time % <span class="number">6000</span>) % <span class="number">100</span>&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`<span class="subst">$&#123;minutes&#125;</span>:<span class="subst">$&#123;seconds&#125;</span>:<span class="subst">$&#123;ms&#125;</span>`</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>convert 함수는 display에 보여질 시간으로 변환하고 그 값을 문자열로 리턴한다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// $laps.children.length</span></span><br><span class="line">$laps.<span class="property">childElementCount</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>리팩터링 전에는 자식노드의 갯수를 알기 위해서 자식노드(children)로 접근한 다음 길이(length)로 접근하여 값을 얻었지만, childElementCount라는 프로퍼티를 이용하여 한 번에 값을 얻을 수 있었다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$laps.<span class="title function_">insertAdjacentHTML</span>(<span class="string">&quot;beforeend&quot;</span>, newLap);</span><br></pre></td></tr></table></figure>

<ul>
<li>리팩터링 전에는 laps를 배열로 관리하여 이를 innerHTML으로 하나가 추가되더라도 모든 부분을 렌더링하였지만, 리팩터링 후에는 insertAdjacentHTML 메서드를 사용하여 HTML을 동적으로 추가해주어 추가된 부분만 렌더링 되도록 해주었다. (참고 : 여기서 beforeend 는 해당 요소의 자식노드 마지막에 삽입하는 것을 의미한다)</li>
<li>reset 함수에서도 insertAdjacentHTML처럼 추가된 부분만 삭제해주고 싶었지만, 고려해야할 조건들이 많아져 가독성을 위해 기존의 innerHTML을 사용하였다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">  toggle,</span><br><span class="line">  <span class="title function_">lapAndReset</span>(<span class="params"></span>) &#123;</span><br><span class="line">    !data.<span class="property">isStarted</span> ? <span class="title function_">addLap</span>() : <span class="title function_">reset</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$rightButton.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, stopWatch.<span class="property">lapAndReset</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>이벤트 핸들러에서 data.isStarted를 이용하여 조건에 따라 함수를 실행해주려 하였으나 클로저로 구현하였기 때문에 클로저 바깥에서 data.isStarted 값을 참조할 수 없기 때문에 클로저 내부에서 data.isStarted를 참조하여 조건에 맞게 해당 함수를 실행하는 함수를 return하였다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/22/PairProgramming/level%201/scroll%20%EC%9D%B4%EB%B2%A4%ED%8A%B8,%20counter,%20isPalindrome,%20darkmode,%20modal,%20stopwatch%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/21/PairProgramming/level%201/form%20validation%20Tip/"
                            aria-label=": form validation Tip"
                        >
                            form validation Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-21T19:11:05+09:00">
	
		    2022/09/21
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-1/">level 1</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Form-Validation-구현-중-느낀점"><a href="#Form-Validation-구현-중-느낀점" class="headerlink" title="Form Validation 구현 중 느낀점"></a>Form Validation 구현 중 느낀점</h1><h2 id="1-모든-코드를-setState로-틀을-고정하여-생각하지-말자"><a href="#1-모든-코드를-setState로-틀을-고정하여-생각하지-말자" class="headerlink" title="1. 모든 코드를 setState로 틀을 고정하여 생각하지 말자."></a>1. 모든 코드를 setState로 틀을 고정하여 생각하지 말자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> state = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&quot;pending&quot;</span>,</span><br><span class="line">  <span class="attr">pw</span>: <span class="string">&quot;pending&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [$idSuccessIcon, $pwSuccessIcon] = [</span><br><span class="line">  ...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.icon-success&quot;</span>),</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> [$idErrorIcon, $pwErrorIcon] = [</span><br><span class="line">  ...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.icon-error&quot;</span>),</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> [$idErrorMessage, $pwErrorMessage] = [</span><br><span class="line">  ...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.error&quot;</span>),</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> $signinButton = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.button&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">render</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  $idSuccessIcon.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, state.<span class="property">id</span> !== <span class="string">&quot;success&quot;</span>);</span><br><span class="line">  $idErrorIcon.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, state.<span class="property">id</span> !== <span class="string">&quot;error&quot;</span>);</span><br><span class="line"></span><br><span class="line">  $pwSuccessIcon.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, state.<span class="property">pw</span> !== <span class="string">&quot;success&quot;</span>);</span><br><span class="line">  $pwErrorIcon.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, state.<span class="property">pw</span> !== <span class="string">&quot;error&quot;</span>);</span><br><span class="line"></span><br><span class="line">  $idErrorMessage.<span class="property">textContent</span> =</span><br><span class="line">    state.<span class="property">id</span> === <span class="string">&quot;error&quot;</span> ? <span class="string">&quot;이메일 형식에 맞게 입력해 주세요.&quot;</span> : <span class="string">&quot;&quot;</span>;</span><br><span class="line">  $pwErrorMessage.<span class="property">textContent</span> =</span><br><span class="line">    state.<span class="property">pw</span> === <span class="string">&quot;error&quot;</span> ? <span class="string">&quot;영문 또는 숫자를 6~12자 입력하세요.&quot;</span> : <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">id</span> === <span class="string">&quot;success&quot;</span> &amp;&amp; state.<span class="property">pw</span> === <span class="string">&quot;success&quot;</span>)</span><br><span class="line">    $signinButton.<span class="title function_">removeAttribute</span>(<span class="string">&quot;disabled&quot;</span>);</span><br><span class="line">  <span class="keyword">else</span> $signinButton.<span class="title function_">setAttribute</span>(<span class="string">&quot;disabled&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setState</span> = (<span class="params">newState</span>) =&gt; &#123;</span><br><span class="line">  state = &#123; ...state, ...newState &#125;;</span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkIdValidation</span> = (<span class="params">input</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (input === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">    <span class="title function_">setState</span>(&#123; <span class="attr">id</span>: <span class="string">&quot;pending&quot;</span> &#125;);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> regExp =</span><br><span class="line">    <span class="regexp">/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*\.[a-zA-Z]&#123;2,3&#125;$/</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setState</span>(&#123; <span class="attr">id</span>: regExp.<span class="title function_">test</span>(input) ? <span class="string">&quot;success&quot;</span> : <span class="string">&quot;error&quot;</span> &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> $signIdInput = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;#signin-userid&quot;</span>);</span><br><span class="line"></span><br><span class="line">$signIdInput.<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&quot;keyup&quot;</span>,</span><br><span class="line">  _.<span class="title function_">debounce</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">checkIdValidation</span>($signIdInput.<span class="property">value</span>);</span><br><span class="line">  &#125;, <span class="number">500</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>위 코드는 만약 인풋에 입력해야할 값이 늘어 유효성 검사 항목이 늘어나게 된다면 유지보수가 어려워진다. 또한, DOM API에 의존적인 코드이므로 HTML 코드가 변경될 시 유지보수가 어려워질 수 있다.</p>
</li>
<li><p>위 코드는 처음부터 구조를 setState로 잡고 데이터를 변경하는 함수는 setState가 도맡아 하고 render는 화면에 보여주는 역할을 모은 함수 이런 식으로 코드를 작성하였다.</p>
</li>
</ul>
<p>하지만 위와 같이 틀을 미리 잡고 코드를 작성하는 것은 <span style='color:red'>별로 좋지 않는 습관이다.</span></p>
<p>왜냐하면, state를 사용해야하는 상황이 아님에도 setState를 사용하여 그 구조에 억지로 끼워맞추게 되고 그렇게 되면 코드의 가독성과 이해도가 떨어질 수 있고 발전이 없는 코드를 작성하게 된다.</p>
<p>그러므로 코드를 작성할 때는, 우선 구현이 되도록 작성을 하되, 생각을 하면서 그 때 그 때 상황에 맞게 코드를 개선해나가야 한다.</p>
<p>위 코드를 리팩터링한 결과는 다음과 같다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> signinSchema = &#123;</span><br><span class="line">  <span class="attr">userid</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">valid</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="regexp">/^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*\.[a-zA-Z]&#123;2,3&#125;$/</span>.<span class="title function_">test</span>(</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">value</span></span><br><span class="line">      );</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&quot;이메일 형식에 맞게 입력해 주세요.&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">password</span>: &#123;</span><br><span class="line">    <span class="attr">value</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">valid</span>() &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="regexp">/\w&#123;6,12&#125;$/</span>.<span class="title function_">test</span>(<span class="variable language_">this</span>.<span class="property">value</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">message</span>: <span class="string">&quot;영문 또는 숫자를 6~12자 입력하세요.&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">valid</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">userid</span>.<span class="property">valid</span> &amp;&amp; <span class="variable language_">this</span>.<span class="property">password</span>.<span class="property">valid</span>;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">checkValidation</span> = (<span class="params">target</span>) =&gt; &#123;</span><br><span class="line">  signinSchema[target.<span class="property">name</span>].<span class="property">value</span> = target.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (signinSchema[target.<span class="property">name</span>].<span class="property">value</span> === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span></span><br><span class="line">      .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-success`</span>)</span><br><span class="line">      .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable language_">document</span></span><br><span class="line">      .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-error`</span>)</span><br><span class="line">      .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .error`</span>).<span class="property">textContent</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">document</span></span><br><span class="line">    .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-success`</span>)</span><br><span class="line">    .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, !signinSchema[target.<span class="property">name</span>].<span class="property">valid</span>);</span><br><span class="line">  <span class="variable language_">document</span></span><br><span class="line">    .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-error`</span>)</span><br><span class="line">    .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, signinSchema[target.<span class="property">name</span>].<span class="property">valid</span>);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .error`</span>).<span class="property">textContent</span> = !signinSchema[</span><br><span class="line">    target.<span class="property">name</span></span><br><span class="line">  ].<span class="property">valid</span></span><br><span class="line">    ? signinSchema[target.<span class="property">name</span>].<span class="property">message</span></span><br><span class="line">    : <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.signin&quot;</span>).<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&quot;input&quot;</span>,</span><br><span class="line">  _.<span class="title function_">debounce</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">checkValidation</span>(e.<span class="property">target</span>);</span><br><span class="line">  &#125;, <span class="number">500</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>리팩터링한 코드는 우선 setState로 틀을 구성하지 않았다. 굳이 처음부터 setState 함수로 데이터를 변경하고 렌더링까지 해주는 구조를 가질 필요가 없다.</li>
</ul>
<blockquote>
<p>마치 setState로 정해놓고 코드를 작성하는 것은 아이가 어른 흉내를 내는 듯한 느낌이 든다.</p>
</blockquote>
<ul>
<li><p>email과 password의 input에 관련이 있는 데이터를 객체로 관리하고 있다.</p>
</li>
<li><p>input에 이벤트가 발생할 때 마다 input의 value 값을 객체의 데이터에 변경해줘야한다.</p>
</li>
<li><p>접근자 프로퍼티를 사용하여 접근자 프로퍼티를 참조하면 input.value 값과 정규 표현식이 같은지 확인하여 유효성 검사를 결과를 반환한다. 접근자 프로퍼티를 사용한 이유는 해당 접근자 프로퍼티를 참조할 때마다 갱신된 해당 프로퍼티의 유효성 검사 결과를 얻기 위해서 get을 붙여 접근자 프로퍼티로 만들었다.</p>
</li>
</ul>
<blockquote>
<p>각 객체에 필요한 데이터를 한곳에서 관리하고 이들을 이용하여 요구사항을 어떻게 충족시킬지 생각해보자.</p>
</blockquote>
<h2 id="2-DOM-API-사용을-줄이자"><a href="#2-DOM-API-사용을-줄이자" class="headerlink" title="2. DOM API 사용을 줄이자."></a>2. DOM API 사용을 줄이자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">checkValidation</span> = (<span class="params">target</span>) =&gt; &#123;</span><br><span class="line">  signinSchema[target.<span class="property">name</span>].<span class="property">value</span> = target.<span class="property">value</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (signinSchema[target.<span class="property">name</span>].<span class="property">value</span> === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">    <span class="variable language_">document</span></span><br><span class="line">      .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-success`</span>)</span><br><span class="line">      .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable language_">document</span></span><br><span class="line">      .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-error`</span>)</span><br><span class="line">      .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, <span class="literal">true</span>);</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .error`</span>).<span class="property">textContent</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">document</span></span><br><span class="line">    .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-success`</span>)</span><br><span class="line">    .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, !signinSchema[target.<span class="property">name</span>].<span class="property">valid</span>);</span><br><span class="line">  <span class="variable language_">document</span></span><br><span class="line">    .<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .icon-error`</span>)</span><br><span class="line">    .<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hidden&quot;</span>, signinSchema[target.<span class="property">name</span>].<span class="property">valid</span>);</span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">`#<span class="subst">$&#123;target.id&#125;</span> ~ .error`</span>).<span class="property">textContent</span> = !signinSchema[</span><br><span class="line">    target.<span class="property">name</span></span><br><span class="line">  ].<span class="property">valid</span></span><br><span class="line">    ? signinSchema[target.<span class="property">name</span>].<span class="property">message</span></span><br><span class="line">    : <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>최대한 DOM API를 적게 사용하기 위해 해당 이벤트 핸들러의 이벤트 객체를 통해서 다른 요소에 접근할 수 있도록 코드를 작성하였다.</p>
</li>
<li><p><code>document.querySelector(`#$&#123;target.id&#125; ~ .icon-success`)</code> 의 의미는 이벤트가 발생한 요소의 id값을 선택자로 가져와서 해당 선택자의 일반 형제 요소 중 클래스가 icon-success인 요소를 선택하라는 뜻이다.</p>
</li>
</ul>
<blockquote>
<p>DOM API로 요소를 선택할 때 마다 시간이 오래 걸리고 어려운 작업이므로, 이러한 과정을 줄이도록 생각하며 코드를 작성한다.</p>
</blockquote>
<h2 id="3-input-이벤트-타입"><a href="#3-input-이벤트-타입" class="headerlink" title="3. input 이벤트 타입"></a>3. input 이벤트 타입</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.signin&quot;</span>).<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&quot;input&quot;</span>,</span><br><span class="line">  _.<span class="title function_">debounce</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">checkValidation</span>(e.<span class="property">target</span>);</span><br><span class="line">  &#125;, <span class="number">500</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>리팩터링 이전 코드에서는 keyup 이벤트를 사용하여 email과 password의 input에서 발생하는 이벤트를 이벤트 핸들러로 각각 등록해주었다.</p>
</li>
<li><p>리팩터링한 코드에서는 이벤트 위임을 통해서 이벤트를 다뤄주었다.</p>
</li>
<li><p>또한, 인수로 이벤트가 발생한 객체를 전달해주고 이벤트 핸들러 함수 내부에서는 target 매개변수를 해당 인수를 받아 배치해주었다.</p>
</li>
<li><p>e.target.name은 HTML 문서에서 name 어트리뷰트를 가리킨다. 이러한 점을 알게되어 HTML이 매우 중요하다는 것을 깨달았다.</p>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/21/PairProgramming/level%201/form%20validation%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/20/PairProgramming/level%201/toaster,%20autocomplete,%20carousel%20Tip/"
                            aria-label=": toaster, autocomplete, carousel Tip"
                        >
                            toaster, autocomplete, carousel Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-20T18:45:54+09:00">
	
		    2022/09/20
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-1/">level 1</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Toaster-리팩터링-중-느낀점"><a href="#Toaster-리팩터링-중-느낀점" class="headerlink" title="Toaster 리팩터링 중 느낀점"></a>Toaster 리팩터링 중 느낀점</h1><h2 id="1-함수의-인수는-3개를-넘지-말자"><a href="#1-함수의-인수는-3개를-넘지-말자" class="headerlink" title="1. 함수의 인수는 3개를 넘지 말자."></a>1. 함수의 인수는 3개를 넘지 말자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">generateToast</span> = (<span class="params">messageType</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> [type, title, message] = messageType;</span><br><span class="line">  <span class="keyword">const</span> $newToast = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  $newToast.<span class="property">style</span>.<span class="property">bottom</span> = <span class="string">&quot;0&quot;</span>;</span><br><span class="line">  $newToast.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;toast&quot;</span>, type);</span><br><span class="line"></span><br><span class="line">  $newToast.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;h4 class=&quot;toast-title&quot;&gt;<span class="subst">$&#123;title&#125;</span> <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">    [...<span class="variable language_">document</span>.querySelectorAll(<span class="string">&quot;body .toast&quot;</span>)].length</span></span></span><br><span class="line"><span class="subst"><span class="string">  &#125;</span>&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;toast-message&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;svg width=&quot;24&quot; height=&quot;24&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;use xlink:href=&quot;#<span class="subst">$&#123;type&#125;</span>&quot; /&gt;</span></span><br><span class="line"><span class="string">      &lt;/svg&gt;</span></span><br><span class="line"><span class="string">      &lt;p&gt;<span class="subst">$&#123;message&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;a class=&quot;toast-close&quot;&gt;&amp;times;&lt;/a&gt;`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> $newToast;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>배열 스트럭처링으로 매개변수를 함수 내부에서 나눠서 배치하였다.</li>
</ul>
<h2 id="2-함수를-사용하는-이유를-고민하자"><a href="#2-함수를-사용하는-이유를-고민하자" class="headerlink" title="2. 함수를 사용하는 이유를 고민하자."></a>2. 함수를 사용하는 이유를 고민하자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">addToast</span> = (<span class="params">messageType</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> $newToast = <span class="title function_">generateToast</span>(messageType);</span><br><span class="line"></span><br><span class="line">  $body.<span class="title function_">appendChild</span>($newToast);</span><br><span class="line">  <span class="title function_">lineUpToast</span>();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    $newToast.<span class="title function_">remove</span>();</span><br><span class="line"></span><br><span class="line">    <span class="title function_">lineUpToast</span>();</span><br><span class="line">  &#125;, <span class="number">3000</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>setTimeout 함수를 따로 함수로 빼서 사용해보면 어떨까 생각해보았지만, 만약 함수로 들어가게 된다면 오히려 그 함수를 이해하기 위해 더 큰 노력을 쏟아야 할 수 있으므로 가치 판단을 하여 함수로 넣을지 말지를 고민하자.</li>
</ul>
<h1 id="Autocomplete-리팩터링-중-느낀점"><a href="#Autocomplete-리팩터링-중-느낀점" class="headerlink" title="Autocomplete 리팩터링 중 느낀점"></a>Autocomplete 리팩터링 중 느낀점</h1><h2 id="1-setState-함수는-함수-내부의-데이터를-변경만-하는-함수"><a href="#1-setState-함수는-함수-내부의-데이터를-변경만-하는-함수" class="headerlink" title="1. setState 함수는 함수 내부의 데이터를 변경만 하는 함수"></a>1. setState 함수는 함수 내부의 데이터를 변경만 하는 함수</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> state = &#123;</span><br><span class="line">  <span class="attr">countryCode</span>: [],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setState</span> = (<span class="params">newState</span>) =&gt; &#123;</span><br><span class="line">  state = &#123; ...state, ...newState &#125;;</span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">init</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setState</span>(&#123; countryCode &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span></span><br><span class="line">  .<span class="title function_">querySelector</span>(<span class="string">&quot;.autocomplete-toggle-button&quot;</span>)</span><br><span class="line">  .<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    $suggester.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line">    $searchInput.<span class="title function_">focus</span>();</span><br><span class="line"></span><br><span class="line">    autocomplete.<span class="title function_">init</span>();</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>이벤트 핸들러는 모델에서 return 해준 함수만 사용할 수 있도록 하여 관심사를 분리해준다.</p>
</li>
<li><p>또한, 이벤트 핸들러가 setState 함수를 사용하여 데이터를 직접 변경하는 것은 옳지 않다. 위와 같이 init 함수를 통해서 사용하는 것으로 한다. 왜냐하면 setState 함수는 데이터 변경에만 관여하는 함수이지 다른 기능을 하는 함수가 아니기 때문이다.</p>
</li>
</ul>
<h2 id="2-함수-역할의-분리"><a href="#2-함수-역할의-분리" class="headerlink" title="2. 함수 역할의 분리"></a>2. 함수 역할의 분리</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">findCountry</span> = (<span class="params">inputValue</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> regExp = <span class="keyword">new</span> <span class="title class_">RegExp</span>(inputValue, <span class="string">&quot;i&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> newCountryCode = countryCode</span><br><span class="line">    .<span class="title function_">filter</span>(<span class="function">(<span class="params">[, country]</span>) =&gt;</span> country.<span class="title function_">match</span>(regExp))</span><br><span class="line">    .<span class="title function_">map</span>(<span class="function">(<span class="params">[code, country]</span>) =&gt;</span> [</span><br><span class="line">      code,</span><br><span class="line">      country.<span class="title function_">replace</span>(regExp, <span class="string">`&lt;strong&gt;<span class="subst">$&#123;country.match(regExp)&#125;</span>&lt;/strong&gt;`</span>),</span><br><span class="line">    ]);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setState</span>(&#123; <span class="attr">countryCode</span>: newCountryCode &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>이전 코드에서는 findCountry 함수가 하는 역할을 setState 함수내에 있어 이를 역할에 맞게 구분해주었다.</p>
</li>
<li><p>또한, 배열 디스트럭처링을 사용하여 가독성을 높였다.</p>
</li>
</ul>
<blockquote>
<p>([, country]) 처럼 매개변수로 배열 디스트럭처링 사용할 때, 앞의 매개변수를 사용하지 않는다면, 빈칸으로 두어도 된다.</p>
</blockquote>
<h2 id="3-함수의-가독성을-높이자"><a href="#3-함수의-가독성을-높이자" class="headerlink" title="3. 함수의 가독성을 높이자."></a>3. 함수의 가독성을 높이자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">selectCountry</span> = (<span class="params">target</span>) =&gt; &#123;</span><br><span class="line">  $toggleButtonSpan.<span class="property">innerHTML</span> = target.<span class="property">firstElementChild</span>.<span class="property">innerHTML</span>;</span><br><span class="line">  $toggleButtonSpan.<span class="property">classList</span>.<span class="title function_">add</span>(<span class="string">&quot;country&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>selectCountry 함수의 매개변수가 이벤트가 발생한 요소를 전달해주도록 코드를 작성하여 더욱 직관적으로 작성했다.</li>
</ul>
<h1 id="Carousel-리팩터링-중-느낀점"><a href="#Carousel-리팩터링-중-느낀점" class="headerlink" title="Carousel 리팩터링 중 느낀점"></a>Carousel 리팩터링 중 느낀점</h1><h2 id="1-state로-관리해야하는-데이터와-그렇지-않은-데이터"><a href="#1-state로-관리해야하는-데이터와-그렇지-않은-데이터" class="headerlink" title="1. state로 관리해야하는 데이터와 그렇지 않은 데이터"></a>1. state로 관리해야하는 데이터와 그렇지 않은 데이터</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> state = &#123;</span><br><span class="line">  <span class="attr">currentSlide</span>: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> isTransitioned = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">DURATION</span> = <span class="number">500</span>;</span><br><span class="line"><span class="keyword">const</span> newImages = [images[images.<span class="property">length</span> - <span class="number">1</span>], ...images, images[<span class="number">0</span>]];</span><br></pre></td></tr></table></figure>

<ul>
<li>이번 과제를 하면서 어떤 데이터를 state로 관리해야할지 결정하는 것이 힘들었다. 짝 코딩을 하면서 나름 이유와 컨벤션을 정하였다.</li>
</ul>
<h3 id="state로-관리해야하는-데이터"><a href="#state로-관리해야하는-데이터" class="headerlink" title="state로 관리해야하는 데이터"></a>state로 관리해야하는 데이터</h3><ol>
<li><p>사용자의 액션에 의해서 변경되는 데이터</p>
</li>
<li><p>실제 화면의 렌더링에 영향을 끼치는 데이터</p>
</li>
<li><p>서버에 저장해야할 필요가 있는 데이터</p>
</li>
</ol>
<p>위 3가지 항목에 해당된다면 해당 데이터를 state로 관리하는 것이 옳다고 판단하였다.</p>
<p>그에 대한 근거는 다음 예시를 통해 알아보자.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">completeTransition</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setState</span>(&#123; <span class="attr">isTransitioned</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">completeTransition</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  isTransitioned = <span class="literal">true</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li>모델안의 completeTransition 함수는 state 데이터를 수정하고 렌더링을 해주는 코드였다. 하지만 위 데이터는 화면에 보여지는 데이터도 아니고, 사용자의 액션에 의해 직접적으로 변경되었다기 보다는 사용자가 액션을 발생 시켰을 때 개발자가 눈속임으로 화면을 보여주기 위함이기 때문이다.</li>
</ul>
<p>즉, completeTransition 데이터를 사용자에게 직접적으로 보여주지도 않고 서버에 전송해야할 데이터도 아니고 실제 화면에 렌더링에 영향을 끼치는 데이터가 아니기 때문에 state로 관리 하지 않았다.</p>
<h2 id="2-Model과-Controller-패턴의-사용"><a href="#2-Model과-Controller-패턴의-사용" class="headerlink" title="2. Model과 Controller 패턴의 사용"></a>2. Model과 Controller 패턴의 사용</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">carousel</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> carouselSlider = (<span class="function">() =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">      ...</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      init,</span><br><span class="line">      setStyle,</span><br><span class="line">      prev,</span><br><span class="line">      next,</span><br><span class="line">      completeTransition,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, carouselSlider.<span class="property">init</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">carousel</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.carousel&#x27;</span>), [images...])</span><br></pre></td></tr></table></figure>

<ul>
<li>addEventListener가 사용할 수 있는 데이터는 Model에서 반환해준 함수만 사용할 수 있다. 이러한 구조를 만듦으로서 사용자는 자신이 어떤 함수를 사용해야하는지 명시적으로 알 수 있고 다른 함수에 대한 고민을 하지 않아 코드의 이해도를 높일 수 있다.</li>
</ul>
<h2 id="3-DOMContentLoaded와-load-이벤트-핸들러"><a href="#3-DOMContentLoaded와-load-이벤트-핸들러" class="headerlink" title="3. DOMContentLoaded와 load 이벤트 핸들러"></a>3. DOMContentLoaded와 load 이벤트 핸들러</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, carouselSlider.<span class="property">init</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, carouselSlider.<span class="property">setStyle</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>이미지가 로드된 다음에 이미지의 width 값과 속성을을 설정해줘야지만 제대로 동작하므로 위와 같이 로드되는 시점에 따라 코드를 구분하였다.</p>
</li>
<li><p>또한 요구사항에서 이미지가 로드되어 carousel의 width가 정해진 후 opacity를 1로 바꿔줘야 하므로 로드 시점에 따라 이벤트 핸들러를 구분하는 것이 옳다.</p>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/20/PairProgramming/level%201/toaster,%20autocomplete,%20carousel%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/09/19/PairProgramming/level%201/darkmode,%20modal,%20stopwatch%20Tip/"
                            aria-label=": darkmode, modal, stopwatch Tip"
                        >
                            darkmode, modal, stopwatch Tip
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-09-19T19:07:25+09:00">
	
		    2022/09/19
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Pair-Programming/">Pair Programming</a>, <a class="category-link" href="/categories/Pair-Programming/level-1/">level 1</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="darkMode-리팩터링-중-느낀점"><a href="#darkMode-리팩터링-중-느낀점" class="headerlink" title="darkMode 리팩터링 중 느낀점"></a>darkMode 리팩터링 중 느낀점</h1><h2 id="1-setDarkMode-함수의-응집도를-높이고-관심사를-구분하자"><a href="#1-setDarkMode-함수의-응집도를-높이고-관심사를-구분하자" class="headerlink" title="1. setDarkMode 함수의 응집도를 높이고 관심사를 구분하자."></a>1. setDarkMode 함수의 응집도를 높이고 관심사를 구분하자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> setDarkMode = (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> $body = <span class="variable language_">document</span>.<span class="property">body</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> userTheme = <span class="variable language_">window</span>.<span class="title function_">matchMedia</span>(<span class="string">&quot;(prefers-color-scheme: dark)&quot;</span>).<span class="property">matches</span>;</span><br><span class="line">  <span class="keyword">const</span> transitionDuration =</span><br><span class="line">    +<span class="title function_">getComputedStyle</span>(<span class="variable language_">document</span>.<span class="property">documentElement</span>).<span class="title function_">getPropertyValue</span>(</span><br><span class="line">      <span class="string">&quot;--transition-duration&quot;</span></span><br><span class="line">    ) * <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">getCurrentMode</span> = (<span class="params"></span>) =&gt; <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;isDark&quot;</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">toggleMode</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    $body.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&quot;dark&quot;</span>, <span class="title function_">getCurrentMode</span>());</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">setCurrentMode</span> = (<span class="params">selectedMode</span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&quot;isDark&quot;</span>, selectedMode);</span><br><span class="line">    <span class="title function_">toggleMode</span>();</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="title function_">toggle</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="title function_">setCurrentMode</span>(!<span class="title function_">getCurrentMode</span>());</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;isDark&quot;</span>) === <span class="literal">null</span></span><br><span class="line">        ? <span class="title function_">setCurrentMode</span>(userTheme)</span><br><span class="line">        : <span class="title function_">toggleMode</span>();</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">preventBlink</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        $body.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&quot;hide&quot;</span>);</span><br><span class="line">      &#125;, transitionDuration);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span></span><br><span class="line">  .<span class="title function_">querySelector</span>(<span class="string">&quot;.toggle-button&quot;</span>)</span><br><span class="line">  .<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, setDarkMode.<span class="property">toggle</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, setDarkMode.<span class="property">init</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, setDarkMode.<span class="property">preventBlink</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>setDarkMode 함수와 관련된 변수와 함수를 한곳에 모아 응집도를 높이고 즉시실행함수로 감싸고 클로저를 구현하였다.</p>
</li>
<li><p>즉시실행함수의 반환값인 toggle, init, preventBlink 함수는 자유변수를 참조하고 외부함수보다 생명주기가 긴 클로저이다.</p>
</li>
<li><p>preventBlink 함수와 init 함수는 결국 렌더링과 관련된 함수여서 하나로 합칠까 생각했지만, 그 경우, 이미지 파일이 많은 프로그램인 경우 이미지가 로드되기 전에 darkMode를 동작이 제대로 되지 않을 수 있다고 판단하여 다른 함수로 구분하였다.</p>
</li>
<li><p>addEventListener는 가능한 한줄로 쓰자는 팀원과의 컨벤션을 지키기 위해 위와같이 작성하였고 이벤트 핸들러가 많아지게 되면서 복잡해지더라도 한줄로 있으면 가독성을 높일 수 있을 것이라 생각했다.</p>
</li>
</ul>
<h1 id="popupModal-리팩터링-중-느낀점"><a href="#popupModal-리팩터링-중-느낀점" class="headerlink" title="popupModal 리팩터링 중 느낀점"></a>popupModal 리팩터링 중 느낀점</h1><h2 id="1-변수를-사용한-이유"><a href="#1-변수를-사용한-이유" class="headerlink" title="1. 변수를 사용한 이유"></a>1. 변수를 사용한 이유</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> $modalContainer = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal-container&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> $modal = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.modal&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> $popupMessage = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;.popup-message&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>위의 document.querySelector() DOM API는 처음에 한번만 요소를 가져와 변수에 할당해주면 된다. 굳이 이벤트 핸들러 함수 내부에 적어서 함수가 호출될 때마다 DOM API까지 같이 호출될 필요가 없으므로 변수에 값을 저장해서 사용하였다.</li>
</ul>
<h2 id="2-누군가가-코드를-읽을-때-한번-더-생각하게-하지-않도록-작성하자"><a href="#2-누군가가-코드를-읽을-때-한번-더-생각하게-하지-않도록-작성하자" class="headerlink" title="2. 누군가가 코드를 읽을 때, 한번 더 생각하게 하지 않도록 작성하자."></a>2. 누군가가 코드를 읽을 때, 한번 더 생각하게 하지 않도록 작성하자.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1번</span></span><br><span class="line">    <span class="title function_">toggle</span>(<span class="params">method</span>) &#123;</span><br><span class="line">      $modal.<span class="property">classList</span>[method](<span class="string">&#x27;is-open&#x27;</span>);</span><br><span class="line">      $modalContainer.<span class="property">classList</span>[method](<span class="string">&#x27;background-gray&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2번</span></span><br><span class="line">    <span class="title function_">toggle</span>(<span class="params"></span>) &#123;</span><br><span class="line">      $modal.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;is-open&#x27;</span>);</span><br><span class="line">      $modalContainer.<span class="property">classList</span>.<span class="title function_">toggle</span>(<span class="string">&#x27;background-gray&#x27;</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="title function_">remove</span>(<span class="params"></span>) &#123;</span><br><span class="line">      $modal.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;is-open&#x27;</span>);</span><br><span class="line">      $modalContainer.<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;background-gray&#x27;</span>);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure>

<ul>
<li>처음에 중복을 줄이기 위해 1번으로 구현했었는데, 오히려 직접 사용해보니 2번의 경우가 가독성이 더 낫다고 판단했다. 그 이유는 이벤트 핸들러에서 toggle(‘remove’) 이런식으로 사용하는 것보다 toggle, remove를 사용하는 것이 더 깔끔하기 때문이다.</li>
</ul>
<h2 id="3-이벤트-핸들러-축약표현-알아두기"><a href="#3-이벤트-핸들러-축약표현-알아두기" class="headerlink" title="3. 이벤트 핸들러 축약표현 알아두기"></a>3. 이벤트 핸들러 축약표현 알아두기</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params">e</span>) &#123;</span><br><span class="line">  e.<span class="title function_">preventDefault</span>();</span><br><span class="line">  $popupMessage.<span class="property">textContent</span> = <span class="string">`from popup : <span class="subst">$&#123;e.target.firstElementChild.value&#125;</span>`</span>;</span><br><span class="line">  popupModal.<span class="title function_">toggle</span>(<span class="string">&#x27;remove&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.popup-form&#x27;</span>).<span class="title function_">addEventListener</span>(<span class="string">&#x27;submit&#x27;</span>, render);</span><br></pre></td></tr></table></figure>

<ul>
<li>render 함수를 이벤트 핸들러로 등록할 때, event 객체를 받아서 e.preventDefault() 메서드를 실행하는데, 이벤트 핸들러에서는 인수를 전달해주지 않아도 축약표현으로 인식하여 event 객체를 해당 위치에 전달해준다.</li>
</ul>
<h1 id="stopWatch-리팩터링-중-느낀점"><a href="#stopWatch-리팩터링-중-느낀점" class="headerlink" title="stopWatch 리팩터링 중 느낀점"></a>stopWatch 리팩터링 중 느낀점</h1><h2 id="1-배열-디스트럭처링-사용"><a href="#1-배열-디스트럭처링-사용" class="headerlink" title="1. 배열 디스트럭처링 사용"></a>1. 배열 디스트럭처링 사용</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [$leftButton, $rightButton] = [...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&quot;.control&quot;</span>)];</span><br></pre></td></tr></table></figure>

<ul>
<li>leftButton, rightButton &#x2F; laps, title은 동일한 클래스를 가져 querySelectAll로 불러와서 인덱스 값으로 접근하는 것이 아닌 배열 디스트럭처링 할당으로 식별자를 할당해주었습니다.</li>
</ul>
<h2 id="2-버튼-요소의-textContent-값으로-조건문을-구분하는-것은-좋지-않다"><a href="#2-버튼-요소의-textContent-값으로-조건문을-구분하는-것은-좋지-않다" class="headerlink" title="2. 버튼 요소의 textContent 값으로 조건문을 구분하는 것은 좋지 않다."></a>2. 버튼 요소의 textContent 값으로 조건문을 구분하는 것은 좋지 않다.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1번</span></span><br><span class="line"><span class="keyword">if</span> ($leftButton.<span class="property">textContent</span> === <span class="string">&quot;Stop&quot;</span>) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2번</span></span><br><span class="line"><span class="keyword">let</span> state = &#123;</span><br><span class="line">  <span class="attr">isStarted</span>:<span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (state.<span class="property">isStarted</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>1번 처럼 textContent로 조건문을 사용하게되면 나중에 textContent를 수정하게되면 유지보수가 어려워지므로 상태로서 관리하는 것을 추천한다.</li>
</ul>
<h2 id="3-함수는-각자의-역할에-맞는-코드를-포함하도록-작성해야한다"><a href="#3-함수는-각자의-역할에-맞는-코드를-포함하도록-작성해야한다" class="headerlink" title="3. 함수는 각자의 역할에 맞는 코드를 포함하도록 작성해야한다."></a>3. 함수는 각자의 역할에 맞는 코드를 포함하도록 작성해야한다.</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">render</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (state.<span class="property">isStarted</span>) &#123;</span><br><span class="line">    $leftButton.<span class="property">textContent</span> = <span class="string">&quot;Stop&quot;</span>;</span><br><span class="line">    $rightButton.<span class="property">textContent</span> = <span class="string">&quot;Lap&quot;</span>;</span><br><span class="line">    $rightButton.<span class="title function_">removeAttribute</span>(<span class="string">&quot;disabled&quot;</span>);</span><br><span class="line"></span><br><span class="line">    $laps.<span class="property">innerHTML</span> = <span class="string">`Laps</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;state.laps.map((_, index) =&gt; <span class="string">`&lt;div&gt;<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>&lt;/div&gt;`</span>).join(<span class="string">&quot;&quot;</span>)&#125;</span></span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line">    $time.<span class="property">innerHTML</span> = <span class="string">`Time</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;state.laps.map((lap) =&gt; <span class="string">`&lt;div&gt;<span class="subst">$&#123;lap&#125;</span>&lt;/div&gt;`</span>).join(<span class="string">&quot;&quot;</span>)&#125;</span></span></span><br><span class="line"><span class="string">      `</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    $leftButton.<span class="property">textContent</span> = <span class="string">&quot;Start&quot;</span>;</span><br><span class="line">    $rightButton.<span class="property">textContent</span> = <span class="string">&quot;Reset&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">setState</span> = (<span class="params">newState</span>) =&gt; &#123;</span><br><span class="line">  state = &#123; ...state, ...newState &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">toggleStarted</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">setState</span>(&#123; <span class="attr">isStarted</span>: !state.<span class="property">isStarted</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="title function_">updateTime</span>();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">addLap</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> newLap = $display.<span class="property">textContent</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">setState</span>(&#123; <span class="attr">laps</span>: [...state.<span class="property">laps</span>, newLap] &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>render 함수는 leftButton, rightButton을 클릭했을 때, 화면에 글자가 바꾸는 일을 해준다.</p>
</li>
<li><p>setState 함수는 데이터를 변경하고 그 데이터를 가지고 화면에 render 하는 함수를 호출하는 역할을 한다.</p>
</li>
<li><p>toggleStarted 함수는 isStarted 데이터를 변경시키고 시간을 갱신하는 역할을 한다.</p>
</li>
<li><p>addLap 함수는 $display의 textContent값으로 laps 데이터를 변경시키는 역할을 한다.</p>
</li>
</ul>
<blockquote>
<p>스톱워치에 아직 리팩터링 중인데, 버튼은 2개인데 가정해야할 상황이 4가지여서 어떻게 짜면 좋을지 고민중이다…</p>
</blockquote>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/09/19/PairProgramming/level%201/darkmode,%20modal,%20stopwatch%20Tip/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/archives/page/9/"
                aria-label="최근 포스트"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>최근 포스트</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/archives/page/11/"
                aria-label="이전 포스트"
            >
              <span>이전 포스트</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 10 of 14</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 loco9939. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">loco9939</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-wcqoifde3xwnijjx9xd2irfrrksglozwqpgaqfvxoft22e4znrk7db1xxnsx.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
