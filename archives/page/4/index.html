
<!DOCTYPE html>
<html lang="ko">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Loco&#39;s Dev Blog">
    <title>아카이브 - Loco&#39;s Dev Blog</title>
    <meta name="author" content="loco9939">
    
        <meta name="keywords" content="loco9939,javascript,">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Loco&#39;s Dev Blog">
<meta property="og:url" content="https://loco9939.github.io/archives/page/4/index.html">
<meta property="og:site_name" content="Loco&#39;s Dev Blog">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="loco9939">
<meta property="article:tag" content="loco9939">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-alaac2o0p8lb5n7mx8aazw1dzhwcsltexgjtf9twurzytkujqiefoq1soijy.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Loco&#39;s Dev Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="검색"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/14/React/Portal-%ED%8F%AC%ED%84%B8/"
                            aria-label=": Portal(포털)"
                        >
                            Portal(포털)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-14T19:38:01+09:00">
	
		    2022/11/14
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/React/">React</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-Portal이란"><a href="#📌-Portal이란" class="headerlink" title="📌 Portal이란?"></a>📌 Portal이란?</h1><p>포털을 사용하면 애플리케이션 영역을 벗어나 특정 위치에 컴포넌트를 렌더링할 수 있다. 즉, 지금껏 root 컨테이너에만 렌더링을 해왔다면 포털을 사용하여 <red>root 컨테이너 외부에다가도 컴포넌트를 렌더링할 수 있게된다.</red></p>
<blockquote>
<p>포털을 통해 렌더링된 컴포넌트는 DOM 트리 위치와 상관없이 React 컴포넌트 트리에 포함되기 때문이다.</p>
</blockquote>
<h2 id="🔨-사용방법"><a href="#🔨-사용방법" class="headerlink" title="🔨 사용방법"></a>🔨 사용방법</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">ReactDOM</span>.<span class="title function_">createPortal</span>(child, container);</span><br></pre></td></tr></table></figure>

<ul>
<li>child는 렌더링할 수 있는 자식</li>
<li>container는 DOM 요소이다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">ReactDOM</span>.<span class="title function_">createPortal</span>(</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">children</span>,</span><br><span class="line">        domNode</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>위 경우 React는 새로운 div를 생성하지 않고 domNode 안에 자식을 렌더링한다.</li>
<li><strong>domNode는 DOM 내부의 어디에 있던지 간에 상관없다.</strong></li>
</ul>
<blockquote>
<p>시각적으로 자식을 튀어나오도록 보여야하는 다이얼로그, 호버카드, 툴팁에 사용된다. 이 때, <red>키보드 포커스 관리와 접근성을 고려해줘야한다.</red></p>
</blockquote>
<h2 id="🌈-다이얼로그-예시"><a href="#🌈-다이얼로그-예시" class="headerlink" title="🌈 다이얼로그 예시"></a>🌈 다이얼로그 예시</h2><h3 id="다이얼로그-특징"><a href="#다이얼로그-특징" class="headerlink" title="다이얼로그 특징"></a>다이얼로그 특징</h3><ol>
<li>다이얼로그가 띄워진 상태면 그 아래 위치한 내용은 비활성화 상태여야한다.</li>
<li>다이얼로그 바깥으로 초점이동되면 안된다.</li>
<li>dialog 역할(role)을 부여해야한다.</li>
<li>모달 기능일 경우 <code>aria-modal=true</code> 이여야한다.</li>
<li>다이얼로그 제목은 <code>aria-label</code>, <code>aria-labelledby</code>로 설정한다.</li>
</ol>
<h3 id="1-부모-컴포넌트"><a href="#1-부모-컴포넌트" class="headerlink" title="1. 부모 컴포넌트"></a>1. 부모 컴포넌트</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">DemoDialog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  #opennerRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">show</span>: <span class="literal">false</span>,</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleShowDialog = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">show</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleHideDialog = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.box&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">ref</span>=<span class="string">&#123;this.#opennerRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&#123;styles.openDialogButton&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">aria-haspopup</span>=<span class="string">&quot;dialog&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">aria-label</span>=<span class="string">&quot;모달 다이얼로그 열기&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">title</span>=<span class="string">&quot;모달 다이얼로그 열기&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">onClick</span>=<span class="string">&#123;this.handleShowDialog&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          모달열기</span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;this.state.show &amp;&amp; (</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Dialog</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">modal</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">onClose</span>=<span class="string">&#123;this.handleHideDialog&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">            <span class="attr">openner</span>=<span class="string">&#123;this.#opennerRef.current&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          &gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Dialog.Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">h3</span>&gt;</span>불금 다이얼로그<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Dialog.Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;<span class="name">Dialog.Body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">              <span class="tag">&lt;<span class="name">ul</span>&gt;</span>...<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Dialog.Body</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;/<span class="name">Dialog</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        )&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>부모 컴포넌트에서는 버튼 클릭이벤트로 모달을 조건부 렌더링해주고 있다.</li>
</ul>
<h3 id="2-모달-컴포넌트-자식"><a href="#2-모달-컴포넌트-자식" class="headerlink" title="2. 모달 컴포넌트(자식)"></a>2. 모달 컴포넌트(자식)</h3><p>root 요소가 아닌 곳에 자식 컴포넌트를 그려주기 위해서 <strong>public 폴더의 index.html에 다음과 같이 div 요소를 추가해줘야한다.</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// public/index.html</span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;root&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 다이얼로그를 렌더링 할 컨테이너 요소 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;dialogZone&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">boyd</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dialog.jsx</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="attr">documentElement</span>: htmlElement &#125; = <span class="variable language_">document</span>;</span><br><span class="line"><span class="keyword">const</span> reactDomContainer = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;root&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Dialog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  #containerRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">  handleClose = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">onClose</span>?.();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">openner</span>.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; modal = <span class="literal">false</span> &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">createPortal</span>(</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">article</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">ref</span>=<span class="string">&#123;this.#containerRef&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">tabIndex</span>=<span class="string">&#123;-1&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">role</span>=<span class="string">&quot;dialog&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">aria-modal</span>=<span class="string">&#123;modal&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">          <span class="attr">className</span>=<span class="string">&#123;styles.container&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        &gt;</span></span></span><br><span class="line"><span class="language-xml">          &#123;this.props.children&#125;</span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">Dialog.Footer</span> <span class="attr">onClose</span>=<span class="string">&#123;this.handleClose&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">article</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;modal &amp;&amp; <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.dim&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;this.handleClose&#125;</span> /&gt;</span>&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/&gt;</span></span>,</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;dialogZone&quot;</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>우선 해당 모달 컴포넌트를 그릴 domNode를 htmlElement로 지정해주었다.</li>
<li>컨테이너 DOM 요소 가져오기 위해서 ref를 생성해주었다.</li>
<li><code>createPortal()</code>에 렌더링할 자식 컴포넌트와 자식 컴포넌트를 렌더링할 컨테이너를 전달하였다.</li>
<li>모달이 켜져있을 때, <code>Dialog.footer</code> 자식 요소에게 onClose를 props로 전달하였다.</li>
</ul>
<h3 id="3-자식-컴포넌트-접근성-고려"><a href="#3-자식-컴포넌트-접근성-고려" class="headerlink" title="3. 자식 컴포넌트 접근성 고려"></a>3. 자식 컴포넌트 접근성 고려</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Dialog</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">#tabbableElements = [];</span><br><span class="line"></span><br><span class="line">  #<span class="title function_">bindEscKeyEvents</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">handler</span> = (<span class="params">e</span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">key</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(<span class="string">&quot;escape&quot;</span>)) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;pressed esc key&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">handleClose</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;keyup&quot;</span>, handler);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// cleanup function</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">document</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;keyup&quot;</span>, handler);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  #unbindEscKeyEvents = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#containerRef.<span class="property">current</span>.<span class="title function_">focus</span>();</span><br><span class="line">    <span class="variable language_">this</span>.#tabbableElements = <span class="title function_">getTabbableElements</span>(<span class="variable language_">this</span>.#containerRef.<span class="property">current</span>);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">settingKeyboardTrap</span>();</span><br><span class="line"></span><br><span class="line">    htmlElement.<span class="property">style</span>.<span class="property">overflowY</span> = <span class="string">&quot;hidden&quot;</span>;</span><br><span class="line">    reactDomContainer.<span class="title function_">setAttribute</span>(<span class="string">&quot;aria-hidden&quot;</span>, <span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.#unbindEscKeyEvents = <span class="variable language_">this</span>.#<span class="title function_">bindEscKeyEvents</span>();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    htmlElement.<span class="property">style</span>.<span class="property">overflowY</span> = <span class="string">&quot;visible&quot;</span>;</span><br><span class="line">    reactDomContainer.<span class="title function_">setAttribute</span>(<span class="string">&quot;aria-hidden&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">this</span>.#unbindEscKeyEvents?.();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">settingKeyboardTrap</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> tabbles = <span class="variable language_">this</span>.#tabbableElements;</span><br><span class="line">    <span class="keyword">const</span> firstElement = tabbles[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">const</span> lastElement = tabbles[tabbles.<span class="property">length</span> - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    firstElement.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (e.<span class="property">shiftKey</span> &amp;&amp; e.<span class="property">key</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(<span class="string">&quot;tab&quot;</span>)) &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">        lastElement.<span class="title function_">focus</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    lastElement.<span class="title function_">addEventListener</span>(<span class="string">&quot;keydown&quot;</span>, <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (!e.<span class="property">shiftKey</span> &amp;&amp; e.<span class="property">key</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">includes</span>(<span class="string">&quot;tab&quot;</span>)) &#123;</span><br><span class="line">        e.<span class="title function_">preventDefault</span>();</span><br><span class="line">        firstElement.<span class="title function_">focus</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>key 이벤트를 등록해주고 제거해줄 때, <red>클로저를 사용하여 이벤트 핸들러를 동일한 참조값으로 일치</red>시켜주면 편하다.<ul>
<li><red>keydown 이벤트</red>를 사용해야지만 <code>e.preventDefault()</code>로 <strong>기본동작을 막을 수 있다.</strong></li>
</ul>
</li>
<li>모달 컴포넌트가 생성되었을 때, 해당 컨테이너(article)에 초점을 가게하기 위해 ref를 전달해준 것이다.</li>
<li><code>htmlElement.style.overflowY = &quot;hidden&quot;</code>로 모달 컴포넌트가 띄워져있을 때, 다른 요소는 스크롤이 비활성화시켜주었다.</li>
<li>모달이 켜져있으면 <strong>root 컨테이너는 aria-hidden을 스크린 리더기에서도 모달만 읽히도록 해줘야한다.</strong></li>
<li>컴포넌트가 소멸되기 직전에 <red>등록했던 key 이벤트를 제거해줘야하는 것을 잊지 말자.</red> (고려하지 않는다면 성능에 문제가 생길 것이다.)</li>
</ul>
<h3 id="4-모달-slot-구분"><a href="#4-모달-slot-구분" class="headerlink" title="4. 모달 slot 구분"></a>4. 모달 slot 구분</h3><p>어떤 컴포넌트들은 어떤 자식 요소가 들어올지 예상할 수 없는 경우가 있다. 이럴 경우 children prop을 사용하여 자식 요소를 출력에 그대로 전달하는 것이 좋다.</p>
<p><strong>합성(composition)을 사용하여</strong> <red>컴포넌트 간에 코드를 재사용하도록 하자.</red></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Dialog</span>.<span class="property">Header</span> = <span class="keyword">function</span> <span class="title function_">DialogHeader</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">header</span> <span class="attr">className</span>=<span class="string">&#123;styles.header&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Dialog</span>.<span class="property">Header</span>.<span class="property">defaultProps</span> = &#123;</span><br><span class="line">  <span class="attr">children</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>React 포털로 연 다이얼로그(with 모달)<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Dialog</span>.<span class="property">Body</span> = <span class="keyword">function</span> <span class="title function_">DialogBody</span>(<span class="params">&#123; children &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#123;styles.body&#125;</span>&gt;</span>&#123;children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Dialog</span>.<span class="property">Footer</span> = <span class="keyword">function</span> <span class="title function_">DialogFooter</span>(<span class="params">&#123; children, onClose &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">className</span>=<span class="string">&#123;styles.footer&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">button</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">type</span>=<span class="string">&quot;button&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">className</span>=<span class="string">&#123;styles.closeButton&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">aria-label</span>=<span class="string">&quot;모달 다이얼로그 닫기&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">title</span>=<span class="string">&quot;모달 다이얼로그 닫기&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">onClick</span>=<span class="string">&#123;onClose&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      &gt;</span></span></span><br><span class="line"><span class="language-xml">        모달닫기</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/14/React/Portal-%ED%8F%AC%ED%84%B8/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/12/React/DOM-%EC%BB%A8%ED%8A%B8%EB%A1%A4-ref/"
                            aria-label=": DOM 컨트롤(ref)"
                        >
                            DOM 컨트롤(ref)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-12T16:59:38+09:00">
	
		    2022/11/12
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/React/">React</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="🕹-리액트-DOM-컨트롤"><a href="#🕹-리액트-DOM-컨트롤" class="headerlink" title="🕹 리액트 DOM 컨트롤"></a>🕹 리액트 DOM 컨트롤</h1><p>리액트 앱은 대부분 리액트에 의해 컨트롤되지만 <strong>예외인 상황이 있다.</strong> 리액트는 virtualDOM을 가지고 동작하기 때문에 RealDOM 요소에 접근하거나 조작해야할 경우 이는 <strong>리액트가 할 수 없는 일이다.</strong></p>
<p>이러한 일을 <red>리액트 사이드 이펙트</red>라고 부른다. 흔히들 사이드 이펙트를 부작용이라고 오인하는 경우가 있지만 여기서는 순수하지 않거나 역할에 맞는 일을 하지 않는 경우를 말한다.</p>
<p>사이드 이펙트를 처리하기 위해서는 다음과 같은 React API를 사용하여야한다.</p>
<ul>
<li>ref(참조 설정)<ul>
<li><strong>값이 변경되어도 리액트가 재렌더링하지 않는다.</strong></li>
</ul>
</li>
<li>callback ref(ref 속성에 연결된 함수)</li>
<li>React.createRef(참조 객체 생성)</li>
<li>React.forwardRef(참조 객체 전달)<ul>
<li>범용적으로 누구나 사용할 수 있는 컴포넌트를 만들기 위해서 꼭 필요하다.</li>
<li>외부 컴포넌트가 내부 컴포넌트를 전달받아서 컴포넌트를 내보낸다.</li>
<li>domRef를 통해서 전달할 수도 있다.</li>
</ul>
</li>
</ul>
<h2 id="💭-예시"><a href="#💭-예시" class="headerlink" title="💭 예시"></a>💭 예시</h2><p>컴포넌트 생성 시점에 이벤트를 구독한 경우, 컴포넌트 제거 시점에 구독한 이벤트를 취소해야한다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">TiltCard</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="comment">// DOM 요소 참조를 목적으로 Ref를 생성합니다.</span></span><br><span class="line">  tiltRef = <span class="title class_">React</span>.<span class="title function_">createRef</span>(<span class="literal">null</span>); <span class="comment">// &#123; current:null &#125;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// DOM 요소 참조를 위한 목적의 클래스 인스턴스 멤버</span></span><br><span class="line">  #cardDomElement = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 최초 마운트 시점 이후 처리할 로직을 작성합니다.</span></span><br><span class="line">  <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#cardDomElement = <span class="variable language_">this</span>.<span class="property">tiltRef</span>.<span class="property">current</span>;</span><br><span class="line">    <span class="title class_">VanillaTilt</span>.<span class="title function_">init</span>(<span class="variable language_">this</span>.#cardDomElement);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 이벤트 구독</span></span><br><span class="line">    <span class="variable language_">this</span>.#cardDomElement.<span class="title function_">addEventListener</span>(</span><br><span class="line">      <span class="string">&quot;tiltChange&quot;</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">handleChangeTilt</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 마운트 해제 직전에 처리할 로직을 작성합니다.</span></span><br><span class="line">  <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#cardDomElement.<span class="property">vanillaTilt</span>.<span class="title function_">destroy</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 이벤트 구독 해지</span></span><br><span class="line">    <span class="variable language_">this</span>.#cardDomElement.<span class="title function_">removeEventListener</span>(</span><br><span class="line">      <span class="string">&quot;tiltChange&quot;</span>,</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">handleChangeTilt</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; children &#125; = <span class="variable language_">this</span>.<span class="property">props</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="comment">// 생성된 Ref를 참조하도록 설정합니다.</span></span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ref</span>=<span class="string">&#123;this.tiltRef&#125;</span> <span class="attr">className</span>=<span class="string">&quot;tiltCard&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        &#123;children&#125;</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>tiltRef에 <strong>DOM 요소를 저장하기 위해 ref를 생성하였다.</strong></li>
<li>tiltRef DOM 요소 얻기 위해 <strong>“current” 프로퍼티</strong>에 접근하였다.</li>
<li>tiltRef DOM 요소에 컴포넌트 생성주기에 맞게 이벤트를 등록하고 제거해주었고 ref를 참조하도록 설정해주었다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/12/React/DOM-%EC%BB%A8%ED%8A%B8%EB%A1%A4-ref/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/11/CS/%F0%9F%A5%81-CORS/"
                            aria-label=": 🥁 CORS"
                        >
                            🥁 CORS
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-11T21:00:28+09:00">
	
		    2022/11/11
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/CS/">CS</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-CORS란"><a href="#📌-CORS란" class="headerlink" title="📌 CORS란?"></a>📌 CORS란?</h1><p>교차 출처 리소스 공유(Cross-Origin Resource Sharing)는 추가 HTTP Header를 사용하여 한 출처에서 실행 중인 애플리케이션이 다른 출처의 선택한 자원에 접근할 수 있는 권한을 부여하도록 <red>브라우저에게 알려준다.</red></p>
<p><strong>웹 애플리케이션은 리소스가 자신의 출처(도메인, 프로토콜, 포트)와 다를 때, 교차 출처 HTTP 요청을 실행한다.</strong></p>
<p>ex) <code>https://domain-a.com</code>의 프론트 엔드 JavaScript 코드가 XMLHttpRequest를 사용하여 <code>https://domain-b.com/data.json</code>을 요청하는 경우 보안 상의 이유로 <red>브라우저는 HTTP 요청을 제한한다.</red></p>
<ul>
<li>CORS 체제는 브라우저와 서버 간의 안전한 교차 출처 요청 및 데이터 전송을 지원한다.</li>
<li>CORS 표준에 맞춘다는 것은 서버에서도 새로운 요청과 응답 Header를 처리해야한다.</li>
</ul>
<h2 id="🤿-DeepDive"><a href="#🤿-DeepDive" class="headerlink" title="🤿 DeepDive"></a>🤿 DeepDive</h2><p>CORS 표준은 웹 브라우저에서 허용된 출처를 서버에서 새로운 HTTP Header에 추가함으로써 동작한다.</p>
<h3 id="📮-Simple-Request"><a href="#📮-Simple-Request" class="headerlink" title="📮 Simple Request"></a>📮 Simple Request</h3><p>HTTP 요청 메서드가 GET, POST 일 때 사용한다.</p>
<ol>
<li><p>다른 출처끼리 요청을 보낼 때, 요청에 Origin이라는 Header를 추가한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://loco9939.com:5000</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>Origin은 요청하는 쪽의 Scheme, 도메인, 포트가 담겨있다.</strong></li>
<li>scheme : https</li>
<li>도메인 : loco9939.com</li>
<li>포트 : :5000</li>
</ul>
</li>
<li><p>요청 받은 서버는 응답 Header에 지정된 ACAO(Access Control Allow Origin) 정보를 실어서 보낸다.</p>
</li>
<li><p>브라우저가 ACAO 정보가 담긴 응답과 요청의 Origin을 비교하여 동일하면 허락한다.</p>
</li>
</ol>
<h3 id="✈️-Preflight"><a href="#✈️-Preflight" class="headerlink" title="✈️ Preflight"></a>✈️ Preflight</h3><p>브라우저가 사전요청을 먼저 보낸 후 서버의 응답을 보고 안전한지 확인한 후 본 요청을 보내는 방식이다. 본 요청은 Simple Request 방식과 동일하다.</p>
<h2 id="🌈-CORS-오류-해결-방법"><a href="#🌈-CORS-오류-해결-방법" class="headerlink" title="🌈 CORS 오류 해결 방법"></a>🌈 CORS 오류 해결 방법</h2><h3 id="🔨-서버-측"><a href="#🔨-서버-측" class="headerlink" title="🔨 서버 측"></a>🔨 서버 측</h3><ul>
<li>ACAO(Access Control Allow Origin) 설정하기<ul>
<li>구체적인 출처 명시하기</li>
<li>Credentials: <strong>include 옵션 사용한 경우 * 사용한 경우 CORS 에러발생</strong></li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">&quot;http&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> httpServer = http.<span class="title function_">createServer</span>(<span class="keyword">function</span> (<span class="params">request, response</span>) &#123;</span><br><span class="line">  <span class="comment">// Setting up Headers</span></span><br><span class="line">  response.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-origin&quot;</span>, <span class="string">&quot;*&quot;</span>); <span class="comment">// 모든 출처(orogin)을 허용</span></span><br><span class="line">  response.<span class="title function_">setHeader</span>(</span><br><span class="line">    <span class="string">&quot;Access-Control-Allow-Methods&quot;</span>,</span><br><span class="line">    <span class="string">&quot;GET, POST, OPTIONS, PUT, PATCH, DELETE&quot;</span></span><br><span class="line">  ); <span class="comment">// 모든 HTTP 메서드 허용</span></span><br><span class="line">  response.<span class="title function_">setHeader</span>(<span class="string">&quot;Access-Control-Allow-Credentials&quot;</span>, <span class="string">&quot;true&quot;</span>); <span class="comment">// 클라이언트와 서버 간에 쿠키 주고받기 허용</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line"></span><br><span class="line">  response.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123; <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/plain&quot;</span> &#125;);</span><br><span class="line">  response.<span class="title function_">end</span>(<span class="string">&quot;ok&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">httpServer.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Server is running at port 3000...&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Access-Control-Allow-origin 헤더 값으로 * 을 사용하면 모든 Origin에서 오는 요청을 허용한다는 의미이므로 당장은 편할 수 있겠지만, 바꿔서 생각하면 정체도 모르는 이상한 출처에서 오는 요청까지 모두 허용하기 때문에 보안은 더 허술해진다. 그러니 가급적이면 귀찮더라도 다음과 같이 출처를 직접 명시해주도록 하자.</p>
</blockquote>
<h3 id="👑-클라이언트-측"><a href="#👑-클라이언트-측" class="headerlink" title="👑 클라이언트 측"></a>👑 클라이언트 측</h3><ul>
<li>Proxy 설정<ul>
<li>브라우저 요청을 Proxy에서 설정한 주소로 우회하여 전송하는 방법</li>
<li>라이브러리 사용한다</li>
<li>개발단계에서만 사용하고 <red>Production 환경에서는 Proxy 처리가 되지 않는다.</red></li>
</ul>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/11/CS/%F0%9F%A5%81-CORS/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/10/CS/%E2%9B%B3%EF%B8%8F-MVC-MVP-MVVM-%ED%8C%A8%ED%84%B4/"
                            aria-label=": ⛳️ MVC, MVP, MVVM 패턴"
                        >
                            ⛳️ MVC, MVP, MVVM 패턴
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-10T20:59:49+09:00">
	
		    2022/11/10
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/CS/">CS</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-디자인-패턴이란"><a href="#📌-디자인-패턴이란" class="headerlink" title="📌 디자인 패턴이란?"></a>📌 디자인 패턴이란?</h1><p>디자인 패턴은 애플리케이션내에서 각자 역할에 맞는 코드끼리 분리하여 유지보수성을 높이고 탄탄한 구조를 가진 애플리케이션을 설계할 수 있다.</p>
<h2 id="✏️-디자인-패턴-장점"><a href="#✏️-디자인-패턴-장점" class="headerlink" title="✏️ 디자인 패턴 장점"></a>✏️ 디자인 패턴 장점</h2><ol>
<li>검증된 해결책</li>
</ol>
<p>디자인 패턴은 소프트웨어 개발의 문제를 해결하는 확실한 접근 방식을 제공한다.</p>
<ol start="2">
<li>쉬운 재사용</li>
</ol>
<p>일반적으로 필요에 따라 조정가능하며 즉시 사용가능한 솔루션을 반영한다.</p>
<p><red>다만, 디자인 패턴이 모든 문제의 해결책은 아니다.</red> 패턴의 역할은 솔루션 체계를 제공하고 이를 지원하는 역할을 한다.</p>
<p>이외의 사소한 문제를 예방할 수 있고 반복을 피하여 파일 크기를 줄일 수 있으며, 개발자간의 소통을 원할하게 하는 장점이 있다.</p>
<h2 id="🛤-MVC-패턴"><a href="#🛤-MVC-패턴" class="headerlink" title="🛤 MVC 패턴"></a>🛤 MVC 패턴</h2><p>Model + View + Controller를 합친 용어이다.</p>
<p><img src="/../../images/design/mvc.png" alt="mvc"></p>
<ul>
<li>Model : 데이터와 데이터 변경 함수 관리하는 부분</li>
<li>View : 사용자에게 보여지는 UI</li>
<li>Controller : 사용자의 입력을 받고 처리하는 부분</li>
</ul>
<h3 id="동작"><a href="#동작" class="headerlink" title="동작"></a>동작</h3><ol>
<li>사용자 액션이 들어오면 컨트롤러가 액션 확인하고 모델을 업데이트한다.</li>
<li>컨트롤러는 모델을 나타낼 뷰를 선택한다.</li>
<li>뷰는 모델을 이용하여 화면에 나타낸다.</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">참고 - MVC에서 View가 업데이트 되는 방법</span><br><span class="line">- 뷰가 모델을 이용하여 직접 업데이트</span><br><span class="line">- 모델이 뷰에게 알림을 주어 업데이트</span><br><span class="line">- 뷰가 Polling으로 모델의 변경을 주기적으로 감지하여 업데이트</span><br></pre></td></tr></table></figure>

<p><code>polling이란?</code></p>
<p>하나의 장치가 충돌 회피 또는 동기화를 목적으로 다른 장치의 상태를 주기적으로 검사하여 일정 조건을 만족할 때, 송수신 자료를 처리하는 방식</p>
<hr>
<h3 id="특징"><a href="#특징" class="headerlink" title="특징"></a>특징</h3><ul>
<li>컨트롤러는 여러 개의 뷰를 선택할 수 있는 1:n 구조</li>
<li>보편적이며 단순하다.</li>
<li>뷰와 모델 사이의 의존성이 높다. (bad~👎)</li>
</ul>
<h2 id="🏸-MVP-패턴"><a href="#🏸-MVP-패턴" class="headerlink" title="🏸 MVP 패턴"></a>🏸 MVP 패턴</h2><p>Model + View + Presenter를 합친 용어이다.</p>
<p><img src="/../../images/design/mvp.png" alt="mvp"></p>
<ul>
<li>Model : 데이터와 데이터 변경 함수 관리하는 부분</li>
<li>View : 사용자에게 보여지는 UI</li>
<li>Presenter : 뷰에서 요청한 정보로 모델을 가공하여 뷰에게 전달해주는 부분(<strong>View, Model을 붙여주는 접착제역할</strong>)</li>
</ul>
<h3 id="동작-1"><a href="#동작-1" class="headerlink" title="동작"></a>동작</h3><ol>
<li>사용자 액션은 뷰를 통해 들어온다.</li>
<li>뷰는 프레젠터에게 데이터를 요청한다.</li>
<li>프레젠터는 모델에게 데이터 요청한다.</li>
<li>모델은 프레젠터에게 요청받은 데이터를 응답한다.</li>
<li>프레젠터는 뷰에게 데이터를 응답한다.</li>
<li>뷰가 응답받은 데이터를 화면에 나타낸다.</li>
</ol>
<h3 id="특징-1"><a href="#특징-1" class="headerlink" title="특징"></a>특징</h3><ul>
<li>프레젠터는 뷰와 모델의 인스턴스를 가지고 있어 둘을 연결하는 접착제 역할</li>
<li>프레젠터와 뷰는 1:1</li>
<li>뷰와 모델간의 의존성이 없다. (Good~👍)</li>
<li>하지만 뷰와 프레젠터의 의존성 높다.</li>
</ul>
<h2 id="👑-MVVM-패턴"><a href="#👑-MVVM-패턴" class="headerlink" title="👑 MVVM 패턴"></a>👑 MVVM 패턴</h2><p>Model + View + View Model을 합친 용어이다.</p>
<p><img src="/../../images/design/mvvm.png" alt="mvvm"></p>
<ul>
<li>Model : 데이터와 데이터 변경 함수 관리하는 부분</li>
<li>View : 사용자에게 보여지는 UI</li>
<li>View Model : 뷰를 표현하기 위해 만든 뷰를 위한 모델</li>
</ul>
<h3 id="동작-2"><a href="#동작-2" class="headerlink" title="동작"></a>동작</h3><ol>
<li>사용자 액션이 뷰를 통해 들어온다.</li>
<li>뷰에 액션이 들어오면 Command 패턴으로 뷰 모델에 액션을 전달한다.</li>
<li>뷰 모델은 모델에게 데이터를 요청한다.</li>
<li>모델은 뷰 모델에게 요청받은 데이터를 응답한다.</li>
<li>뷰 모델은 응답받은 데이터를 가공하여 저장한다.</li>
<li>뷰는 뷰 모델과 데이터 바인딩하여 화면에 나타낸다.</li>
</ol>
<h3 id="특징-2"><a href="#특징-2" class="headerlink" title="특징"></a>특징</h3><ul>
<li>Command 패턴과 데이터 바인딩 두가지 패턴을 사용(<strong>뷰와 뷰 모델 사이의 의존성 제거</strong>)</li>
<li>뷰 모델과 뷰는 1:n</li>
<li>뷰와 모델사이의 의존성도 없으므로 각 부분은 독립적으로 모듈화하여 개발할 수 있다.</li>
<li>뷰 모델 설계가 어렵다.</li>
</ul>
<p><code>Command패턴이란?</code></p>
<p>요청을 객체 형태로 캡슐화하여 사용자가 보낸 요청을 나중에 사용할 수 있도록 메서드명, 매개변수 등 요청에 필요한 정보를 저장,로깅, 취소하는 패턴이다.</p>
<hr>
<p>참고</p>
<p><a target="_blank" rel="noopener" href="https://beomy.tistory.com/43">[디자인패턴]MVC,MVP,MVVM 패턴 비교</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/10/CS/%E2%9B%B3%EF%B8%8F-MVC-MVP-MVVM-%ED%8C%A8%ED%84%B4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/10/CS/%F0%9F%8E%A1-Flux-%ED%8C%A8%ED%84%B4/"
                            aria-label=": 🎡 Flux 패턴"
                        >
                            🎡 Flux 패턴
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-10T20:29:55+09:00">
	
		    2022/11/10
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/CS/">CS</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-Flux-패턴"><a href="#📌-Flux-패턴" class="headerlink" title="📌 Flux 패턴"></a>📌 Flux 패턴</h1><p>페이스북이 전통적인 MVC 디자인 패턴이 복잡한 애플리케이션에서 적합하지 않다고 판단하여 새로운 디자인 패턴을 소개한 것이 바로 <red>단방향 데이터 흐름을 갖는 Flux 패턴이다.</red></p>
<h2 id="🔥-문제점"><a href="#🔥-문제점" class="headerlink" title="🔥 문제점"></a>🔥 문제점</h2><p><img src="/../../images/flux/complicated%20MVC.png" alt="Complicated MVC"></p>
<p>애플리케이션 규모가 커짐에 따라 <red>양방향 데이터 흐름</red>을 그림처럼 복잡한 구조를 가지게 된다.</p>
<p>사용자와 상호작용하는 여러 View가 연결된 여러 Model을 업데이트하고 Model 또한 연결된 View를 업데이트하는 매우 복잡한 상황이 발생하기에 <strong>데이터 흐름을 예측하기란 매우 어려워진다.</strong></p>
<blockquote>
<p>사실 위 그림은 전통적인 MVC 패턴이고 Apple의 MVC 패턴은 사진처럼 Model과 View의 양방향 데이터 흐름이 발생하지 않는다. <red>문제는 양방향 데이터 흐름이다.</red></p>
</blockquote>
<p><img src="/../../images/flux/appleMVC.png" alt="AppleMVC"></p>
<h2 id="🦖-Flux-아키텍처"><a href="#🦖-Flux-아키텍처" class="headerlink" title="🦖 Flux 아키텍처"></a>🦖 Flux 아키텍처</h2><p><img src="/../../images/flux/flux.png" alt="flux"></p>
<p>Flux 패턴은 앱의 단방향 데이터 흐름을 촉진하는 시스템 아키텍처를 말한다.</p>
<h3 id="Action"><a href="#Action" class="headerlink" title="Action"></a>Action</h3><p><strong>사용자의 요청을 정의한 객체</strong>를 말한다.</p>
<ul>
<li>사용자 요청 타입(Type)과 데이터(Payload)를 가진다.</li>
<li>액션 크리에이터(Action Creator) 함수를 사용하여 디스패처로 전달한다.</li>
</ul>
<h3 id="Dispatcher"><a href="#Dispatcher" class="headerlink" title="Dispatcher"></a>Dispatcher</h3><p>디스패처는 중앙 데이터 흐름 관리한다. 스토어에 등록된 액션 타입마다 콜백되는 함수가 존재한다.</p>
<ul>
<li>사용자 액션으로부터 받은 액션 타입에 맞는 콜백함수를 실행한다.</li>
<li><strong>스토어 데이터 변경은 디스패처를 통해서만 가능하다.</strong></li>
</ul>
<h3 id="Store"><a href="#Store" class="headerlink" title="Store"></a>Store</h3><p>스토어는 상태(Model)를 관리하는 저장소이며 상태를 변경할 수 있는 콜백을 가진다. 각 액션을 처리하는 콜백함수는 디스패처에 등록된다.</p>
<ul>
<li>상태와 상태를 변경하는 함수를 가진다.</li>
<li>디스패처에 등록된 콜백함수가 실행되면 스토어의 상태가 변경되며 View에 데이터가 변경되었음을 알린다.(옵저버 패턴 활용)</li>
</ul>
<h3 id="View"><a href="#View" class="headerlink" title="View"></a>View</h3><p>뷰는 사용자와 상호작용하는 컴포넌트이다. 스토어에서 상태가 변경되었다는 알림이 오면 뷰는 리렌더링이 발생한다.</p>
<ul>
<li>사용자는 View를 조작할 수 있고 상태 변경을 요청하는 액션을 생성할 수 있다.</li>
<li>생성된 액션은 디스패처에게 전달되고 디스패처는 해당 액션에 연결된 콜백을 실행하여 스토어의 상태를 변경한다.</li>
<li>상태가 변경되었음을 뷰에게 알리고 뷰는 리렌더링이 발생한다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/10/CS/%F0%9F%8E%A1-Flux-%ED%8C%A8%ED%84%B4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/10/React/LifeCycle-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4/"
                            aria-label=": LifeCycle(라이프사이클)"
                        >
                            LifeCycle(라이프사이클)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-10T20:23:28+09:00">
	
		    2022/11/10
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/React/">React</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-LifeCycle이란"><a href="#📌-LifeCycle이란" class="headerlink" title="📌 LifeCycle이란?"></a>📌 LifeCycle이란?</h1><p>라이프 사이클은 함수 컴포넌트와 달리 클래스 컴포넌트에서만 라이프 사이클이 제공된다. <strong>컴포넌트 생성, 마운트, 업데이트, 언마운트 등 특정 시점에서 실행되는 콜백함수를 말한다.</strong></p>
<h2 id="👑-LifeCycle-필요성"><a href="#👑-LifeCycle-필요성" class="headerlink" title="👑 LifeCycle 필요성"></a>👑 LifeCycle 필요성</h2><p>라이프 사이클은 React의 성능을 최적화하고 React가 컨트롤할 수 없는 <red>Side Effect(사이드이펙트)를 처리</red>하기 위함이다.</p>
<p>대표적인 사이드 이펙트는 다음과 같다.</p>
<ol>
<li>네트워크 통신 (비동기 통신 요청 및 응답)</li>
<li>DOM 컨트롤 (RealDOM 접근 및 조작)</li>
<li>구독&#x2F;취소 (이벤트 핸들링 등)</li>
<li>오류 감지 (ErrorBoundary 컴포넌트 등)</li>
</ol>
<h2 id="✏️-대표적인-LifeCycle-메서드"><a href="#✏️-대표적인-LifeCycle-메서드" class="headerlink" title="✏️ 대표적인 LifeCycle 메서드"></a>✏️ 대표적인 LifeCycle 메서드</h2><ul>
<li><code>constructor()</code><ul>
<li>마운트 되기 전에 실행된다.</li>
</ul>
</li>
<li><code>render()</code><ul>
<li>컴포넌트 렌더링 시점에 호출</li>
</ul>
</li>
<li><code>componentDidMount()</code><ul>
<li>DOM에 마운트 된 이후 실행된다.</li>
</ul>
</li>
<li><code>componentDidUpdate()</code><ul>
<li>최초 렌더링 시 실행 ❌</li>
<li>업데이트 이후 실행</li>
</ul>
</li>
<li><code>componentWillunmount()</code><ul>
<li>컴포넌트 소멸하기 직전에 실행</li>
</ul>
</li>
</ul>
<p><img src="/../../images/lifecycle/lifecycle.png" alt="LifeCycle"></p>
<h2 id="🌈-Render-단계"><a href="#🌈-Render-단계" class="headerlink" title="🌈 Render 단계"></a>🌈 Render 단계</h2><ul>
<li>render 단계는 virtualDOM을 조작하는 단계이다.<ul>
<li>성능 최적화를 위한 행동은 render 이전에 해줘야한다.</li>
<li>render가 끝났다고 해서 실제DOM에 바로 반영되는 것이 아니다.</li>
</ul>
</li>
<li>리액트 업데이트가 되는 경우는 다음 3가지 상황이다.<ol>
<li><strong>새로운 props가 전달되었을 때,</strong></li>
<li><strong>해당 컴포넌트의 state가 변경되었을 때,</strong></li>
<li><strong>강제로 변경시켰을 때만 업데이트가 발생한다.</strong></li>
</ol>
</li>
</ul>
<h2 id="🔨-Commit-단계"><a href="#🔨-Commit-단계" class="headerlink" title="🔨 Commit 단계"></a>🔨 Commit 단계</h2><p>commit 단계는 RealDOM이므로 명령형이 가능하다.</p>
<ul>
<li>DOM을 사용하여 <strong>componentDidMount, DidUpdate, WillUnmount 에서 명령형 코드 작성이 가능하다.</strong></li>
<li>사이드 이펙트 관련 함수는 여기서 수행해야한다.<aside>
📌 사이드 이펙트가 나쁜 의미로 부작용이 아니라 리액트가 하는 일이 아닌 부가적인 일을 의미한다.
</aside></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/10/React/LifeCycle-%EB%9D%BC%EC%9D%B4%ED%94%84%EC%82%AC%EC%9D%B4%ED%81%B4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/10/React/Hooks/%F0%9F%90%8D-setState/"
                            aria-label=": 🐍 setState"
                        >
                            🐍 setState
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-10T20:16:29+09:00">
	
		    2022/11/10
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/React/">React</a>, <a class="category-link" href="/categories/React/Hooks/">Hooks</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <span id="more"></span>

<h1 id="📌-setState"><a href="#📌-setState" class="headerlink" title="📌 setState"></a>📌 setState</h1><p><code>setState()</code> 메서드는 컴포넌트의 state 객체에 대한 업데이트를 실행합니다. state가 변경되면, 컴포넌트는 리렌더링됩니다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">setState</span>(updater[, callback])</span><br></pre></td></tr></table></figure>

<p>updater에 컴포넌트의 state 변경사항을 인자로 넘겨주고 React에게 해당 컴포넌트를 재렌더링해야한다고 요청을 보내는 메서드이다.</p>
<ul>
<li><code>setState()</code> 호출은 비동기적으로 이뤄진다.</li>
<li>성능 향상을 위해 <red>즉각적으로 재렌더링을 발생시키지 않는다.</red><ul>
<li>여러 변경 사항을 일괄적으로 갱신하거나 나중에 미룰 수 있다. 때문에 <code>setState()</code> 호출하자마자 <code>this.state</code>에 접근하는 것은 문제가 될 수 있다.</li>
<li>대신 <code>componentDidUpdate()</code> 또는 <code>setState(updater, callback)</code>처럼 2번째 인자로 콜백함수를 전달하는 방법을 사용한다.</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">  <span class="attr">message</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">setState</span>(</span><br><span class="line">  &#123; <span class="attr">message</span>: <span class="string">&quot;상태 변경&quot;</span> &#125;,</span><br><span class="line">  <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;callback: &quot;</span>, <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">message</span>) <span class="comment">// &#x27;상태 변경&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">message</span>); <span class="comment">// &#x27;&#x27;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>아직 렌더링이 발생하지 않았기 때문에 <code>this.state.message</code>의 값이 갱신되지 않았다.</li>
</ul>
<h1 id="🎒-2022-11-12-추가"><a href="#🎒-2022-11-12-추가" class="headerlink" title="🎒 2022.11.12 추가"></a>🎒 2022.11.12 추가</h1><h2 id="setState-첫번째-인수로-콜백함수-올-때"><a href="#setState-첫번째-인수로-콜백함수-올-때" class="headerlink" title="setState() 첫번째 인수로 콜백함수 올 때"></a><code>setState()</code> 첫번째 인수로 콜백함수 올 때</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">BinaryCalcurator</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    <span class="attr">buttonStates</span>: <span class="title class_">Array</span>(<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">numberOfButtons</span>).<span class="title function_">fill</span>(<span class="literal">false</span>),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  handleToggleButtonContent = <span class="function">(<span class="params">index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">setState</span>(<span class="function">(<span class="params">&#123; buttonStates &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">      <span class="attr">buttonStates</span>: buttonStates.<span class="title function_">map</span>(<span class="function">(<span class="params">buttonState, idx</span>) =&gt;</span></span><br><span class="line">        idx === index ? !buttonState : buttonState</span><br><span class="line">      ),</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>콜백함수는 이전 상태를 받아서 상태 변경을 요청한다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/10/React/Hooks/%F0%9F%90%8D-setState/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/10/CS/%F0%9F%8D%AA-Cookie/"
                            aria-label=": 🍪 Cookie"
                        >
                            🍪 Cookie
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-10T10:36:29+09:00">
	
		    2022/11/10
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/CS/">CS</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-Cookie란"><a href="#📌-Cookie란" class="headerlink" title="📌 Cookie란?"></a>📌 Cookie란?</h1><p>서버가 클라이언트에게 전송하는 데이터이다. 서버가 HTTP Response Header의 Set-Cookie에 내용을 넣어 전달하면 브라우저가 이 내용을 자체적으로 브라우저에 저장한다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- Reponse Header --&gt;</span><br><span class="line">HTTP/2.0 200 OK</span><br><span class="line">Content-Type: text/html</span><br><span class="line">Set-Cookies: &lt;cookie-name&gt;=&lt;cookie-value&gt;</span><br><span class="line"></span><br><span class="line">// Page Content...</span><br></pre></td></tr></table></figure>

<ul>
<li>쿠키는 key,value를 쌍으로 브라우저에 문자열로 저장된다.</li>
<li>주로 만료 기간을 설정하거나 자동으로 서버로 전송되어야할 작은 용량의 정보를 담는다.<ul>
<li>Ex) n일 동안 보지 않기, 비로그인 장바구니 기능</li>
</ul>
</li>
<li>쿠키는 주로 <strong>인증</strong>을 위해 사용된다.</li>
<li>쿠키는 세션쿠키와 퍼머넌트 쿠키가 있다.</li>
</ul>
<h2 id="🐶-Session-Cookie"><a href="#🐶-Session-Cookie" class="headerlink" title="🐶 Session Cookie"></a>🐶 Session Cookie</h2><p>세션 쿠키는 클라이언트가 셧다운 되면 사라지는 쿠키이다. 왜냐하면 Expires, Max-Age를 지정해주지 않았기 때문이다.</p>
<p><code>일부 브라우저는 Session Resorting을 사용하여 세션쿠키를 영구적으로 만들 수 있다.</code></p>
<ul>
<li>Expires, Max-Age 설정으로 만료 기한을 정해주지 않은 쿠키</li>
</ul>
<h2 id="🐸-Permanent-Cookie"><a href="#🐸-Permanent-Cookie" class="headerlink" title="🐸 Permanent Cookie"></a>🐸 Permanent Cookie</h2><p>클라이언트가 브라우저를 열고 닫거나 새로고침을 하여도 쿠키의 데이터가 보존되는 쿠키이다. Set-Cookie에 몇가지 조건을 추가하여 Permanent Cookie를 설정할 수 있다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: id=a3fWa; Expires=Thu, 10 Nov 2022 15:30:00 GMT;</span><br></pre></td></tr></table></figure>

<ul>
<li>만료시간은 클라이언트 시간을 따른다. (서버시간과 상이할 수 있다.)</li>
</ul>
<h2 id="✏️-쿠키-접근"><a href="#✏️-쿠키-접근" class="headerlink" title="✏️ 쿠키 접근"></a>✏️ 쿠키 접근</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;yummy_cookie=choco&quot;</span>;</span><br><span class="line"><span class="variable language_">document</span>.<span class="property">cookie</span> = <span class="string">&quot;tasty_cookie=strawberry&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="property">cookie</span>);</span><br><span class="line"><span class="comment">// logs &quot;yummy_cookie=choco; tasty_cookie=strawberry&quot;</span></span><br></pre></td></tr></table></figure>

<h2 id="🔨-쿠키-보안"><a href="#🔨-쿠키-보안" class="headerlink" title="🔨 쿠키 보안"></a>🔨 쿠키 보안</h2><p>🙅‍♂️ 민감한 정보는 HTTP 쿠키 내에 저장하면 안된다.</p>
<h3 id="🪜-HttpOnly-Cookie"><a href="#🪜-HttpOnly-Cookie" class="headerlink" title="🪜 HttpOnly Cookie"></a>🪜 HttpOnly Cookie</h3><p>XSS 공격으로부터 사용자의 쿠키 정보가 유출되는 것을 방지하기 위해 등장하였다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: id=a3fWa; Expires=Thu, 10 Nov 2022 15:30:00 GMT; HttpOnly</span><br></pre></td></tr></table></figure>

<ul>
<li>document.cookie API로 접근할 수 없다.</li>
</ul>
<h3 id="🔒-Secure-Cookie"><a href="#🔒-Secure-Cookie" class="headerlink" title="🔒 Secure Cookie"></a>🔒 Secure Cookie</h3><p>HTTPS 전송을 보증해주는 역할을 하는 쿠키이다. Secure로 설정된 쿠키는 안전한 전송 프로토콜에만 쿠키 정보를 서버로 보낸다.</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Set-Cookie: id=a3fWa; Expires=Thu, 10 Nov 2022 15:30:00 GMT; Secure; HttpOnly</span><br></pre></td></tr></table></figure>

<h3 id="👿-Cross-site-요청-위조-CSRF-공격"><a href="#👿-Cross-site-요청-위조-CSRF-공격" class="headerlink" title="👿 Cross-site 요청 위조(CSRF) 공격"></a>👿 Cross-site 요청 위조(CSRF) 공격</h3><p>현재 사용자가 은행 사이트에 로그인 되어있다. 송금과 같은 은행 업무를 보고 로그아웃 하지 않고 새 탭을 열어 어떤 사이트를 열었다. 그런데 이 사이트에는 해커에게 송금을 요청하는 form이 있고 이 form은 자동으로 제출되도록 설정되었다.</p>
<p>form이 해당 사이트를 거쳐 은행 사이트로 전송될 때 인증 쿠키도 함께 전송된다. 은행은 사용자로 착각하여 해커에게 돈을 송금하는 일이 발생한다.</p>
<p>⇒ 이런 공격을 <strong>크로스 사이트 요청 위조</strong> 라고 부른다.</p>
<p>🚪 <strong>방어 방법</strong></p>
<ul>
<li>XSRF 토큰이라는 특수 필드 넣어줘야한다.</li>
<li>민감한 동작에 필수로 요구되는 확인 절차가 항상 수행하도록 한다.</li>
<li>민감한 동작에 사용되는 쿠키는 짧은 수명만 갖도록 한다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/10/CS/%F0%9F%8D%AA-Cookie/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/09/CS/HTTP-%EC%9A%94%EC%B2%AD-%EB%A9%94%EC%84%9C%EB%93%9C-GET-vs-POST/"
                            aria-label=": HTTP 요청 메서드 GET vs POST"
                        >
                            HTTP 요청 메서드 GET vs POST
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-09T17:50:27+09:00">
	
		    2022/11/09
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/CS/">CS</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-GET"><a href="#📌-GET" class="headerlink" title="📌 GET"></a>📌 GET</h1><p>GET 방식은 전송 URL에 입력 데이터를 쿼리 스트링으로 보내는 방식<br>ex) <a target="_blank" rel="noopener" href="http://jsonplaceholder.typicode.com/posts?userId=1&amp;id=1">http://jsonplaceholder.typicode.com/posts?userId=1&amp;id=1</a></p>
<ul>
<li>전송 URL 바로 뒤에 ?를 통해 데이터의 시작을 알려주고, Key-value 형태의 데이터 추가한다.</li>
<li>캐시가 가능하다.</li>
<li>1개 이상의 전송 데이터는 &amp;로 구분한다.</li>
<li><strong>URL에 전송 데이터가 모두 노출되어 보안에 문제가 있어 민감한 정보는 사용하지 않는다. 전송할 수 있는 데이터의 한계가 있다. (최대 255자)</strong></li>
<li>REST API에서 GET 메소드는 모든 또는 특정 리소스의 조회를 요청한다.<br>⇒ <red>GET 요청 보내면 ~ 이거이거 조회할게요~</red></li>
</ul>
<h1 id="📌-POST"><a href="#📌-POST" class="headerlink" title="📌 POST"></a>📌 POST</h1><p>POST 방식은 사용자의 요청을 <strong>Request Body에 담아 보내는 방식</strong><br>ex) <a target="_blank" rel="noopener" href="http://jsonplaceholder.typicode.com/posts">http://jsonplaceholder.typicode.com/posts</a></p>
<ul>
<li>URL에 전송 데이터가 모두 노출되지 않지만 GET에 비해 속도가 느리다.</li>
<li>캐시가 불가능하다.</li>
<li>데이터 길이와 타입의 제한이 없다.</li>
<li>REST API에서 POST 메소드는 특정 리소스의 생성을 요청한다.<br>⇒ <red>POST 요청 보내면 ~ 이거 생성해주세요~</red></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/09/CS/HTTP-%EC%9A%94%EC%B2%AD-%EB%A9%94%EC%84%9C%EB%93%9C-GET-vs-POST/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/11/09/CS/HTTP%EC%9D%98-%EC%97%AD%EC%82%AC%EC%99%80-HTTPS/"
                            aria-label=": HTTP의 역사와 HTTPS"
                        >
                            HTTP의 역사와 HTTPS
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-11-09T17:01:41+09:00">
	
		    2022/11/09
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/CS/">CS</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="📌-HTTP"><a href="#📌-HTTP" class="headerlink" title="📌 HTTP"></a>📌 HTTP</h1><p><strong>서버&#x2F;클라이언트 모델을 따라 데이터를 주고받기 위한 프로토콜</strong>이다.</p>
<p>일반적으로 프로토콜을 이용하여 HTML 파일을 주고받을 수 있는 공간을 의미한다.</p>
<ul>
<li>텍스트 교환으로 보안에 취약하다.</li>
</ul>
<h2 id="역사"><a href="#역사" class="headerlink" title="역사"></a>역사</h2><p>초기 웹 페이지는 단순한 서버-클라이언트의 구조를 따랐다. 처음부터 TCP &#x2F; IP 위에서 구현되도록 설계되었다. 지금의 TCP는 무겁고 느리다고 까이지만, 이 당시에는 연결 지향적 특성 때문에 안정적이고 신뢰성있는 통신을 제공하여 평이 좋았다.</p>
<p>초기 HTTP 구조는 매우 간단했다. 요청 메서드도 GET 한가지였고, 헤더나 상태 코드도 없었고 응답은 무조건 HTML 파일 그 자체였다.</p>
<p>하지만 웹이 인기를 끌다 보니 기존 HTTP 사양만으로는 사용자들의 요구사항을 충족시킬 수 없었고 <strong>명시적으로 약속된 사양이 없어</strong> 여러 브라우저들 간의 혼란이 있어서 HTTP 기본 구조를 그대로 유지하면서 <strong>HTTP를 표준화</strong>하기 위해 HTTP WG 조직이 탄생하고 이 때 <strong>HTTP&#x2F;1.0이 탄생</strong>하게되었다.</p>
<h1 id="📌-HTTP-x2F-1-0"><a href="#📌-HTTP-x2F-1-0" class="headerlink" title="📌 HTTP&#x2F;1.0"></a>📌 HTTP&#x2F;1.0</h1><ul>
<li>HTTP Header에 버전정보 명시되어있다.</li>
<li>요청 메서드 GET, POST, HEAD 3가지</li>
<li>상태 코드 추가 되어 클라이언트 측에서 요청 결과에 따라 동작하도록 설계 가능</li>
<li><strong>Content-type의 도움으로 HTML 이외의 파일도 전송</strong>할 수 있게되었다.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 요청 --&gt;</span><br><span class="line">GET /mypage.html HTTP/1.0</span><br><span class="line">User-Agent: ...</span><br><span class="line"></span><br><span class="line">&lt;!-- 응답 --&gt;</span><br><span class="line">200 OK</span><br><span class="line">...</span><br><span class="line">Content-Type: text/html</span><br><span class="line">&lt;HTML&gt;</span><br><span class="line">  A page with on image</span><br><span class="line">  &lt;img src=&quot;/myimage.jpg&quot; /&gt;</span><br><span class="line">&lt;/HTML&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>HTTP&#x2F;1.0의 간단한 요청과 응답 예시이다.</li>
</ul>
<h1 id="📌-HTTP-x2F-1-1"><a href="#📌-HTTP-x2F-1-1" class="headerlink" title="📌 HTTP&#x2F;1.1"></a>📌 HTTP&#x2F;1.1</h1><h2 id="❓-HTTP-x2F-1-0의-문제"><a href="#❓-HTTP-x2F-1-0의-문제" class="headerlink" title="❓ HTTP&#x2F;1.0의 문제"></a>❓ <strong>HTTP&#x2F;1.0의 문제</strong></h2><ul>
<li>HTTP&#x2F;1.0에서는 요청에 따른 응답이 수신되면 TCP 연결 바로 종료<ul>
<li>웹 페이지가 복잡해짐에 따라 이러한 TCP 핸드쉐이크 과정을 새로 거쳐야 하여 속도가 느려지는 문제가 있었다.</li>
</ul>
</li>
<li>1개의 요청을 보내면 1개의 응답을 받고 1번의 연결이 종료된다. 만약 10번의 요청을 보내면 TCP 연결을 10번 해야하므로 서버에 부담이 된다.</li>
</ul>
<h2 id="❗️-문제-해결책"><a href="#❗️-문제-해결책" class="headerlink" title="❗️ 문제 해결책"></a>❗️ 문제 해결책</h2><p><img src="/../../images/HTTP/pipe.png" alt="pipe"></p>
<ul>
<li><strong>연결 상태 유지(Persistent connection)</strong> : 기본적으로 한번 수립한 연결을 재사용 할 수 있도록 설정<ul>
<li>지정한 시간동안 연결을 끊지 않는 방식</li>
<li>연결 유지 시간 길어지면 서버 부하 🔺</li>
</ul>
</li>
<li><strong>Pipelining(파이프라이닝)</strong> : 클라이언트가 여러 요청 연달아 보내야할 때, 먼저 보낸 요청의 응답을 기다리는 것이 아니라 <strong>발생한 요청은 일단 전송하는 방식</strong><ul>
<li>클라이언트에서 여러 요청을 순차적으로 보내면 <strong>서버는 받은 순서에 따라 응답을 제공한다.</strong></li>
</ul>
</li>
</ul>
<h1 id="📌-HTTP-x2F-2"><a href="#📌-HTTP-x2F-2" class="headerlink" title="📌 HTTP&#x2F;2"></a>📌 HTTP&#x2F;2</h1><h2 id="❓-HTTP-x2F-1-1의-문제"><a href="#❓-HTTP-x2F-1-1의-문제" class="headerlink" title="❓ HTTP&#x2F;1.1의 문제"></a>❓ <strong>HTTP&#x2F;1.1의 문제</strong></h2><ul>
<li>매 요청마다 <strong>헤더를 중복</strong>해서 전송해야만 하는데 이것이 굉장한 낭비였다.</li>
<li>서버가 항상 요청받은 순서대로 응답해야하므로 <strong>HOLB(Head-of-Line Blocking)</strong> 방식이었다.</li>
<li>하나의 연결 내에서 응답 다중화(multiplexing)을 할 수 없어 요청이 순차적으로 처리되어야 했는데, <strong>서버가 응답 작성 중간에 문제가 생기면 후속 요청들이 전송되지 못하고 지연되는 문제가 있었다.</strong></li>
</ul>
<h2 id="❗️-문제-해결책-1"><a href="#❗️-문제-해결책-1" class="headerlink" title="❗️ 문제 해결책"></a>❗️ 문제 해결책</h2><p><img src="/../../images/HTTP/SPDY.png" alt="spdy"></p>
<ul>
<li>SPDY 프로토콜 기반으로 동작 ⇒ <red>웹 페이지 로드 시간 단축</red><ul>
<li>이진 프로토콜 : 단순 텍스트를 전송하는 것보다 컴퓨터 입장에서 훨씬 더 효율적으로 데이터 전송 가능</li>
</ul>
</li>
</ul>
<p><img src="/../../images/HTTP/multiplexing.png" alt="mutiplexing"></p>
<ul>
<li>응답 다중화 지원 : 하나의 TCP 연결에서 여러 요청을 동시에 처리할 수 있다. 바이너리 프레이밍으로 TCP 연결을 스트림, 메시지, 프레임으로 세분화하였다. <red>이는 요청 별 순서를 반드시 지켜야 했던 HTTP&#x2F;1.1과 대조적이다.</red><ul>
<li>스트림 : 요청과 응답이 양방향으로 오가는 연결 단위</li>
<li>메시지 : 하나의 요청과 응답을 구성하는 단위</li>
<li>프레임 : 메시지를 구성하는 최소 단위</li>
</ul>
</li>
</ul>
<p><img src="/../../images/HTTP/multiplexing2.png" alt="mutiplexing2"></p>
<ul>
<li>위 사진에서 하나의 TCP 연결에서 3개의 스트림이 존재한다.</li>
<li>5번 스트림은 클라이언트 측에서 서버로 데이터 전송하고, 1,3번 스트림은 서버 측에서 클라이언트로 데이터를 전송중이다.</li>
<li>1번 프레임 사이에 3번 스트림의 프레임이 끼워져있다.</li>
</ul>
<p>이로써 HTTP&#x2F;1.1에서 발생한 <strong>HOLB 문제 해결할 수 있었다.</strong></p>
<p><img src="/../../images/HTTP/headerCompressing.png" alt="headerCompressing"></p>
<ul>
<li>헤더 필드 압축 지원 : 달라진 부분만 다시 전송하는 코딩 기법 사용</li>
</ul>
<h1 id="📌-HTTP-x2F-3"><a href="#📌-HTTP-x2F-3" class="headerlink" title="📌 HTTP&#x2F;3"></a>📌 HTTP&#x2F;3</h1><h2 id="❗️-TCP로-인한-문제점"><a href="#❗️-TCP로-인한-문제점" class="headerlink" title="❗️ TCP로 인한 문제점"></a>❗️ <strong>TCP로 인한 문제점</strong></h2><p>앞서 헤더 필드 압축을 통해 HTTP&#x2F;1.1에서 발생한 HOLB 문제를 해결했다고 하였지만 이와 별개로 <red>TCP로 인해 발생하는 HOLB 문제는 해결할 수 없다는 한계가 있었다.</red></p>
<ul>
<li>신뢰성 지향하기에 데이터 손실 발생 시 데이터를 재전송하는데 순서대로 처리해야하기 때문에 HOLB 문제를 해결할 수 없다.</li>
<li>혼잡제어를 수행하기 때문에 전송 속도를 낮은 상태에서 높이는 방식으로 속도 제어를 하는데 이는 네트워크 상황이 좋을 때 불필요한 지연을 발생시킨다.</li>
</ul>
<p>문제를 해결하기 위해 TCP&#x2F;IP기반이 아닌 <red>UDP기반인 QUIC 프로토콜 위에서 동작하는 HTTP&#x2F;3</red>가 나왔다.</p>
<p>⇒ UDP는 신뢰성을 보장하지 않는데 <strong>QUIC 신뢰성 기능을 직접 구현하여 신뢰성 기능이 제공되는 UDP 기반의 프로토콜</strong>이다.</p>
<h2 id="👍-HTTP-x2F-3-장점"><a href="#👍-HTTP-x2F-3-장점" class="headerlink" title="👍 HTTP&#x2F;3 장점"></a>👍 HTTP&#x2F;3 장점</h2><p><img src="/../../images/HTTP/RTT.png" alt="RTT"></p>
<ul>
<li><strong>0-RTT 기능</strong> : 연결 정보를 캐싱하여 재사용하여 다음 연결때는 바로 연결이 가능</li>
</ul>
<p><img src="/../../images/HTTP/UDP.png" alt="UDP"></p>
<ul>
<li><strong>연결 다중화 지원</strong> : 각 스트림이 독립적으로 동작한다.<ul>
<li>HTTP&#x2F;2 방식의 경우 TCP 특성상 데이터 손실이 발생할 경우 <strong>데이터 복구를 우선 처리하여 HOLB가 발생</strong>한다.</li>
<li>HTTP&#x2F;3는 데이터 손실이 발생해도 연결 내 스트림이 독립적으로 동작하기 때문에 <red>다른 스트림에 영향을 주지 않는다.</red></li>
</ul>
</li>
<li><strong>연결 별 고유 UUID 지원</strong><ul>
<li>TCP 기반의 통신은 wifi 환경에서 셀룰러 환경으로 이동하는경우 IP주소가 변경되어 연결 재수립 과정을 거쳐야하지만, QUIC는 UUID(Connection ID) 연결 ID 기반으로 식별하여 연결을 유지할 수 있다.</li>
</ul>
</li>
</ul>
<h1 id="📌-HTTP-Message"><a href="#📌-HTTP-Message" class="headerlink" title="📌 HTTP Message"></a>📌 HTTP Message</h1><p>HTTP 메시지는 서버와 클라이언트 간에 데이터가 교환되는 방식이다. 메시지 타입에는 <strong>요청(Request), 응답(Response)이 있다.</strong></p>
<p><img src="/../../images/HTTP/httpmsgstructure2.png" alt="request와response"></p>
<p>요청과 응답의 구조는 유사하다.</p>
<ol>
<li><p>실행 되어야 할 요청 또는 요청의 성공, 실패가 기록된 한줄</p>
</li>
<li><p>요청에 대한 설명, 메시지 본문에 대한 설명이 포함된 <strong>HTTP Header 세트</strong>(optional)</p>
</li>
<li><p>요청에 대한 모든 메타 정보가 전송되었음을 알리는 빈 줄(blank line)</p>
</li>
<li><p>요청과 관련된 내용이 옵션으로 들어가거나, 응답과 관련된 문서가 들어간다. 본문의 존재 유무는 첫 줄과 HTTP Header에 명시된다.</p>
</li>
</ol>
<h2 id="✏️-HTTP-Request"><a href="#✏️-HTTP-Request" class="headerlink" title="✏️ HTTP Request"></a>✏️ HTTP Request</h2><p>요청은 클라이언트가 서버로 전달해서 서버의 액션이 일어나게끔 하는 메시지이다.</p>
<h3 id="1-Start-Line"><a href="#1-Start-Line" class="headerlink" title="1. Start Line"></a>1. Start Line</h3><ol>
<li>HTTP 메서드</li>
</ol>
<p>GET,POST 등의 서버가 수행해야 할 동작을 나타낸다.</p>
<ol start="2">
<li>요청 타겟 : URL 또는 (프로토콜,포트, 도메인)</li>
</ol>
<p>요청 타겟 포맷은 HTTP 메서드에 따라 달라진다.</p>
<ul>
<li>Origin 형식 : 끝에 ‘?’와 쿼리 문자열이 붙는 절대경로이다. 가장 일반적인 형식으로 GET, POST, HEAD, OPTIONS 메서드와 함께 사용한다.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">POST / HTTP 1.1</span><br><span class="line">GET /background.png HTTP/1.0</span><br><span class="line">HEAD /test.html?query=alibaba HTTP/1.1</span><br><span class="line">OPTIONS /anypage.html HTTP/1.0</span><br></pre></td></tr></table></figure>

<ul>
<li>absolute 형식 : 완전한 URL 형식으로, 프록시에 연결하는 경우 대부분 GET과 사용한다.</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET http://developer.mozilla.org/en-US/docs/Web/HTTP/Messages HTTP/1.1</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>마지막으로 HTTP 버전이 들어간다.</li>
</ol>
<h3 id="2-Header"><a href="#2-Header" class="headerlink" title="2. Header"></a><strong>2. Header</strong></h3><p>대소문자 구분없는 문자열 다음에 콜론(:)이 붙고 그 뒤에 오는 값은 Header에 따라 달라진다.</p>
<p><img src="/../../images/HTTP/http_request_headers3.png" alt="header"></p>
<ul>
<li>HTTP Method</li>
<li>HTTP Version</li>
<li>Host</li>
<li>Content-Type</li>
</ul>
<h3 id="3-Body-본문"><a href="#3-Body-본문" class="headerlink" title="3. Body(본문)"></a>3. Body(본문)</h3><p>모든 요청에 본문이 들어가지 않는다. GET, HEAD, DELETE, OPTIONS 처럼 리소스를 가져오는 요청은 본문이 필요 없다.</p>
<p>보통 POST 요청으로 서버에 데이터를 업데이트 하기 위해 본문이 필요하다.</p>
<p>본문은 두가지 종류로 나뉜다.</p>
<ul>
<li>단일-리소스 본문(single-resource bodies) : Header 2개(Content-Type, Content-Length)로 정의된 단일 파일</li>
<li>다중-리소스 본문(muliple-resource bodies) : 파트마다 다른 정보를 지닌다.</li>
</ul>
<h2 id="✏️-HTTP-Response"><a href="#✏️-HTTP-Response" class="headerlink" title="✏️ HTTP Response"></a>✏️ HTTP Response</h2><p>응답은 요청에 대한 서버의 답변이다.</p>
<h3 id="1-Start-Line-1"><a href="#1-Start-Line-1" class="headerlink" title="1. Start Line"></a>1. Start Line</h3><ol>
<li><p>프로토콜 버전 (보통 HTTP&#x2F;1.1)</p>
</li>
<li><p>상태 코드 : 요청의 성공 여부를 나타낸다. 200, 404 또는 302</p>
</li>
<li><p>상태 텍스트 : 상태 코드에 대한 설명글</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 404 Not Found.</span><br></pre></td></tr></table></figure>

<h3 id="2-Header-1"><a href="#2-Header-1" class="headerlink" title="2. Header"></a><strong>2. Header</strong></h3><p>요청 Header와 동일한 구조이다.</p>
<p><img src="/../../images/HTTP/http_response_headers3.png" alt="resHeader"></p>
<ul>
<li>HTTP Version</li>
<li>Status</li>
<li>Content-Type</li>
<li><strong>Set-Cookie</strong></li>
</ul>
<h3 id="3-Body"><a href="#3-Body" class="headerlink" title="3. Body"></a>3. Body</h3><p>모든 응답에 Body가 들어가지는 않는다. 201, 204 상태 코드를 가진 응답은 Body가 없다.</p>
<h1 id="📌-HTTPS"><a href="#📌-HTTPS" class="headerlink" title="📌 HTTPS"></a>📌 HTTPS</h1><p>기존 프로토콜에서 데이터가 쉽게 도난당하는 것을 방지하기 위해 <strong>SSL(Secure Socket Layer) 또는 TLS(Transport Layer Security) 프로토콜</strong> 을 사용하여 <strong>브라우저와 서버를 암호화하여 연결해준다.</strong></p>
<p>또한 데이터가 전송중에 손상되거나 수정되는 것을 방지한다.</p>
<ul>
<li>구글같은 포털에서 SEO 가산점을 준다.</li>
</ul>
<h2 id="✏️-SSL-Secure-Socket-Layer-프로토콜"><a href="#✏️-SSL-Secure-Socket-Layer-프로토콜" class="headerlink" title="✏️ SSL(Secure Socket Layer) 프로토콜"></a>✏️ SSL(Secure Socket Layer) 프로토콜</h2><p>HTTPS 프로토콜이 텍스트를 암호화 할 수 있도록 도와주는 프로토콜이다. 암호화 원리는 <strong>공개키 암호화 방식</strong>이다.</p>
<blockquote>
<p>SSL 프로토콜 통제권을 IETF로 넘기면서 TLS로 바뀐 상태인데 현재는 두가지를 혼용해서 사용하고 있다.</p>
</blockquote>
<h3 id="공개키-암호화-방식"><a href="#공개키-암호화-방식" class="headerlink" title="공개키 암호화 방식"></a>공개키 암호화 방식</h3><p>공개키 암호화 방식은 공개키와 개인키를 사용하는 방식이다.</p>
<ul>
<li>공개키는 모두에게 공개해서 사용하는 키이다.</li>
<li>개인키는 서버에서만 가지고 있는 키이다.</li>
</ul>
<h3 id="예시"><a href="#예시" class="headerlink" title="예시"></a>예시</h3><ol>
<li>A 서버가 HTTPS 적용하기 위해 공개키와 개인키를 만든다.</li>
<li>CA 기업을 선택하고 해당 CA 기업에게 공개키 관리를 부탁하며 계약한다.</li>
<li>CA 기업은 <strong>기업명, A 서버 공개키, 공개키 암호화 방법</strong>을 담은 인증서를 만들고 해당 인증서를 CA 기업의 개인키로 암호화해서 A 서버에게 제공한다.</li>
<li>A 서버는 CA 기업의 개인키로 암호화된 인증서를 가지고서 클라이언트로부터 HTTPS이 아닌 요청이 오면 암호화된 인증서를 건네준다.</li>
<li>클라이언트는 예를 들어 <code>main.html</code> 을 서버에 요청했다고 하자. HTTPS 요청이 아니기 때문에 CA기업의 개인키로 암호화된 인증서를 받게된다.<ul>
<li>CA 기업의 공개키는 모두에게 공개되므로 클라이언트는 인증서를 공개키로 복호화하여 A 서버 공개키를 얻었다.</li>
</ul>
</li>
<li>클라이언트가 A 서버에 요청을 보낼 때 텍스트를 공개키로 암호화하며 HTTPS 요청을 보낸다.</li>
<li>서버는 개인키로 암호화된 텍스트를 복호화하여 데이터를 해석하고 응답을 개인키로 암호화하여 클라이언트에게 보낸다.</li>
<li>클라이언트는 다시 공개키로 응답을 해석하여 해당 서버가 인증된 서버임을 알 수 있다.</li>
</ol>
<aside>
📌 단, 신뢰받는 CA 기업이 아닌 자체 인증서를 발급한 경우 브라우저에서 `주의 요함`, `안전하지 않는 사이트`같은 주의를 받게된다.

</aside>

<h2 id="📚-참고"><a href="#📚-참고" class="headerlink" title="📚 참고"></a>📚 참고</h2><ul>
<li><p><a target="_blank" rel="noopener" href="https://velog.io/@jiseung/02-what-is-http#http3-2021">Velog&#x2F;@Jiseung</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/ko/docs/Web/HTTP">[MDN] HTTP</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://gyoogle.dev/blog/computer-science/network/HTTP%20&%20HTTPS.html">Tech Interview</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://yozm.wishket.com/magazine/detail/1686/?utm_source=stibee&utm_medium=email&utm_campaign=newsletter_yozm&utm_content=contents">웹 개발자라면 알고 있어야 할 HTTP의 진화 과정 | 요즘IT</a></p>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/11/09/CS/HTTP%EC%9D%98-%EC%97%AD%EC%82%AC%EC%99%80-HTTPS/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/archives/page/3/"
                aria-label="최근 포스트"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>최근 포스트</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/archives/page/5/"
                aria-label="이전 포스트"
            >
              <span>이전 포스트</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 4 of 13</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 loco9939. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">loco9939</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-wcqoifde3xwnijjx9xd2irfrrksglozwqpgaqfvxoft22e4znrk7db1xxnsx.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
