
<!DOCTYPE html>
<html lang="ko">
    <link rel="canonical" href="https://loco9939.github.io/2022/08/23/javascript/클로저/"/>

<head>
    <meta name="google-site-verification" content=<content></content>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Loco&#39;s Dev Blog">
    <title>클로저 - Loco&#39;s Dev Blog</title>
    <meta name="author" content="loco9939">
    
        <meta name="keywords" content="loco9939,javascript,">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"loco9939","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"articleBody":"클로저함수를 일급 객체로 취급하는 함수형 프로그래밍 언어(하스켈, 리스프, 얼랭, 스칼라 등)에서 사용되는 중요한 특성이다.\n클로저는 자바스크립트의 고유의 개념이 아니므로 ECMAScript 사양에 등장하지 않는다.\n\n클로저는 함수와 그 함수가 선언된 렉시컬 환경과의 조합이다.\n\n렉시컬 스코프자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 함수를 어디에 정의했는지에 따라 상위 스코프를 결정한다. 이를 렉시컬 스코프라고 한다.\n12345678910111213const x = 1;function foo() &#123;  const x = 10;  bar();&#125;function bar() &#123;  console.log(x);&#125;foo(); // ?bar(); // ?\n\nfoo함수와 bar함수 모두 전역에서 정의된 전역 함수이다. 함수의 상위 스코프는 함수를 어디서 정의했는지에 따라 결정되니 두 함수의 상위 스코프는 전역 스코프이다. 이는 정적이며 변하지 않는다.\n즉, 함수의 상위 스코프를 결정한다는 것은 함수 렉시컬 환경의 외부 렉시컬 환경에 대한 참조에 저장할 값이 바로 상위 렉시컬 환경에 대한 참조이며 이것이 상위 스코프이다.\n함수 객체의 내부슬롯 [[Environment]]함수는 자신의 내부슬롯 [[Environment]] 에 자신이 정의된 환경, 상위 스코프의 참조를 저장한다.\n즉, 함수 정의가 평가되어 함수 객체를 생성할 때 자신이 정의된 환경에 의해 결정된 상위 스코프의 참조를 함수 객체 자신의 내부 슬롯 [[Environment]] 에 저장한다.\n이 때, 내부 슬롯 [[Environment]] 에 저장된 상위 스코프의 참조는 현재 실행중인 실행 컨텍스트의 렉시컬 환경을 가리킨다.\n왜냐하면, 함수 정의가 평가되어 함수 객체를 생성하는 시점은 함수가 정의된 환경 즉, 상위함수나 전역 코드가 평가 또는 실행되고 있는 시점이므로 이 때 실행중인 실행 컨텍스트는 상위 함수 또는 전역 코드의 실행 컨텍스트 이기 때문이다.\n이해 중요\n따라서 함수 객체의 내부 슬롯 [[Environment]] 에 저장된 현재 실행중인 실행 컨텍스트의 렉시컬 환경의 참조가 상위 스코프이다. 또한 자신이 호출되었을 때 생성될 함수 렉시컬 환경의 “외부 렉시컬 환경에 대한 참조”에 저장될 참조값이 현재 실행중인 실행 컨텍스트의 렉시컬 환경의 참조이다.\n클로저와 렉시컬 환경12345678910111213141516const x = 1;// ①function outer() &#123;  const x = 10;  const inner = function () &#123;    console.log(x);  &#125;; // ②  return inner;&#125;// outer 함수를 호출하면 중첩 함수 inner를 반환한다.// 그리고 outer 함수의 실행 컨텍스트는 실행 컨텍스트 스택에서 팝되어 제거된다.// 아직 중첩함수 호출도 안해봤는데 외부함수가 생명주기 다한 것이다.const innerFunc = outer(); // ③innerFunc(); // ④ 10\n\nouter 함수 호출하면 inner 함수 반환하고 생명주기를 마감한다. 즉 outer 함수의 실행이 종료되면 outer함수의 실행 컨텍스트가 pop 되어 제거된다. 이 때 outer 함수의 지역변수 x와 값 10을 저장하고 있던 outer 함수의 실행컨텍스트가 제거되어서 이들 또한 생명주기를 마감한다. 따라서 outer 함수의 지역변수 x는 더 이상 유효하지 않게되어 접근할 방법이 없어보인다.\n하지만 위 코드의 결과 outer 함수의 지역 변수 x의 값인 10이 출력되는 것을 볼 수 있다.마치 제거된 지역변수 x가 되살아 난 것 처럼 말이다.\n이처럼 외부함수보다 중첩함수가 더 오래 유지되는 경우 중첩 함수는 이미 생명주기가 종료한 외부함수의 변수를 참조할 수 있다. 이러한 중첩함수를 클로저라고 한다.\n모든 함수는 클로저다?이론적으로 자바스크립트의 모든 함수는 상위 스코프를 기억하므로 모든 함수는 클로저라고 볼 수 있다.\n하지만 다음 조건을 만족하는 경우에만 클로저라고 한다.\n\n중첩함수가 상위 스코프의 식별자를 참조하는 경우여야한다.\n중첩함수가 외부함수보다 생명주기가 더 길어야한다.\n\n클로저의 활용클로저는 상태를 안전하게 변경하고 유지하기 위해 사용한다. 다시 말해 상태가 의도치 않게 변경되지 않도록 상태를 안전하게 은닉하고 특정 함수에게만 상태 변경을 허용하기 위해 사용한다.\n123456789101112131415// 카운트 상태 변경 함수const increase = (function () &#123;  // 카운트 상태 변수  let num = 0;  // 클로저  return function () &#123;    // 카운트 상태를 1만큼 증가 시킨다.    return ++num;  &#125;;&#125;)();console.log(increase()); // 1console.log(increase()); // 2console.log(increase()); // 3\n\n위 코드 실행되면 즉시실행함수가 호출되고 즉시실행함수가 반환한 함수가 increase 식별자에 할당된다. increase 변수에 할당된 함수는 자신이 정의된 위치에 의해 결정된 상위 스코프인 즉시실행함수의 렉시컬환경을 기억하는 클로저이다.\n\nnum 변수는 외부에서 접근할 수 없다\nincrease 식별자에 할당된 클로저함수를 통해서만 참조 가능하다.\n\n캡슐화와 정보 은닉캡슐화는 객체의 상태를 나타내는 프로퍼티와 프로퍼티를 참조하고 조작할 수 있는 동작인 메서드를 하나로 묶는 것을 말한다.\n캡슐화는 객체의 특정 프로퍼티나 메소드를 감출 목적으로 사용하는데 이를 정보은닉이라고 한다. 이를 통해 외부에 부적절한 접근을 막아 객체의 상태가 변경되는것을 방지한다.\n⇒ 객체간의 상호 의존성 즉, 결합도를 낮추는 효과가 있다.\n123456789101112131415161718192021222324252627const Person = (function () &#123;  let _age = 0; // private  // 생성자 함수  function Person(name, age) &#123;    this.name = name; // public    _age = age;  &#125;  // 프로토타입 메서드  Person.prototype.sayHi = function () &#123;    console.log(`Hi! My name is $&#123;this.name&#125;. I am $&#123;_age&#125;.`);  &#125;;  // 생성자 함수를 반환  return Person;&#125;)();const me = new Person(&quot;Lee&quot;, 20);me.sayHi(); // Hi! My name is Lee. I am 20.console.log(me.name); // Leeconsole.log(me._age); // undefinedconst you = new Person(&quot;Kim&quot;, 30);you.sayHi(); // Hi! My name is Kim. I am 30.console.log(you.name); // Kimconsole.log(you._age); // undefined\n\n\n즉시실행함수가 반환하는 Person 생성자함수와 프로토타입 메서드는 즉시실행함수가 종료된 후 호출되고 각각 즉시실행함수의 자유변수 _age를 참조하고 있으므로 이들은 클로저이다.\n\n\n💡 생성자함수가 평가되어 함수객체를 생성할 때 프로토타입도 더불어 생성된다.\n\n\n\n하지만 위 코드의 문제점은 Person 생성자 함수가 여러개의 인스턴스를 생성할 경우 _age 변수의 상태가 유지 되지 않는다.\n12345678const me = new Person(&quot;Lee&quot;, 20);me.sayHi(); // Hi! My name is Lee. I am 20.const you = new Person(&quot;Kim&quot;, 30);you.sayHi(); // Hi! My name is Kim. I am 30.// _age 변수 값이 변경된다!me.sayHi(); // Hi! My name is Lee. I am 30.\n\n이는 Person.prototype.sayHi 메서드가 단 한번 생성되는 클로저이기 때문이다. 따라서 Person 생성자 함수가 생성한 모든 인스턴스가 상속을 통해 호출할 수 있는 Person.prototype.sayHi 메서드의 상위 스코프는 어떤 인스턴스를 호출하더라도 하나의 동일한 상위 스코프를 사용하여 _age 변수의 상태가 유지되지 않는다.\n즉, 여러개의 인스턴스를 만들기에는 클래스가 더 적합하다. 다음 시간에는 클래스를 배워보자.\n","dateCreated":"2022-08-23T17:53:41+09:00","dateModified":"2022-11-18T17:22:15+09:00","datePublished":"2022-08-23T17:53:41+09:00","description":"","headline":"클로저","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"},"publisher":{"@type":"Organization","name":"loco9939","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"url":"https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"}</script>
    <meta name="description" content="클로저함수를 일급 객체로 취급하는 함수형 프로그래밍 언어(하스켈, 리스프, 얼랭, 스칼라 등)에서 사용되는 중요한 특성이다. 클로저는 자바스크립트의 고유의 개념이 아니므로 ECMAScript 사양에 등장하지 않는다.  클로저는 함수와 그 함수가 선언된 렉시컬 환경과의 조합이다.  렉시컬 스코프자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 함수를 어디">
<meta property="og:type" content="blog">
<meta property="og:title" content="클로저">
<meta property="og:url" content="https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/index.html">
<meta property="og:site_name" content="Loco&#39;s Dev Blog">
<meta property="og:description" content="클로저함수를 일급 객체로 취급하는 함수형 프로그래밍 언어(하스켈, 리스프, 얼랭, 스칼라 등)에서 사용되는 중요한 특성이다. 클로저는 자바스크립트의 고유의 개념이 아니므로 ECMAScript 사양에 등장하지 않는다.  클로저는 함수와 그 함수가 선언된 렉시컬 환경과의 조합이다.  렉시컬 스코프자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 함수를 어디">
<meta property="og:locale" content="ko_KR">
<meta property="article:published_time" content="2022-08-23T08:53:41.000Z">
<meta property="article:modified_time" content="2022-11-18T08:22:15.507Z">
<meta property="article:author" content="loco9939">
<meta property="article:tag" content="loco9939">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-alaac2o0p8lb5n7mx8aazw1dzhwcsltexgjtf9twurzytkujqiefoq1soijy.min.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Loco&#39;s Dev Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="검색"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            클로저
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2022-08-23T17:53:41+09:00">
	
		    2022/08/23
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Javascript/">Javascript</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="클로저"><a href="#클로저" class="headerlink" title="클로저"></a>클로저</h1><p>함수를 일급 객체로 취급하는 함수형 프로그래밍 언어(하스켈, 리스프, 얼랭, 스칼라 등)에서 사용되는 중요한 특성이다.</p>
<p>클로저는 자바스크립트의 고유의 개념이 아니므로 ECMAScript 사양에 등장하지 않는다.</p>
<blockquote>
<p>클로저는 함수와 그 함수가 선언된 렉시컬 환경과의 조합이다.</p>
</blockquote>
<h1 id="렉시컬-스코프"><a href="#렉시컬-스코프" class="headerlink" title="렉시컬 스코프"></a>렉시컬 스코프</h1><p>자바스크립트 엔진은 함수를 어디서 호출했는지가 아니라 <strong>함수를 어디에 정의했는지에 따라 상위 스코프를 결정</strong>한다. 이를 렉시컬 스코프라고 한다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">10</span>;</span><br><span class="line">  <span class="title function_">bar</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">bar</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">foo</span>(); <span class="comment">// ?</span></span><br><span class="line"><span class="title function_">bar</span>(); <span class="comment">// ?</span></span><br></pre></td></tr></table></figure>

<p>foo함수와 bar함수 모두 전역에서 정의된 전역 함수이다. 함수의 상위 스코프는 <span style="color:red">함수를 어디서 정의했는지에 따라 결정되니</span> 두 함수의 상위 스코프는 전역 스코프이다. 이는 정적이며 변하지 않는다.</p>
<p>즉, 함수의 상위 스코프를 결정한다는 것은 함수 렉시컬 환경의 외부 렉시컬 환경에 대한 참조에 저장할 값이 바로 상위 렉시컬 환경에 대한 참조이며 이것이 상위 스코프이다.</p>
<h1 id="함수-객체의-내부슬롯-Environment"><a href="#함수-객체의-내부슬롯-Environment" class="headerlink" title="함수 객체의 내부슬롯 [[Environment]]"></a>함수 객체의 내부슬롯 [[Environment]]</h1><p>함수는 자신의 내부슬롯 [[Environment]] 에 자신이 정의된 환경, 상위 스코프의 참조를 저장한다.</p>
<p>즉, 함수 정의가 평가되어 함수 객체를 생성할 때 <strong>자신이 정의된 환경에 의해 결정된 상위 스코프의 참조</strong>를 함수 객체 자신의 내부 슬롯 [[Environment]] 에 저장한다.</p>
<p><strong>이 때, 내부 슬롯 [[Environment]] 에 저장된 상위 스코프의 참조는 <span style="color:red">현재 실행중인 실행 컨텍스트의 렉시컬 환경</span>을 가리킨다.</strong></p>
<p>왜냐하면, 함수 정의가 평가되어 함수 객체를 생성하는 시점은 함수가 정의된 환경 즉, 상위함수나 전역 코드가 평가 또는 실행되고 있는 시점이므로 이 때 실행중인 실행 컨텍스트는 상위 함수 또는 전역 코드의 실행 컨텍스트 이기 때문이다.</p>
<p><strong>이해 중요</strong></p>
<p><strong>따라서 함수 객체의 내부 슬롯 [[Environment]] 에 저장된 현재 실행중인 실행 컨텍스트의 렉시컬 환경의 참조가 상위 스코프이다. 또한 자신이 호출되었을 때 생성될 함수 렉시컬 환경의 “외부 렉시컬 환경에 대한 참조”에 저장될 참조값이 현재 실행중인 실행 컨텍스트의 렉시컬 환경의 참조이다.</strong></p>
<h1 id="클로저와-렉시컬-환경"><a href="#클로저와-렉시컬-환경" class="headerlink" title="클로저와 렉시컬 환경"></a>클로저와 렉시컬 환경</h1><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ①</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outer</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">const</span> inner = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br><span class="line">  &#125;; <span class="comment">// ②</span></span><br><span class="line">  <span class="keyword">return</span> inner;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// outer 함수를 호출하면 중첩 함수 inner를 반환한다.</span></span><br><span class="line"><span class="comment">// 그리고 outer 함수의 실행 컨텍스트는 실행 컨텍스트 스택에서 팝되어 제거된다.</span></span><br><span class="line"><span class="comment">// 아직 중첩함수 호출도 안해봤는데 외부함수가 생명주기 다한 것이다.</span></span><br><span class="line"><span class="keyword">const</span> innerFunc = <span class="title function_">outer</span>(); <span class="comment">// ③</span></span><br><span class="line"><span class="title function_">innerFunc</span>(); <span class="comment">// ④ 10</span></span><br></pre></td></tr></table></figure>

<p>outer 함수 호출하면 inner 함수 반환하고 생명주기를 마감한다. 즉 outer 함수의 실행이 종료되면 outer함수의 실행 컨텍스트가 pop 되어 제거된다. 이 때 outer 함수의 지역변수 x와 값 10을 저장하고 있던 outer 함수의 실행컨텍스트가 제거되어서 이들 또한 생명주기를 마감한다. 따라서 outer 함수의 지역변수 x는 더 이상 유효하지 않게되어 접근할 방법이 없어보인다.</p>
<p>하지만 위 코드의 결과 outer 함수의 지역 변수 x의 값인 10이 출력되는 것을 볼 수 있다.마치 제거된 지역변수 x가 되살아 난 것 처럼 말이다.</p>
<p>이처럼 <strong>외부함수보다 중첩함수가 더 오래 유지되는 경우 중첩 함수는 이미 생명주기가 종료한 외부함수의 변수를 참조할 수 있다. 이러한 중첩함수를 클로저</strong>라고 한다.</p>
<h1 id="모든-함수는-클로저다"><a href="#모든-함수는-클로저다" class="headerlink" title="모든 함수는 클로저다?"></a>모든 함수는 클로저다?</h1><p>이론적으로 자바스크립트의 모든 함수는 상위 스코프를 기억하므로 모든 함수는 클로저라고 볼 수 있다.</p>
<p>하지만 다음 조건을 만족하는 경우에만 클로저라고 한다.</p>
<ul>
<li>중첩함수가 상위 스코프의 식별자를 참조하는 경우여야한다.</li>
<li>중첩함수가 외부함수보다 생명주기가 더 길어야한다.</li>
</ul>
<h1 id="클로저의-활용"><a href="#클로저의-활용" class="headerlink" title="클로저의 활용"></a>클로저의 활용</h1><p><strong>클로저는 상태를 안전하게 변경하고 유지하기 위해 사용한다.</strong> 다시 말해 <strong>상태가 의도치 않게 변경되지 않도록 상태를 안전하게 은닉</strong>하고 <strong>특정 함수에게만 상태 변경을 허용</strong>하기 위해 사용한다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 카운트 상태 변경 함수</span></span><br><span class="line"><span class="keyword">const</span> increase = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 카운트 상태 변수</span></span><br><span class="line">  <span class="keyword">let</span> num = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 클로저</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 카운트 상태를 1만큼 증가 시킨다.</span></span><br><span class="line">    <span class="keyword">return</span> ++num;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">increase</span>()); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">increase</span>()); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">increase</span>()); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>위 코드 실행되면 즉시실행함수가 호출되고 즉시실행함수가 반환한 함수가 increase 식별자에 할당된다. increase 변수에 할당된 함수는 자신이 정의된 위치에 의해 결정된 상위 스코프인 즉시실행함수의 렉시컬환경을 기억하는 클로저이다.</p>
<ul>
<li>num 변수는 외부에서 접근할 수 없다</li>
<li>increase 식별자에 할당된 클로저함수를 통해서만 참조 가능하다.</li>
</ul>
<h1 id="캡슐화와-정보-은닉"><a href="#캡슐화와-정보-은닉" class="headerlink" title="캡슐화와 정보 은닉"></a>캡슐화와 정보 은닉</h1><p>캡슐화는 객체의 상태를 나타내는 프로퍼티와 프로퍼티를 참조하고 조작할 수 있는 동작인 메서드를 하나로 묶는 것을 말한다.</p>
<p>캡슐화는 객체의 특정 프로퍼티나 메소드를 감출 목적으로 사용하는데 이를 정보은닉이라고 한다. 이를 통해 외부에 부적절한 접근을 막아 객체의 상태가 변경되는것을 방지한다.</p>
<p>⇒ <strong>객체간의 상호 의존성 즉, 결합도를 낮추는 효과가 있다.</strong></p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">Person</span> = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> _age = <span class="number">0</span>; <span class="comment">// private</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 생성자 함수</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = name; <span class="comment">// public</span></span><br><span class="line">    _age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 프로토타입 메서드</span></span><br><span class="line">  <span class="title class_">Person</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">sayHi</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hi! My name is <span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>. I am <span class="subst">$&#123;_age&#125;</span>.`</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 생성자 함수를 반환</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Person</span>;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> me = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lee&quot;</span>, <span class="number">20</span>);</span><br><span class="line">me.<span class="title function_">sayHi</span>(); <span class="comment">// Hi! My name is Lee. I am 20.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(me.<span class="property">name</span>); <span class="comment">// Lee</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(me.<span class="property">_age</span>); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> you = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Kim&quot;</span>, <span class="number">30</span>);</span><br><span class="line">you.<span class="title function_">sayHi</span>(); <span class="comment">// Hi! My name is Kim. I am 30.</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(you.<span class="property">name</span>); <span class="comment">// Kim</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(you.<span class="property">_age</span>); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>

<ul>
<li>즉시실행함수가 반환하는 Person 생성자함수와 프로토타입 메서드는 즉시실행함수가 종료된 후 호출되고 각각 즉시실행함수의 자유변수 _age를 참조하고 있으므로 이들은 클로저이다.</li>
</ul>
<aside>
💡 생성자함수가 평가되어 함수객체를 생성할 때 프로토타입도 더불어 생성된다.

</aside>

<p>하지만 위 코드의 문제점은 Person 생성자 함수가 여러개의 인스턴스를 생성할 경우 _age 변수의 상태가 유지 되지 않는다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> me = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Lee&quot;</span>, <span class="number">20</span>);</span><br><span class="line">me.<span class="title function_">sayHi</span>(); <span class="comment">// Hi! My name is Lee. I am 20.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> you = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;Kim&quot;</span>, <span class="number">30</span>);</span><br><span class="line">you.<span class="title function_">sayHi</span>(); <span class="comment">// Hi! My name is Kim. I am 30.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// _age 변수 값이 변경된다!</span></span><br><span class="line">me.<span class="title function_">sayHi</span>(); <span class="comment">// Hi! My name is Lee. I am 30.</span></span><br></pre></td></tr></table></figure>

<p>이는 Person.prototype.sayHi 메서드가 단 한번 생성되는 클로저이기 때문이다. 따라서 Person 생성자 함수가 생성한 모든 인스턴스가 상속을 통해 호출할 수 있는 Person.prototype.sayHi 메서드의 상위 스코프는 어떤 인스턴스를 호출하더라도 <strong>하나의 동일한 상위 스코프를 사용</strong>하여 _age 변수의 상태가 유지되지 않는다.</p>
<p>즉, 여러개의 인스턴스를 만들기에는 클래스가 더 적합하다. 다음 시간에는 클래스를 배워보자.</p>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2022/08/24/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B3/"
                    data-tooltip="클래스"
                    aria-label="이전: 클래스"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2022/08/22/Javascript/%E1%84%89%E1%85%B5%E1%86%AF%E1%84%92%E1%85%A2%E1%86%BC%E1%84%8F%E1%85%A5%E1%86%AB%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3/"
                    data-tooltip="실행컨텍스트"
                    aria-label="다음: 실행컨텍스트"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 loco9939. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2022/08/24/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A2%E1%84%89%E1%85%B3/"
                    data-tooltip="클래스"
                    aria-label="이전: 클래스"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">이전</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2022/08/22/Javascript/%E1%84%89%E1%85%B5%E1%86%AF%E1%84%92%E1%85%A2%E1%86%BC%E1%84%8F%E1%85%A5%E1%86%AB%E1%84%90%E1%85%A6%E1%86%A8%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3/"
                    data-tooltip="실행컨텍스트"
                    aria-label="다음: 실행컨텍스트"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">다음</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="이 포스트 공유하기"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                    title="Facebook에 공유하기"
                    aria-label="Facebook에 공유하기"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                    title="Twitter에 공유하기"
                    aria-label="Twitter에 공유하기"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                    title="Google+에 공유하기"
                    aria-label="Google+에 공유하기"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="맨 위로">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                        aria-label="Facebook에 공유하기"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Facebook에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                        aria-label="Twitter에 공유하기"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Twitter에 공유하기</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://loco9939.github.io/2022/08/23/Javascript/%E1%84%8F%E1%85%B3%E1%86%AF%E1%84%85%E1%85%A9%E1%84%8C%E1%85%A5/"
                        aria-label="Google+에 공유하기"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Google+에 공유하기</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">loco9939</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-wcqoifde3xwnijjx9xd2irfrrksglozwqpgaqfvxoft22e4znrk7db1xxnsx.min.js"></script>

<!--SCRIPTS END-->


    




    </body>
</html>
