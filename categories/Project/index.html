
<!DOCTYPE html>
<html lang="ko">
    <link rel="canonical" href="https://loco9939.github.io/categories/project/"/>

<head>
    <meta name="google-site-verification" content=<content></content>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Loco&#39;s Dev Blog">
    <title>카테고리: Project - Loco&#39;s Dev Blog</title>
    <meta name="author" content="loco9939">
    
        <meta name="keywords" content="loco9939,javascript,">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Loco&#39;s Dev Blog">
<meta property="og:url" content="https://loco9939.github.io/categories/Project/index.html">
<meta property="og:site_name" content="Loco&#39;s Dev Blog">
<meta property="og:locale" content="ko_KR">
<meta property="article:author" content="loco9939">
<meta property="article:tag" content="loco9939">
<meta property="article:tag" content="javascript">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-alaac2o0p8lb5n7mx8aazw1dzhwcsltexgjtf9twurzytkujqiefoq1soijy.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Loco&#39;s Dev Blog
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="링크 열기: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="카테고리"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">카테고리</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="태그"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">태그</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="아카이브"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">아카이브</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="검색"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">검색</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/20/Project/holymoly/holymoly%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%ED%9A%8C%EA%B3%A0/"
                            aria-label=": holymoly 프로젝트 회고"
                        >
                            holymoly 프로젝트 회고
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-20T21:13:54+09:00">
	
		    2022/10/20
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="프로젝트를-마치며…"><a href="#프로젝트를-마치며…" class="headerlink" title="프로젝트를 마치며…"></a>프로젝트를 마치며…</h1><ul>
<li><p>기획을 할 때, 기술적으로 어떻게 풀어나갈지 기술기획을 꼼꼼히 하지 못한 것이 아쉬움</p>
</li>
<li><p>이 때, 기술기획이 제대로 안이루어져서 CBD 라이브러리를 사용하면서 앞으로 겪게될 문제를 개발 과정에 파악하게 되어서 난감하였다. ex) 지역 상태 관리 어려운 점…</p>
</li>
<li><p>노션으로 일정관리와 문서화를 템플릿을 적극 활용하여 일관성있게 해야겠다.</p>
</li>
<li><p>라우터가 App에 종속되어 있는 것이 아니라 render 함수처럼 따로 분리되도록 하고 싶었는데, 그러기 위해서구조를 대폭 수정해야하여 시간적 어려움이 있어 아쉬웠다.</p>
</li>
<li><p>매번 새로운 지식을 얻어감에 즐거움을 느꼈다. 공식문서 읽는 것은 아직 어렵지만, 예제를 따라해보고 이해한 후 공식문서 읽으면 잘 읽히는 것을 알게되었다.</p>
</li>
<li><p>이전 프로젝트 때 했던 실수를 어느정도 개선해나가며 진행할 수 있어서 좋았다. ex) this 바인딩</p>
</li>
<li><p>해결책을 생각해낼 때 과연 이게 진짜 해결책인지, 회피인지 한번 더 생각해보는 안목이 생겼다.</p>
</li>
<li><p>어렵고 막히는 부분이 있을 때 팀원에게 물어보면서 같이 해결해나갈 수 있어 든든하고 즐거웠다.</p>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/20/Project/holymoly/holymoly%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%ED%9A%8C%EA%B3%A0/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/18/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%ED%8C%8C%EC%9D%BC%20%EA%B5%AC%EB%B6%84%20%EC%8B%9C%EB%8F%84/"
                            aria-label=": 라우터 파일 구분 시도"
                        >
                            라우터 파일 구분 시도
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-18T22:38:09+09:00">
	
		    2022/10/18
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-라우터-파일-구분을-해주자"><a href="#1-라우터-파일-구분을-해주자" class="headerlink" title="1. 라우터 파일 구분을 해주자."></a>1. 라우터 파일 구분을 해주자.</h1><h2 id="왜-라우터를-모듈로-빼서-관리를-해줘야-하는가"><a href="#왜-라우터를-모듈로-빼서-관리를-해줘야-하는가" class="headerlink" title="왜 라우터를 모듈로 빼서 관리를 해줘야 하는가?"></a>왜 라우터를 모듈로 빼서 관리를 해줘야 하는가?</h2><p>App 컴포넌트가 다른 컴포넌트 정보를 모아서 렌더에게 이렇게 그려달라는 정보를 담고 있는데, App 에서 path에 맞게 컴포넌트를 지정해주는 router 메서드가 같이 있어도 논리가 맞지 않는가?</p>
<p>라우터가 하는 일은 path를 인수로 받으면 history API를 설정해주고, path에 맞는 컴포넌트를 반환해주는 역할을 한다.</p>
<p><strong>이 역할을 하는 라우터를 App 컴포넌트의 프로퍼티 메서드로 종속 시키는 것이 맞는가?</strong></p>
<p>내 생각에는 데이터가 바뀔 때 화면 렌더링에 영향을 주는 데이터를 상태로 관리 해야하므로, path가 바뀔 때, 컴포넌트가 바뀌니 path든 component든 상태로 가져야 한다.</p>
<p><strong>즉, App도 컴포넌트이므로 그려지는데 필요한 정보를 담고 있기만 하면 된다.</strong></p>
<ul>
<li>라우터에서 렌더링을 호출하면 App의 domStr이 새로 그려지게되는데 이때, Page 또는 Path를 확인하여 컴포넌트를 그려줘야한다.</li>
<li>그런데 라우터함수가 렌더만 해주는데 상태를 변경해주지 않고 어떻게 그려주지?<br>⇒ 라우터 함수가 Page를 반환하고 그 페이지를 App의 domStr에서 받아서 그려주기로 해보자.<ul>
<li>위의 것이 될까? App에서 처음 호출될 때는 return 값으로 Page를 넘겨줄 수 있겠지</li>
<li>하지만 이벤트 발생하거나 서버에 요청으로 라우터 변경되었을 때, router가 호출되는데, 그 때는 반환만 해주고 렌더링을 해주고 있지 않아서 변경되지 않을 것이다.</li>
<li>그렇다고 router에 렌더링을 넣어준다고 하면 App의 domStr을 호출하여 새로 그려줄텐데… 무엇을 기준으로 그려주는 것인가? router에서 받은 path를 기준으로 그 path에 맞는 컴포넌트로 그려주는데 이것을 App에서 어떻게 알 수 있나?</li>
</ul>
</li>
</ul>
<p><strong>결론</strong></p>
<p>이를 해결하기 위해서는 기존의 App 컴포넌트에서 setState로 render를 시켜주는 구조를 바꾸고 App에서 render를 해주고 router에서도 render를 해주는 구조로 바꿔줘야한다.</p>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>오늘은 라우터를 파일로 분리하려는 시도와 리팩터링을 하면서 공부를 했다.</p>
<p>내일은 GCP로 배포하는 법을 공부해서 배포를 해보려고 한다.</p>
<p>내일 배포와 발표준비를 마치면 이제 자바스크립트 수업도 모두 끝이난다. 2달 반 정도의 시간이 참 빨리도 지나간 것 같다.</p>
<p>역시 자바스크립트가 동료들과 페어로 하는 수업이 많아서 더 재밌게 느껴진 것 같다.</p>
<p>앞으로 다가올 리액트 수업 때도 열심히 듣기 위해 만반의 준비를 해야겠다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/18/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%ED%8C%8C%EC%9D%BC%20%EA%B5%AC%EB%B6%84%20%EC%8B%9C%EB%8F%84/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/17/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%EA%B5%AC%ED%98%84/"
                            aria-label=": 라우터 구현"
                        >
                            라우터 구현
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-17T22:29:58+09:00">
	
		    2022/10/17
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-회원가입-로직-구현"><a href="#1-회원가입-로직-구현" class="headerlink" title="1. 회원가입 로직 구현"></a>1. 회원가입 로직 구현</h1><p>회원가입 페이지의 input값과 유효성 검사에 따라 에러메세지를 보여줘야 하므로 이를 상태로 관리해줘야한다.</p>
<p>상태 변경함수와 상태를 props로 전달해준다. 유효성 검사 로직을 true, false 값을 구현하는데 헷갈렸다.</p>
<h2 id="Lodash-구현-실패…"><a href="#Lodash-구현-실패…" class="headerlink" title="Lodash 구현 실패…"></a>Lodash 구현 실패…</h2><p>페어 프로그래밍을 할 때는 lodash 잘 썼는데, server랑 연동을 하니 왜 lodash 안써지냐 ?</p>
<p>내일 해결하자.</p>
<h1 id="2-라우터-구현"><a href="#2-라우터-구현" class="headerlink" title="2. 라우터 구현"></a>2. 라우터 구현</h1><p>라우터 구현을 며칠째 쓰는지 모르겠다…</p>
<p>라우터를 제대로 이해해야만 했다…</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// App.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isSigned</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; data &#125; = <span class="keyword">await</span> axios.<span class="title function_">get</span>(<span class="string">&quot;/auth&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> data.<span class="property">success</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">component</span>: <span class="title class_">Home</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/rank&quot;</span>, <span class="attr">component</span>: <span class="title class_">Rank</span>, <span class="attr">guard</span>: isSigned, <span class="attr">redirectTo</span>: <span class="title class_">Signin</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/signin&quot;</span>, <span class="attr">component</span>: <span class="title class_">Signin</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/signup&quot;</span>, <span class="attr">component</span>: <span class="title class_">Signup</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/matching&quot;</span>, <span class="attr">component</span>: <span class="title class_">MatchingCards</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">App</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Components</span> &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="title function_">router</span>(<span class="params">path = <span class="variable language_">window</span>.location.pathname</span>) &#123;</span><br><span class="line">    <span class="comment">// header 에서 클릭이벤트로 href 를 받아서 path에 담는다.</span></span><br><span class="line">    <span class="keyword">const</span> route = routes.<span class="title function_">find</span>(<span class="function"><span class="params">route</span> =&gt;</span> route.<span class="property">path</span> === path);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// change url path</span></span><br><span class="line">    (<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">      !route.<span class="property">guard</span> || (<span class="keyword">await</span> route.<span class="title function_">guard</span>())</span><br><span class="line">        ? <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="title class_">Page</span>: route.<span class="property">component</span> &#125;)</span><br><span class="line">        : <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; <span class="title class_">Page</span>: route.<span class="property">redirectTo</span> &#125;);</span><br><span class="line">    &#125;)();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>“pjax 방식으로 라우터를 구현하기 위해서 서버와 도움이 필요하다”라는 말이 이제는 이해가 된다. ajax 방식은 url이 변경되지 않아 seo에 문제가 있어서 이를 해결하기 위해서 pushState를 통해 history API를 구현해준다.</p>
</li>
<li><p>그리고 router 함수는 path를 받아서 해당 path의 컴포넌트를 가지는 route를 찾아서 현재 페이지로 렌더링해준다.</p>
</li>
<li><p>이 때, routes 배열안의 어떤 라우터는 접근 권한이 필요한 라우터가 있는데, 이들한테는 guard라는 프로퍼티가 존재한다. 그러므로 router 함수에서도 guard라는 프로퍼티가 있을 때, 또 guard 프로퍼티의 값이 true, false냐에 따라 컴포넌트를 다르게 보여줘야하는 로직을 짜야한다.</p>
</li>
</ul>
<p>이 개념이 CSR(Client Side Rendering)이다. 서버에서는 다음과 같이 코드를 구현해주었다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">auth</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> accessToken = req.<span class="property">headers</span>.<span class="property">authorization</span> || req.<span class="property">cookies</span>.<span class="property">accessToken</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(accessToken, process.<span class="property">env</span>.<span class="property">JWT_SECRET_KEY</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`😀 사용자 인증 성공`</span>, decoded);</span><br><span class="line">    <span class="title function_">next</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;😱 사용자 인증 실패..&quot;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(accessToken);</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">redirect</span>(<span class="string">&quot;/signin&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">isSigned</span> = (<span class="params">req, res</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> accessToken = req.<span class="property">headers</span>.<span class="property">authorization</span> || req.<span class="property">cookies</span>.<span class="property">accessToken</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(accessToken, process.<span class="property">env</span>.<span class="property">JWT_SECRET_KEY</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`😀 사용자 인증 성공`</span>, decoded);</span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="attr">success</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&quot;😱 사용자 인증 실패..&quot;</span>);</span><br><span class="line">    res.<span class="title function_">send</span>(&#123; <span class="attr">success</span>: <span class="literal">false</span> &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// auth route</span></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/signin&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">sendFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./public/index.html&quot;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/auth&quot;</span>, isSigned);</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;*&quot;</span>, auth, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// auth 미들웨어</span></span><br><span class="line">  res.<span class="title function_">sendFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;./public/index.html&quot;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>서버에서는 모든 경로에서 get 요청이 들어오면 auth 함수의 내부의 로직을 기준으로 사용자가 JWT 토큰이 있는지 유무를 판단하여 결과를 반환한다. 이 결과에 따라 rootContainer를 응답으로 보내주고 클라이언트는 이를 받아서 조건에 맞게<strong>미리 구현해둔 router 함수</strong>로 화면에 렌더링을 해준다.</p>
</li>
<li><p>그리고 서버에서 또 다른 함수로 JWT 토큰 유무에 따라 성공, 실패 결과를 전달해줘야하므로 auth 와 별개인 isSignin() 함수를 만들어줬다.</p>
</li>
</ul>
<blockquote>
<p>우리는 이 부분에서 auth 라는 함수 하나로만 해결하려고 하다 보니 res.send로 오류를 보내면 &#x2F;rank URL로 직접 요청시 오류 페이지가 보이게 되고 redirect 를 해주자니 오류가 안보내져서 클라이언트에서 router 함수 로직을 구현할 수 없는 딜레마를 겪었다.</p>
</blockquote>
<p>그 결과 클라이언트의 isSigned 비동기 함수가 axios로 get 요청을 보내서 data(boolean)를 반환해준 값을 guard 프로퍼티에 등록해주었다.</p>
<p>이를 사용해 router 함수에서 로직을 구현해주었다.</p>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>오늘은 월요일이라서 그런지 머리도 잘 안돌아가고 주말에 푹 쉬어서 죄책감이 약간 들어서 자존감도 떨어지는 하루였다.</p>
<p>그래도 늘 이런 생각을 하면 달라지는 것은 없다. 이런 생각을 할 시간에 좀 더 연구하고 공부하는 게 나의 미래에 더 도움이 된다.</p>
<p>이제 미니 프로젝트 마감이 이번주 금요일로 다가왔으니 앞으로 며칠만 더 힘내서 열심히 공부하고 배운것을 꼼꼼하게 정리하도록 해야겠다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/17/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%EA%B5%AC%ED%98%84/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/17/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%ED%95%A8%EC%88%98%EC%99%80%20pushState,%20%EB%9E%AD%EC%BB%A4%20%EB%B3%B4%EC%97%AC%EC%A3%BC%EA%B8%B0/"
                            aria-label=": 라우터 함수와 pushState, 랭커 보여주기"
                        >
                            라우터 함수와 pushState, 랭커 보여주기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-17T22:29:58+09:00">
	
		    2022/10/17
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-router-함수와-pushState-메서드"><a href="#1-router-함수와-pushState-메서드" class="headerlink" title="1. router 함수와 pushState 메서드"></a>1. router 함수와 pushState 메서드</h1><p>router 함수가 route의 guard 프로퍼티를 통해 로그인한 사용자가 아니라면 &#x2F;rank 경로로 이동시 &#x2F;signin 경로로 이동하도록 구현을 해주었다.</p>
<p>이 때 발생한 문제가 화면 렌더링은 signin 컴포넌트로 변경되었지만 라우터는 이상하게 &#x2F; Home 컴포넌트가 그려지는 것이다.</p>
<p>문제가 어디서 발생하는지 찾아보니, 클릭 이벤트 발생할 때, router 함수가 호출되는데 이 때 상태로 관리하는 Page가 Home에서 변경되지 않는 문제였다.</p>
<p><strong>왜 이 경우에서만 변경되지 않는지에 대해서는 아직 파악하지 못했지만, 리팩터링 시간을 가져서 파악해보도록 해야겠다.</strong></p>
<h1 id="2-서버에-랭크-데이터를-보내고-랭커들을-랭크-페이지에-보여주자"><a href="#2-서버에-랭크-데이터를-보내고-랭커들을-랭크-페이지에-보여주자" class="headerlink" title="2. 서버에 랭크 데이터를 보내고 랭커들을 랭크 페이지에 보여주자"></a>2. 서버에 랭크 데이터를 보내고 랭커들을 랭크 페이지에 보여주자</h1><p>유저점수를 게시판에 보여주기 위해서 게임이 종료되었을 때, &#x2F;matching 경로로 post 요청을 보내서 record를 서버에 보내준다.</p>
<p>서버에서는 mongodb와 연결되어 있어 database에서 해당 유저의 이전 기록과 비교하여 더 빠른 기록으로 갱신해준다.</p>
<p>또한 rank 페이지를 누르거나 URL로 직접 요청할 때마다 데이터를 가져와서 보여줘야 하므로 router 함수 내부에서 &#x2F;ranker 경로로 get 요청을 보내서 데이터를 가져와야한다.</p>
<blockquote>
<p>isSignin 함수에서 &#x2F;auth 경로로 get 요청해서 guard 프로퍼티에 불리언 값을 저장한 것 처럼 &#x2F;rank 경로가 아닌 &#x2F;ranker 경로로 get 요청을 해야한다.</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;*&quot;</span>, auth, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">sendFile</span>(path.<span class="title function_">join</span>(__dirname, <span class="string">&quot;public/index.html&quot;</span>));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li>만약 &#x2F;rank 경로로 get 요청을 보내면, 위 단계와 겹치지 때문에 다른 경로로 설정을 해줘야 한다.</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/17/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%ED%95%A8%EC%88%98%EC%99%80%20pushState,%20%EB%9E%AD%EC%BB%A4%20%EB%B3%B4%EC%97%AC%EC%A3%BC%EA%B8%B0/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/14/Project/holymoly/CBD%20%EA%B5%AC%EC%A1%B0%20%EC%9D%B4%EB%B2%A4%ED%8A%B8%20%EB%93%B1%EB%A1%9D%20%EB%AC%B8%EC%A0%9C,%20JWT,%20.env/"
                            aria-label=": CBD 구조 이벤트 등록 문제, JWT, .env"
                        >
                            CBD 구조 이벤트 등록 문제, JWT, .env
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-14T22:10:39+09:00">
	
		    2022/10/14
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-CBD-구조의-이벤트-등록-문제"><a href="#1-CBD-구조의-이벤트-등록-문제" class="headerlink" title="1. CBD 구조의 이벤트 등록 문제"></a>1. CBD 구조의 이벤트 등록 문제</h1><p>현재 CBD의 구조 상 이벤트를 component를 호출할 때마다 이벤트 목록을 확인하여 이미 등록된 이벤트는 중복 등록되지 않도록 하고 있다.</p>
<p>그래서 효율적이라고 생각했다. 하지만 하위 컴포넌트에서 이벤트를 등록해주고 이벤트 핸들러 안에서 this.prop로 상태를 참조할 때, 이벤트가 등록될 시점을 참조하고 있어서 setState로 전역 상태를 변경시켜줘도 <strong>변경된 state를 이벤트 핸들러 내부에서 참조할 수 없는 문제점이 발생하였다.</strong></p>
<p>이러한 문제점을 해결하기 위해 구조를 바꿔보려는 시도를 하였지만, 프로젝트 시간 상 이는 감당하기 어려워 포기하였다.</p>
<h2 id="컴포넌트-호출-시마다-이벤트-제거와-새로-등록"><a href="#컴포넌트-호출-시마다-이벤트-제거와-새로-등록" class="headerlink" title="컴포넌트 호출 시마다 이벤트 제거와 새로 등록"></a>컴포넌트 호출 시마다 이벤트 제거와 새로 등록</h2><p>위 문제를 해결하기 위한 방법으로 컴포넌트를 호출할 때마다 등록된 이벤트를 제거하고 새로 이벤트를 등록하는 방법이 있다.</p>
<p>하지만 이벤트 핸들러를 **익명함수(() &#x3D;&gt; {})**를 통해 등록해주고 있었기 때문에 이를 전부 기명함수로 변경해줘야지만 <code>removeEventListener()</code> 메서드를 사용하여 등록된 이벤트를 제거할 수 있었다.</p>
<p>하지만, 기명함수로 바꿔서 <code>addEventListener()</code> 메서드로 등록을 해줘도 제대로 동작하지 않았고 이부분에서 많은 시간을 할애하였다. 지금 내가 해결하려는 문제가 작은 부분에 몰두해있는 것 같고 시간이 부족하여 방법을 바꾸기로 하였다.</p>
<p>그래서 현 구조에서 하위 컴포넌트의 상태를 관리해주기 위해 <strong>App 컴포넌트에 상태를 등록하여 전역 상태로 관리해주기로 결정</strong>하였다.</p>
<h2 id="전역-상태로-하위-컴포넌트-상태-관리"><a href="#전역-상태로-하위-컴포넌트-상태-관리" class="headerlink" title="전역 상태로 하위 컴포넌트 상태 관리"></a>전역 상태로 하위 컴포넌트 상태 관리</h2><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> openCard = [];</span><br><span class="line"><span class="keyword">let</span> matchedCard = [];</span><br><span class="line"><span class="keyword">let</span> isStarted = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">let</span> convertedTime = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MatchingCards</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Component</span> &#123;</span><br><span class="line">  <span class="title function_">addEvent</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">createEvent</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;click&quot;</span>,</span><br><span class="line">        <span class="attr">selector</span>: <span class="string">&quot;.start-button&quot;</span>,</span><br><span class="line">        <span class="attr">handler</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">start</span>();</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">createEvent</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;click&quot;</span>,</span><br><span class="line">        <span class="attr">selector</span>: <span class="string">&quot;.card-front&quot;</span>,</span><br><span class="line">        <span class="attr">handler</span>: <span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">if</span> (openCard.<span class="property">length</span> === <span class="number">2</span> || !isStarted) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">checkCard</span>(+e.<span class="property">target</span>.<span class="title function_">closest</span>(<span class="string">&quot;.cards&quot;</span>).<span class="property">dataset</span>.<span class="property">id</span>);</span><br><span class="line">          <span class="keyword">if</span> (openCard.<span class="property">length</span> === <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">shuffledNum</span>[openCard[<span class="number">0</span>] - <span class="number">1</span>] ===</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">shuffledNum</span>[openCard[<span class="number">1</span>] - <span class="number">1</span>]</span><br><span class="line">            ) &#123;</span><br><span class="line">              <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;HOLYMOLY&quot;</span>);</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">matchCard</span>(openCard);</span><br><span class="line">              matchedCard = [...matchedCard, ...openCard];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">              <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">resetOpenedCard</span>();</span><br><span class="line">            &#125;, <span class="number">500</span>);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">createEvent</span>(&#123;</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;click&quot;</span>,</span><br><span class="line">        <span class="attr">selector</span>: <span class="string">&quot;.reset-button&quot;</span>,</span><br><span class="line">        <span class="attr">handler</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">          openCard = [];</span><br><span class="line">          matchedCard = [];</span><br><span class="line">          <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">resetGame</span>();</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;),</span><br><span class="line">    ];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">domStr</span>(<span class="params"></span>) &#123;</span><br><span class="line">    openCard = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">openCard</span>;</span><br><span class="line">    isStarted = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">isStarted</span>;</span><br><span class="line">    convertedTime = <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">convertedTime</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;div class=&quot;container&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;h1 class=&quot;game-title&quot;&gt;MATCHING CARDS&lt;/h1&gt;</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;card-container&quot;&gt;</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;<span class="variable language_">this</span>.props.shuffledNum</span></span></span><br><span class="line"><span class="subst"><span class="string">          .map(</span></span></span><br><span class="line"><span class="subst"><span class="string">            (num, index) =&gt; <span class="string">`</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">          &lt;div class=&quot;cards <span class="subst">$&#123;</span></span></span></span></span><br><span class="line"><span class="subst"><span class="string"><span class="subst"><span class="string">            openCard.includes(index + <span class="number">1</span>) || matchedCard.includes(index + <span class="number">1</span>)</span></span></span></span></span><br><span class="line"><span class="subst"><span class="string"><span class="subst"><span class="string">              ? <span class="string">&quot;opened&quot;</span></span></span></span></span></span><br><span class="line"><span class="subst"><span class="string"><span class="subst"><span class="string">              : <span class="string">&quot;&quot;</span></span></span></span></span></span><br><span class="line"><span class="subst"><span class="string"><span class="subst"><span class="string">          &#125;</span>&quot; data-id=&quot;<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>&quot;&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">            &lt;div class=&quot;card-inner&quot;&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">              &lt;div class=&quot;card-front&quot;&gt;?&lt;/div&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">              &lt;div class=&quot;card-back&quot;&gt;<span class="subst">$&#123;num&#125;</span>&lt;/div&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">            &lt;/div&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">          &lt;/div&gt;</span></span></span></span><br><span class="line"><span class="string"><span class="subst"><span class="string">          `</span></span></span></span><br><span class="line"><span class="subst"><span class="string">          )</span></span></span><br><span class="line"><span class="subst"><span class="string">          .join(<span class="string">&quot;&quot;</span>)&#125;</span></span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;p class=&quot;result-message <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">        matchedCard.length === <span class="number">18</span> ? <span class="string">&quot;&quot;</span> : <span class="string">&quot;hidden&quot;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">      &#125;</span>&quot;&gt;Congratulations!&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;p class=&quot;display&quot;&gt;<span class="subst">$&#123;convertedTime&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;active-button-container&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;button class=&quot;start-button&quot;&gt;Start&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;button class=&quot;reset-button&quot;&gt;RESET&lt;/button&gt;</span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>전역 상태를 domStr()을 호출할 때 지역 변수에 할당하여 지역 변수를 가지고 이벤트 핸들러 내부에서 로직을 구현하였다.</p>
</li>
<li><p>이로 인한 문제점이 게임의 진행을 위해서는 렌더링을 해주기 위해서는 전역 상태를 setState로 변경해줘야 하고 지역 변수를 변경도 이벤트 핸들러 내부에서 따로 해줘야 하므로 같은 로직을 구현하는 상태를 2번 관리해줘야 하는 불편함이 생겼다.</p>
</li>
<li><p>이는 다음주에 리팩토링이 필요할 것으로 보인다.</p>
</li>
</ul>
<h1 id="2-로그인-기능-및-서버-구현"><a href="#2-로그인-기능-및-서버-구현" class="headerlink" title="2. 로그인 기능 및 서버 구현"></a>2. 로그인 기능 및 서버 구현</h1><h2 id="클라이언트-사이드"><a href="#클라이언트-사이드" class="headerlink" title="클라이언트 사이드"></a>클라이언트 사이드</h2><p>먼저 클라이언트는 로그인 페이지에서 input 값으로 요청을 보낸다. 이 때, 서버에 대한 요청을 <code>e.preventDefault()</code>로 막아주고 payload에다가 input 값을 담아서 axios로 post 요청을 보내주었다.(서버의 응답이 도착할 때 까지 await해주었다.)</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Signin.js</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="title function_">createEvent</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;submit&#x27;</span>,</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;.signin_info&#x27;</span>,</span><br><span class="line">  <span class="attr">handler</span>: <span class="keyword">async</span> e =&gt; &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> payload = [...<span class="keyword">new</span> <span class="title class_">FormData</span>(<span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.signin_info&#x27;</span>))].<span class="title function_">reduce</span>(</span><br><span class="line">      <span class="function">(<span class="params">obj, [key, value]</span>) =&gt;</span> ((obj[key] = value), obj),</span><br><span class="line">      &#123;&#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> &#123; <span class="attr">data</span>: user &#125; = <span class="keyword">await</span> axios.<span class="title function_">post</span>(<span class="string">&#x27;/signin&#x27;</span>, payload);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;😀 LOGIN SUCCESS!&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span> (user) <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">navigate</span>(<span class="string">&#x27;/&#x27;</span>, user);</span><br><span class="line">      <span class="variable language_">localStorage</span>.<span class="title function_">setItem</span>(<span class="string">&#x27;user&#x27;</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(user));</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;😱 LOGIN FAILURE..&#x27;</span>);</span><br><span class="line">      <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.error&#x27;</span>).<span class="property">classList</span>.<span class="title function_">remove</span>(<span class="string">&#x27;hidden&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;),</span><br><span class="line"></span><br><span class="line">  <span class="comment">// App.js</span></span><br><span class="line"><span class="title function_">navigate</span>(<span class="params">path, user = <span class="literal">null</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> === path) <span class="keyword">return</span>;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">history</span>.<span class="title function_">pushState</span>(<span class="literal">null</span>, <span class="literal">null</span>, path);</span><br><span class="line">  <span class="keyword">if</span> (user) <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; path, user &#125;);</span><br><span class="line">  <span class="keyword">else</span> <span class="variable language_">this</span>.<span class="title function_">setState</span>(&#123; path &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>서버에서 응답이 오면 navigate 함수에 메인페이지의 path와 응답으로 받은 데이터를 인자로 넘겨주었다. navigate 함수에서는 user가 있으면 user 상태를 변경하여 렌더링을 해주고 user가 없으면 path에 따라서만 라우터 변경과 렌더링을 해준다.</p>
<h2 id="서버-사이드"><a href="#서버-사이드" class="headerlink" title="서버 사이드"></a>서버 사이드</h2><p>서버에서는 해당 url로 post 요청이 왔을 때, 서버의 데이터에 해당 유저의 id, password를 비교하여 존재하는 유저인지 확인하여 JWT 토큰을 발행하여 쿠키에 담고 이 쿠키와 함께 유저의 닉네임을 응답으로 전달해주었다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// server.js</span></span><br><span class="line">app.<span class="title function_">post</span>(<span class="string">&quot;/signin&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; userid, password &#125; = req.<span class="property">body</span>;</span><br><span class="line">  <span class="comment">// userid 가 없거나, password가 없으면 띄워주는 에러메세지</span></span><br><span class="line">  <span class="keyword">if</span> (!userid || !password)</span><br><span class="line">    <span class="keyword">return</span> res</span><br><span class="line">      .<span class="title function_">status</span>(<span class="number">401</span>)</span><br><span class="line">      .<span class="title function_">send</span>(&#123; <span class="attr">error</span>: <span class="string">&quot;사용자 아이디 또는 패스워드가 전달되지 않았습니다.&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// users배열에 userid와 password가 일치하는 user있는지 find 해서 user에 담아준다.</span></span><br><span class="line">  <span class="keyword">const</span> user = users.<span class="title function_">find</span>(</span><br><span class="line">    <span class="function">(<span class="params">user</span>) =&gt;</span> user.<span class="property">userid</span> === userid &amp;&amp; user.<span class="property">password</span> === password</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 만약 위 검색에서 user가 담기지 않았다면 띄워주는 에러메세지</span></span><br><span class="line">  <span class="keyword">if</span> (!user)</span><br><span class="line">    <span class="keyword">return</span> res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">send</span>(&#123; <span class="attr">error</span>: <span class="string">&quot;등록되지 않은 사용자입니다.&quot;</span> &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 로그인 성공 시 user 가 있다면 jwt 토큰을 발급해서 response의 헤더에 쿠키에 담아서 보내줘야함.</span></span><br><span class="line">  <span class="keyword">const</span> accessToken = jwt.<span class="title function_">sign</span>(&#123; userid &#125;, process.<span class="property">env</span>.<span class="property">JWT_SECRET_KEY</span>, &#123;</span><br><span class="line">    <span class="attr">expiresIn</span>: <span class="string">&quot;1d&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">cookie</span>(<span class="string">&quot;accessToken&quot;</span>, accessToken, &#123;</span><br><span class="line">    <span class="attr">maxAge</span>: <span class="number">1000</span> * <span class="number">60</span> * <span class="number">60</span> * <span class="number">24</span> * <span class="number">7</span>, <span class="comment">// 7d</span></span><br><span class="line">    <span class="attr">httpOnly</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  res.<span class="title function_">send</span>(user.<span class="property">nickname</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="JWT-JSON-Web-Token-이란"><a href="#JWT-JSON-Web-Token-이란" class="headerlink" title="JWT(JSON Web Token)이란?"></a>JWT(JSON Web Token)이란?</h3><p>Access token을 이용한 서버 인증 방식 중 하나이다.</p>
<p>서버에 로그인 요청이 오면 사용자를 확인한 다음 JWT을 발행한다. 생성한 토큰을 클라이언트에게 쿠키를 통해 전달해주고 클라이언트는 쿠키에 이 토큰을 저장한다.</p>
<blockquote>
<p>토큰은 암호화되어있고 클라이언트에서는 암호화를 해석한 코드를 가지게 하면 안되며 암호를 해석하는 일은 서버에서만 해야한다.</p>
</blockquote>
<p>이제 토큰이 있는 사용자는 권한이 필요한 요청을 할 때마다 토큰을 header에 실어 서버에 보낸다.</p>
<p>서버는 토큰을 해석하여 로그인한 사용자인지를 판단하여 성공 및 실패 응답을 보내준다.</p>
<h3 id="env-이란"><a href="#env-이란" class="headerlink" title=".env 이란?"></a>.env 이란?</h3><p>.env 파일에는 개발을 하면서 중요한 정보들 특히, DB 관련 정보와 API_KEY 등의 정보를 보관하는 용도의 파일이다.</p>
<p>이러한 파일들은 git에 올리면 안되므로 gitignore를 해줘야한다.</p>
<ul>
<li>사용방법</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install dotenv  //다운로드</span><br><span class="line"></span><br><span class="line">require(&quot;dotenv&quot;).config(); //js 파일 상단에 적어주기</span><br></pre></td></tr></table></figure>

<ul>
<li>.env 파일은 최상위 루트에 생성해야한다.</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// .env</span></span><br><span class="line"><span class="variable constant_">PORT</span> = <span class="number">5010</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">const</span> port = process.<span class="property">env</span>.<span class="property">PORT</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>이러한 방식으로 사용한다.</li>
</ul>
<h1 id="3-로그인한-유저에게-인가"><a href="#3-로그인한-유저에게-인가" class="headerlink" title="3. 로그인한 유저에게 인가"></a>3. 로그인한 유저에게 인가</h1><p>로그인한 유저는 JWT를 쿠키에 가지고 있으므로 권한이 필요한 요청을 할 때, 즉 로그인한 사용자만 접근 가능한 페이지에 접근 요청을 서버에 보내면 서버는 JWT를 해석하여 로그인한 사용자인지 아닌지를 판단하여 그에 알맞은 응답을 보낸다.</p>
<p>그에 대한 로직은 다음과 같다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">auth</span> = (<span class="params">req, res, next</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 토큰이 리퀘스트의 Authorization 헤더를 통해 전달되면 req.headers.authorization으로 전달받고</span></span><br><span class="line"><span class="comment">     * 토큰이 쿠키를 통해 전달되면 req.cookies.accessToken으로 전달받는다.</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">const</span> accessToken = req.<span class="property">headers</span>.<span class="property">authorization</span> || req.<span class="property">cookies</span>.<span class="property">accessToken</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> decoded = jwt.<span class="title function_">verify</span>(accessToken, process.<span class="property">env</span>.<span class="property">JWT_SECRET_KEY</span>);</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`😀 사용자 인증 성공`</span>, decoded);</span><br><span class="line">      <span class="title function_">next</span>();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;😱 사용자 인증 실패..&#x27;</span>, e);</span><br><span class="line">      res.<span class="title function_">status</span>(<span class="number">401</span>).<span class="title function_">send</span>(&#123; <span class="attr">error</span>: <span class="string">&#x27;등록되지 않은 사용자입니다.&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    app.<span class="title function_">get</span>(<span class="string">&#x27;/rank&#x27;</span>, auth, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.<span class="title function_">send</span>(<span class="string">&#x27;로그인된 사용자입니다.&#x27;</span>);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>&#x2F;rank url로 요청이 오면 auth 함수를 실행한다.</p>
</li>
<li><p>auth 함수에서는 요청의 header나 쿠키에 권한이나 access token이 있는지를 확인하여 이를 해석하고 로그인 성공 실패 유무를 판단하여 응답을 보내준다.</p>
</li>
</ul>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>프로젝트를 시작하기 전에 기술적인 기획이 매우 중요하다는 것을 깨닫게 되었다. 하위 컴포넌트에서 지역 상태를 관리할 수 없을 것이라는 것을 구조를 보고 알 수 있었더라면, 그에 따라 구조를 개선한 후 프로젝트에 임할 수 있었을 텐데 중간에 큰 문제에 봉착하게 되니 머리가 텅 비워지는 상황을 경험하였다. 결국 시간을 고려하여 회피를 하게되는 문제점이 발생하게 되었다.</p>
<p>팀원 중 한명이 몸이 안좋아 2명이서 프로젝트를 진행하게 되었다. 3명이서 같이 나눠서 공부하고 공유하면 더욱 좋았을텐데 이점은 조금 아쉽다. 건강상의 이유로 참여하지 못한 팀원도 안쓰러웠다. 다음주에 쾌유해서 돌아오면 그동안 공부했던 것을 공유해주면서 배웠던 지식을 다시 정리해봐야겠다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/14/Project/holymoly/CBD%20%EA%B5%AC%EC%A1%B0%20%EC%9D%B4%EB%B2%A4%ED%8A%B8%20%EB%93%B1%EB%A1%9D%20%EB%AC%B8%EC%A0%9C,%20JWT,%20.env/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/13/Project/holymoly/CBD%20%EA%B8%B0%EB%B0%98%20%EB%9D%BC%EC%9A%B0%ED%84%B0%20%EA%B5%AC%ED%98%84/"
                            aria-label=": CBD 기반 라우터 구현"
                        >
                            CBD 기반 라우터 구현
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-13T21:57:19+09:00">
	
		    2022/10/13
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-CBD-기반-라우터-구현"><a href="#1-CBD-기반-라우터-구현" class="headerlink" title="1. CBD 기반 라우터 구현"></a>1. CBD 기반 라우터 구현</h1><p>CBD 라이브러리에서 컴포넌트가 바뀌었을 때, 라우터와 렌더링을 구현해주었다. 각 컴포넌트에서 click 이벤트가 발생하면 그 때의 a 태그의 href 값을 구하여 pushState 메서드로 history를 등록해주고 상태로도 할당해주어 렌더링을 발생시켰다.</p>
<p>즉, signin 클릭해서 click 이벤트 발생하면 history등록, setState로 상태 갱신을 해주었다.</p>
<p>그리고 App 컴포넌트에서는 popstate 이벤트를 등록하여 브라우저의 뒤로가기, 다음 버튼을 클릭했을 때, 해당 path 상태를 window.location.pathname으로 변경시켜줘서 라우터가 변경되면 렌더링 발생하는 기능도 구현하였다.</p>
<p>문제점은 구현을 하다가 작은 부분에서 막혀서 그 작은 부분을 해결하려고 몰두해있었던 점이 문제라고 생각한다. 작은 문제는 근본적인 문제가 아닌 경우가 많은 것 같다. 큰 문제를 해결하면 작은 문제는 알아서 해결될 수 있으니 큰 틀에서 생각하려고 해야겠다.</p>
<h2 id="1-click-이벤트-발생-시-gt-pushState-메서드로-history-관리-setState-메서드로-화면-재렌더링-발생"><a href="#1-click-이벤트-발생-시-gt-pushState-메서드로-history-관리-setState-메서드로-화면-재렌더링-발생" class="headerlink" title="1. click 이벤트 발생 시 -&gt; pushState 메서드로 history 관리 + setState 메서드로 화면 재렌더링 발생"></a>1. click 이벤트 발생 시 -&gt; pushState 메서드로 history 관리 + setState 메서드로 화면 재렌더링 발생</h2><h2 id="2-history-API-사용-시-gt-popstate-이벤트-핸들러-등록하여-setState-메서드로-path-상태를-window-location-pathname로-갱신"><a href="#2-history-API-사용-시-gt-popstate-이벤트-핸들러-등록하여-setState-메서드로-path-상태를-window-location-pathname로-갱신" class="headerlink" title="2. history API 사용 시 -&gt; popstate 이벤트 핸들러 등록하여 setState 메서드로 path 상태를 window.location.pathname로 갱신"></a>2. history API 사용 시 -&gt; popstate 이벤트 핸들러 등록하여 setState 메서드로 path 상태를 window.location.pathname로 갱신</h2><blockquote>
<p>popState 시 navigate() 함수 안에서 pushState() 해주고 있어서 더 이상 history API가 제대로 동작하지 않으므로.. 이를 확인하자.</p>
</blockquote>
<p>위 두가지 로직이 전부이다.</p>
<h1 id="2-MatchingCards-CBD-상태-관리"><a href="#2-MatchingCards-CBD-상태-관리" class="headerlink" title="2. MatchingCards CBD 상태 관리"></a>2. MatchingCards CBD 상태 관리</h1><p>매칭 카드 알고리즘 구현한 것을 CBD 구조에 맞게 상태로 관리해주었다. CBD 구조가 setState로 상태가 변경되서 렌더링 될 때, App 컴포넌트는 한번만 호출되지만, App 컴포넌트에서 다른 컴포넌트를 그려주는 역할을 하는 domStr() 메서드가 반복 호출 되므로, 이 때, 다른 컴포넌트(클래스)가 new 연산자로 호출되므로 컴포넌트가 새롭게 생성되어 지역 컴포넌트의 상태를 관리해주기가 까다로웠다.</p>
<p>이러한 문제를 해결하기 위해서는 CBD 구조를 개편해야만 했다. 하지만 프로젝트 시간동안에는 힘들것 같아서 상태관리를 App에서만 해주기로 하였다.</p>
<p>App 컴포넌트에서 상태를 등록하고 다른 컴포넌트로 보내줄 때, 아래와 같이 전달해준다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$&#123;<span class="keyword">new</span> <span class="title class_">Page</span>(&#123;</span><br><span class="line">  ...<span class="variable language_">this</span>.<span class="property">state</span>,</span><br><span class="line">  <span class="attr">navigate</span>: <span class="variable language_">this</span>.<span class="property">navigate</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>),</span><br><span class="line">  <span class="attr">checkCard</span>: <span class="variable language_">this</span>.<span class="property">checkCard</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>),</span><br><span class="line">&#125;).<span class="title function_">domStr</span>()&#125;</span><br></pre></td></tr></table></figure>

<p>상태를 받는 컴포넌트에서는 아래와 같이 props를 통해 받는다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$&#123;<span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">shuffledNum</span></span><br><span class="line">.<span class="title function_">map</span>(</span><br><span class="line">  <span class="function">(<span class="params">num, index</span>) =&gt;</span> <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div class=&quot;cards <span class="subst">$&#123;</span></span></span><br><span class="line"><span class="subst"><span class="string">  <span class="variable language_">this</span>.props.openCard[<span class="number">0</span>] === index + <span class="number">1</span> || <span class="variable language_">this</span>.props.openCard[<span class="number">1</span>] === index + <span class="number">1</span> ? <span class="string">&#x27;opened&#x27;</span> : <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="subst"><span class="string">&#125;</span>&quot; data-id=&quot;<span class="subst">$&#123;index + <span class="number">1</span>&#125;</span>&quot;&gt;</span></span><br></pre></td></tr></table></figure>

<p>단, props에서 받을 때, 메서드를 받게 된다면 this가 꼬일 수 있기 때문에 bind(this)를 사용하여 this를 일치시켜서 보내줘야 한다.</p>
<blockquote>
<p>만약 함수정의를 보내주는 것이 아닌 함수 호출값을 보내주고 싶다면 call(this, 인자) 이렇게 전달해줄 수 도 있다.</p>
</blockquote>
<h1 id="3-form-형식으로-서버에게-데이터-전송에-대해-알게된-점"><a href="#3-form-형식으로-서버에게-데이터-전송에-대해-알게된-점" class="headerlink" title="3. form 형식으로 서버에게 데이터 전송에 대해 알게된 점"></a>3. form 형식으로 서버에게 데이터 전송에 대해 알게된 점</h1><p>서버는 express를 사용하여 구현하였다.</p>
<p>로그인 기능 구현을 위해 form 형식의 input 값을 서버에 axios를 사용하여 보내주었다.</p>
<p>기본적으로 form 형식은 <code>x-www-form-urlencoded</code> 이런 형식의 데이터로 전달된다. 서버는 이런 데이터를 해석하기 위해 파싱을 <code>express.urlencoded(&#123;extended:true&#125;)</code> 메서드를 사용한다.</p>
<p>하지만 axios를 사용하면 클라이언트에서 데이터 요청을 json 형식으로 서버에 요청하기 때문에 서로 다른 형식으로 주고 받기 때문에 제대로 된 요청과 응답이 먹히지 않게 되었다.</p>
<p>이러한 문제를 해결하기 위해서 서버에서 <code>express.json()</code>메서드를 사용하여 json 형식의 데이터를 받아 파싱해주도록 하였다.</p>
<p>또한, 서버에서 request를 확인해보면 <code>&#39;content-type&#39;: &#39;application/json&#39;</code>인 것을 확인할 수 있었다.</p>
<p>심지어 axios 홈페이지에서도 json으로 직렬화된 데이터로 요청한다고 나와있다!</p>
<p>이런 부분은 눈으로 읽기는 읽었지만 그 배경에 대해 제대로 이해하지 못한 체로 읽었기 때문이다. 이렇게 하나 하나 배워가다 보면 배경지식도 넓게 쌓여서 새로운 지식을 배울 때에도 두려움이 적어질 것 같다.</p>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>이전에 라우터를 구현했던 방법은 상태를 관리하지 않고 했었기 때문에 쉬웠고 상태를 관리하면서 라우터를 구현하는 것은 머리가 복잡해지고 의욕이 떨어졌다.. 그래도 동기들에게 물어보면서 이번 기회에 제대로 알게 된 것 같아 기쁘다.</p>
<p>로그인 구현과 서버에 대해 스스로가 두려움을 느끼고 있는 것 같아 더 머리가 안돌아가는 것 같다.</p>
<p>최대한 이번기회에 로그인 회원가입에 대한 로직과 친숙해져서 다음 프로젝트 때에는 막힘없이 도전해보고 싶다!</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/13/Project/holymoly/CBD%20%EA%B8%B0%EB%B0%98%20%EB%9D%BC%EC%9A%B0%ED%84%B0%20%EA%B5%AC%ED%98%84/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/12/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%EA%B5%AC%ED%98%84%20(Custom%20Event)/"
                            aria-label=": 라우터 구현 (Custom Event)"
                        >
                            라우터 구현 (Custom Event)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-12T21:34:34+09:00">
	
		    2022/10/12
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="1-라우터-구현"><a href="#1-라우터-구현" class="headerlink" title="1. 라우터 구현"></a>1. 라우터 구현</h1><p>우선 컴포넌트마다 이벤트를 등록시켜주었다.</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">this</span>.<span class="title function_">createEvent</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;click&#x27;</span>,</span><br><span class="line">  <span class="attr">selector</span>: <span class="string">&#x27;.header-logo&#x27;</span>,</span><br><span class="line">  <span class="attr">handler</span>: <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    e.<span class="title function_">preventDefault</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> path = e.<span class="property">target</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;href&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span> === path) <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">history</span>.<span class="title function_">pushState</span>(<span class="literal">null</span>, <span class="literal">null</span>, path);</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="title function_">dispatchEvent</span>(</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">CustomEvent</span>(<span class="string">&#x27;home&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">detail</span>: path,</span><br><span class="line">      &#125;)</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>

<ul>
<li><p>라우터를 구현해주기 위해서 a태그의 href 속성값을 가져와서 path에 할당하고 window.history에 pushState 메서드를 사용하여 history 등록해주었다. history로 등록을 해줘야 브라우저 다음, 이전 버튼이 제대로 동작한다.</p>
</li>
<li><p>위 방식은 pjax 방식으로 클릭 이벤트를 캐치하고 preventDefault로 서버로 요청을 방지한다. 이후 href 속성의 path를 사용하여 ajax 요청을 하는 방식이다.</p>
</li>
<li><p>ajax 요청은 브라우저의 url을 변경하지 않아 history 관리가 불가하기 때문에 이 때, pushState 메서드를 사용하여 URL을 변경하고 URL을 history entry로 추가하지만 서버로 HTTP 요청을 보내지는 않는다.</p>
</li>
</ul>
<p>예제를 보면서 pjax 방식을 따라서 구현해봤는데, 우리 팀의 CBD Library 방식에는 맞지 않게 코드를 구현하였다.</p>
<h2 id="문제1-상태-관리-미흡"><a href="#문제1-상태-관리-미흡" class="headerlink" title="문제1. 상태 관리 미흡"></a>문제1. 상태 관리 미흡</h2><p>이벤트가 발생하여 컴포넌트가 대체되어 화면의 렌더링이 발생하게 되는데, 이를 상태로 관리하지 않고 custom 이벤트를 생성하여 dispatch하여 App 컴포넌트에서 custom 이벤트 리스너를 등록하고 또 이걸 보여주기 위해서 render 함수 있는 곳에서 custom 이벤트 리스너를 등록하는 복잡한 구조로 하였다. 그 결과 각 커스텀 이벤트 마다 render를 호출해주고 있으므로 CBD Library를 사용한 의미가 사라졌다.</p>
<ul>
<li>이를 해결하기 위해서 현재 내가 있는 페이지를 상태로 관리하는 것으로 코드를 개선하였다.</li>
</ul>
<h1 id="2-서버-오픈-시-고려해야할-점"><a href="#2-서버-오픈-시-고려해야할-점" class="headerlink" title="2. 서버 오픈 시 고려해야할 점"></a>2. 서버 오픈 시 고려해야할 점</h1><ul>
<li><p>서버 연결 시 server.js에 연결을 하는데 이 때는 node.js 환경이므로, window 객체가 존재 하지 않는다.</p>
</li>
<li><p>commonJs 방식으로 서버를 구현했다면 package.json 파일에 type&#x3D;”module”을 추가해줘야하지만 require 방식으로 구현했다면, type&#x3D;”module”을 빼줘야 한다.</p>
</li>
</ul>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>오늘 혼자 힘으로 라우터에 대해 공부하여 프로젝트에 적용해보며 라우터가 어떻게 동작하는지 알게되었다. 혼자 힘으로 해보니깐 CBD Library 가 어떤 구조로 작동하고 이 구조를 맞춰서 내가 라우터를 어떻게 구현하면 되는지 생각할 수 있어서 인상깊었다.</p>
<p>채련님과 로그인, 회원가입 구현을 위해 서버에 대해서 공부도 하였는데, 내일 좀 더 깊게 공부해봐야겠다. 아직 우리 구조에서 서버와 어떻게 통신을 해야하는지 제대로 이해가 되지 않는다.</p>
<p>지윤님이 만드신 카드 게임 알고리즘에서 카드 2장이 뒤집히기 전에 새로운 카드를 눌렀을 때, 3장의 카드가 뒤집히는 문제점을 같이 해결하였다.</p>
<p>내일은 채련님과 로그인, 회원가입 구현과 서버와의 통신을 같이 구현해보기로 하였다.</p>
<p>오늘도 새로운 것을 많이 배워서 뿌듯한 하루였다. ㅎㅎ</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/12/Project/holymoly/%EB%9D%BC%EC%9A%B0%ED%84%B0%20%EA%B5%AC%ED%98%84%20(Custom%20Event)/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/11/Project/holymoly/holymoly%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EA%B8%B0%ED%9A%8D%EB%8B%A8%EA%B3%84/"
                            aria-label=": holymoly 프로젝트 기획단계"
                        >
                            holymoly 프로젝트 기획단계
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-11T21:55:35+09:00">
	
		    2022/10/11
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="오늘-배운-것"><a href="#오늘-배운-것" class="headerlink" title="오늘 배운 것"></a>오늘 배운 것</h1><h1 id="1-git-organization-과-git-flow-전략"><a href="#1-git-organization-과-git-flow-전략" class="headerlink" title="1. git organization 과 git flow 전략"></a>1. git organization 과 git flow 전략</h1><p>git organization을 만들어서 팀원들과 git flow 전략을 사용하기로 결정하였다. git flow 전략에 대해서 한번 수업을 듣고 배운 적이 있었는데 그 때 기록해둔 notion 자료가 유용하였다.</p>
<p>git organization을 만들고 팀원들을 초대하고 이 organization 안에서 repository를 생성하고 clone을 받아서 git flow init을 해주면 main, develop 브랜치가 생성된다.</p>
<ul>
<li><p>main 브랜치는 배포를 위한 브랜치이다.</p>
</li>
<li><p>develop 브랜치는 개발을 위한 브랜치이다. feature를 생성하여 commit 단위 별로 feature 브랜치를 생성하고 삭제하며 작업을 이행하였다.</p>
</li>
</ul>
<p>각 feature에서 commit을 하고 develop 브랜치에 push를 하여 팀원들의 코드를 develop 브랜치에서 합쳐서 헙업을 진행할 수 있었다.</p>
<h1 id="2-노션-칸반-보드"><a href="#2-노션-칸반-보드" class="headerlink" title="2. 노션 칸반 보드"></a>2. 노션 칸반 보드</h1><p>지난 페어프로그래밍때 만든 CBD Library를 사용하여 컴포넌트 단위로 HTML, CSS를 완성하고 나니 갑자기 다음에 무엇을 해야할지 바로 생각이 나질 않았다.</p>
<p>이런 문제점을 해결하기 위해서는 칸반 보드를 작성하여 나와 내 팀원들이 지금 무슨 작업을 하고 있고 현재 작업이 완료되면 어떤 작업을 하게 될지 notion에 정리해두었다.</p>
<p>매일 저녁 9시에는 그날 작업을 하면서 배우거나 느꼈던 점을 서로 공유하는 Daily scrum 시간을 갖고 내일 할일을 정리하는 시간도 가지니 막힘없이 진행할 수 있을 것 같다.</p>
<h1 id="3-기획서-피드백"><a href="#3-기획서-피드백" class="headerlink" title="3. 기획서 피드백"></a>3. 기획서 피드백</h1><p>어제 하루종일 기획서를 작성하기 위해 회의도 오래 하고 figma 시안에 많은 시간을 쏟아부었다. 하지만 오늘 기획서 발표에 대한 피드백은 참담했다…</p>
<p>디자인은 어떻게 하고, 무슨 기능을 구현하고, 어떻게 협업을 진행할지 정하는 것 까진 좋았다. 하지만 제일 중요한 부분이 빠졌다.</p>
<p>바로 이번 프로젝트에서 구현해야할 로그인, 회원가입 기능 구현 방법과 라우터 기능 구현 방법에 대해서 자세하게 정해보지 않았다.</p>
<p><strong>말그대로 빛좋은 개살구가 되는 기획서가 되버린 것이다.</strong> 내가 만약 이런 상태로 회사에 입사하여 기획자라 <strong>이거이거 해주실 수 있나요?</strong> 라는 질문을 받게 된다면, 아마 기능 구현에 대한 방법을 제대로 생각해보지 않고 겉으로 보기에 쉬워보이니 된다고 했을 것 같다.</p>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>이번 프로젝트는 포트폴리오일까? 이력서에 제출할 포트폴리오는 매우 신중해야한다. 면접관은 지원자의 포트폴리오를 보고 100%를 다 직접 구현하진 못했더라도 어느정도 자신이 구현하지 않은 부분에서도 이해하고 설명할 수 있을 것이라 생각한다.</p>
<p>이번 프로젝트도 오늘 기획서 발표대로 하게된다면 프로젝트 구현에만 급급해서 프로젝트가 끝나도 아무것도 남는게 없을 것이다…</p>
<p>그러므로 이번 프로젝트의 목표는 팀원들과 실전 프로젝트를 기획부터 개발, 배포까지 경험해보면서 어떤 부분이 어려웠는지를 직접 경험하고 여기에서 배움이 있어야 한다.</p>
<p>남에게 보여질 빛좋은 개살구 같은 프로젝트는 필요없다. 내가 진득하게 이번 프로젝트를 위해 어떤 부분을 배웠고 어떤 부분을 경험하면서 어려워했는지를 하나하나 기록하고 팀원들과 그날 배운 것을 공유하면서 공부하는 것에 초점을 맞춰야겠다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/11/Project/holymoly/holymoly%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EA%B8%B0%ED%9A%8D%EB%8B%A8%EA%B3%84/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/10/10/Project/holymoly/holymoly%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EC%B2%AB%20%ED%9A%8C%EC%9D%98/"
                            aria-label=": holymoly 프로젝트 첫 회의"
                        >
                            holymoly 프로젝트 첫 회의
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-10-10T23:01:34+09:00">
	
		    2022/10/10
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/holymoly/">holymoly</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="HolyMoly-프로젝트"><a href="#HolyMoly-프로젝트" class="headerlink" title="HolyMoly 프로젝트"></a>HolyMoly 프로젝트</h1><p>오늘부터 약 2주간 자바스크립트 프로젝트가 시작된다.</p>
<p>그동안 페어프로그래밍을 통해 배운 내용을 실전 프로젝트에 적용해보고, 게임까지 직접 만들어보면서 재미까지 더불어 챙길 수 있는 프로젝트이다.</p>
<p>주요 기능은 로그인과 회원가입 기능을 구현해야하며, 라우터 기능을 구현해야한다.</p>
<p>우리팀은 3명의 팀원으로 구성되어있고 각자 1개의 미니게임을 구현하고 싶어한다.</p>
<h2 id="메인페이지"><a href="#메인페이지" class="headerlink" title="메인페이지"></a>메인페이지</h2><p>메인 페이지에는 캐러셀 기능으로 게임 설명을 보여줄 것이다. 캐러셀 기능은 페어프로그래밍 1 때 기능 구현을 경험해본 바 있다.</p>
<p><strong>그 때, transitionend가 애먹었던 기억이 아직도 잊혀지지 않는다.</strong></p>
<h2 id="로그인-및-회원가입-페이지"><a href="#로그인-및-회원가입-페이지" class="headerlink" title="로그인 및 회원가입 페이지"></a>로그인 및 회원가입 페이지</h2><p>주요 기능인 로그인 및 회원가입 페이지 구현은 페어프로그래밍 1에서 구현해보았다. 하지만 시간이 부족하여 제대로 리팩터링을 경험하지 못한체로 끝냈었다.</p>
<p>이번 기회에 그 때 하지 못한 리팩터링까지 같이 해볼 수 있는 기회가 생긴 것 같다.</p>
<h2 id="미니게임-구현"><a href="#미니게임-구현" class="headerlink" title="미니게임 구현"></a>미니게임 구현</h2><p>내가 구현할 미니게임의 제목은 “Close to Zero” 게임이다.</p>
<p>말 그대로 0에 가장 근접할 때 버튼을 클릭해서 그 숫자가 가장 0에 근접한 사람이 승리하는 게임이다.</p>
<p>게임 구현은 간단할 것 같다. 하지만 이번 프로젝트는 지난 페어프로그래밍 2편 9번 문제에서 CBD Library를 제작한 것을 활용하여 구조를 가져갈 것이기 때문에 컴포넌트에 대한 이해가 필요하다.</p>
<h2 id="라우터-기능-구현"><a href="#라우터-기능-구현" class="headerlink" title="라우터 기능 구현"></a>라우터 기능 구현</h2><p>이번 프로젝트는 앞서 말했듯이 컴포넌트 단위로 HTML 동적으로 생성하는 SPA를 구현할 것이다. SPA는 화면이 전환되어도 URL이 변경되지 않아 SEO에 취약하다는 문제점이 있다.</p>
<p>또한, 이번 프로젝트의 최소 요구사항인 라우터 기능을 구현하기 위해서는 URL이 필요한데, 과연 URL이 없는 SPA에서 어떻게 라우터를 구현할 수 있을까?</p>
<p>그 해답은 컴포넌트와 라우터를 1:1 매핑관계로 두어 URL 뒤의 Path가 변경되면 컴포넌트를 바꿔주면 된다.</p>
<p>이에 대한 자세한 방법은 다음 시간에 알아보자.</p>
<h1 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h1><p>팀원들과 같이 줌으로 회의를 하면서 아이디어도 잘나오고 오늘 회의 열심히 달려서 figma 시안도 완성하여서 뿌듯한 공휴일을 보낸 것 같아 기분이 좋다.</p>
<p>내일부터 다시 또 피터지는 프로젝트 시간이 시작되니 컨디션 조절 잘하고 매일 회고도 잊지 않고 지치지 않고 롱런하고 싶다.</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/10/10/Project/holymoly/holymoly%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%EC%B2%AB%20%ED%9A%8C%EC%9D%98/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2022/08/05/Project/%EB%B0%B0%EB%AF%BC%20%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9/%EB%B0%B0%EB%8B%AC%EC%9D%98%20%EB%AF%BC%EC%A1%B1%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%ED%9A%8C%EA%B3%A0/"
                            aria-label=": 배달의 민족 미니프로젝트 회고"
                        >
                            배달의 민족 미니프로젝트 회고
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2022-08-05T18:44:26+09:00">
	
		    2022/08/05
    	
    </time>
    
        <span>카테고리 </span>
        
    <a class="category-link" href="/categories/Project/">Project</a>, <a class="category-link" href="/categories/Project/%EB%B0%B0%EB%8B%AC%EC%9D%98%EB%AF%BC%EC%A1%B1/">배달의민족</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="배달의-민족-미니-프로젝트-회고"><a href="#배달의-민족-미니-프로젝트-회고" class="headerlink" title="배달의 민족 미니 프로젝트 회고"></a>배달의 민족 미니 프로젝트 회고</h1><p>지난 금요일 커넥to에서 미니 프로젝트를 시작하였다.</p>
<p>HTML&#x2F;CSS 수업을 한달동안 배운 것을 응용하여 클론코딩을 하거나 자유주제로 웹 페이지를 만들고 발표하는 과제였다.</p>
<hr>
<h2 id="주제-선정"><a href="#주제-선정" class="headerlink" title="주제 선정"></a>주제 선정</h2><p>팀원들과 아이스브레이킹을 하면서 프로젝트 주제에 대해서 이야기 하였다.</p>
<p>각자 좋아하는 분야에 대해 자유주제를 정하기도 하였지만</p>
<p>우리가 그동안 배운것을 가장 잘 응용해볼 수 있는 주제를 정하기로 하였다.</p>
<p>그러던 중 앱 서비스만 있는 배달의 민족을 웹으로 구현해보면 어떨까라는 생각을 하였다.</p>
<p><b>배달의 민족을 선택한 이유</b></p>
<ul>
<li><p>간편주문이라는 슬로건에 맞지 않게 점점 복잡해지는 UI</p>
</li>
<li><p>코로나 완화로 배달앱 사용자 유저 급감</p>
</li>
<li><p>태블릿 버전 미지원으로인한 UX 저하 …</p>
</li>
</ul>
<p>위와 같은 문제를 개선하기 위해 배달의 민족 웹 서비스를 개발해보기로 결정하였다.</p>
<h3 id="발표-방향-선정"><a href="#발표-방향-선정" class="headerlink" title="발표 방향 선정"></a>발표 방향 선정</h3><p><img src="/images/220805/home.png" alt="quick mode"></p>
<p>웹 접근성을 고려하여 간편모드를 제공한다.</p>
<p>기존 배민에서 제공하는 앱 서비스를 이용하기 불편한 장애인, 저시력자 등을 고려했다.</p>
<p>이와 더불어 태블릿에서도 지원가능한 반응형 웹 사이트를 개발한다.</p>
<hr>
<h2 id="협업방식"><a href="#협업방식" class="headerlink" title="협업방식"></a>협업방식</h2><h3 id="1-CSS-프레임-워크-선정"><a href="#1-CSS-프레임-워크-선정" class="headerlink" title="1. CSS 프레임 워크 선정"></a>1. CSS 프레임 워크 선정</h3><p>기획단계에서 우리가 만들 페이지가 8페이지로 정해졌다. (일반모드 4페이지 + 간편모드 4페이지)</p>
<p>많은 페이지를 관리하기 위해 sass 프레임워크를 사용했다.</p>
<p><strong>Sass를 선택한 이유</strong></p>
<ol>
<li>@mixin</li>
</ol>
<p>@mixin을 사용하여 여러 페이지에서 자주 사용되는 스타일을 @iclude 하여 사용하기 편하게 했다.</p>
<ol start="2">
<li>BEM 표기법</li>
</ol>
<p>BEM 표기법을 사용하여 naming convention을 정하면 이후 nesting 문법을 사용하여 관련 클래스를 한눈에 보기 편하다.</p>
<ol start="3">
<li>스타일 컴포넌트화</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">├── css</span><br><span class="line">│   ├── index.css</span><br><span class="line">│   └── index.css.map</span><br><span class="line">├── fast_pages</span><br><span class="line">│   ├── main.html</span><br><span class="line">│   ├── menu.html</span><br><span class="line">│   ├── store.html</span><br><span class="line">│   └── storeList.html</span><br><span class="line">├── js</span><br><span class="line">│   ├── jquery-1.12.3.js</span><br><span class="line">│   └── scripts.js</span><br><span class="line">├── nomal_pages</span><br><span class="line">│   ├── main.html</span><br><span class="line">│   ├── menu.html</span><br><span class="line">│   ├── store.html</span><br><span class="line">│   └── storeList.html</span><br><span class="line">└── scss</span><br><span class="line">    ├── absrtacts</span><br><span class="line">    │   ├── _index.scss</span><br><span class="line">    │   ├── _media-query.scss</span><br><span class="line">    │   ├── _mixin.scss</span><br><span class="line">    │   └── _unit.scss</span><br><span class="line">    ├── base</span><br><span class="line">    │   ├── _default.scss</span><br><span class="line">    │   ├── _index.scss</span><br><span class="line">    │   ├── _nomalize.scss</span><br><span class="line">    │   └── _reset.scss</span><br><span class="line">    ├── components</span><br><span class="line">    │   ├── _index.scss</span><br><span class="line">    │   └── _navigation.scss</span><br><span class="line">    ├── index.scss</span><br><span class="line">    ├── layout</span><br><span class="line">    │   ├── _footer.scss</span><br><span class="line">    │   ├── _header.scss</span><br><span class="line">    │   └── _index.scss</span><br><span class="line">    ├── pages</span><br><span class="line">    │   ├── _fast-main.scss</span><br><span class="line">    │   ├── _fast-menu.scss</span><br><span class="line">    │   ├── _fast-store.scss</span><br><span class="line">    │   ├── _fast-storeList.scss</span><br><span class="line">    │   ├── _home.scss</span><br><span class="line">    │   ├── _index.scss</span><br><span class="line">    │   ├── _nomal-main.scss</span><br><span class="line">    │   ├── _nomal-menu.scss</span><br><span class="line">    │   ├── _nomal-store.scss</span><br><span class="line">    │   └── _normal-storeList.scss</span><br><span class="line">    └── themes</span><br><span class="line">        ├── _a11y.scss</span><br><span class="line">        ├── _color.scss</span><br><span class="line">        ├── _font.scss</span><br><span class="line">        ├── _index.scss</span><br><span class="line">        └── _spacing.scss</span><br></pre></td></tr></table></figure>

<p>각 페이지에 적용되는 스타일들만 따로 빼내어 사용할 수 있어 이후에 유지관리가 용이하다.</p>
<h3 id="2-HTML-구조-설계"><a href="#2-HTML-구조-설계" class="headerlink" title="2.HTML 구조 설계"></a>2.HTML 구조 설계</h3><p>웹 접근성을 고려하여 div태그를 최소화하고 시멘틱 태그를 사용하여 논리적인 구조로 마크업을 설계해야한다.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 헤더 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span> <span class="attr">class</span>=<span class="string">&quot;header&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 메인 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">main</span> <span class="attr">id</span>=<span class="string">&quot;skip&quot;</span> <span class="attr">class</span>=<span class="string">&quot;main&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 푸터 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span> <span class="attr">class</span>=<span class="string">&quot;footer&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-figma-디자인-시안-제작"><a href="#3-figma-디자인-시안-제작" class="headerlink" title="3. figma 디자인 시안 제작"></a>3. figma 디자인 시안 제작</h3><p><img src="/images/220805/figma.png" alt="figma"></p>
<p>우리가 만들 페이지를 figma를 사용하여 디자인 시안을 제작한다.</p>
<p>margin, padding, font, color 등 통일해야할 부분을 미리 정해놓고 작업한다.</p>
<h3 id="4-gitflow-전략"><a href="#4-gitflow-전략" class="headerlink" title="4. gitflow 전략"></a>4. gitflow 전략</h3><p>저번 8월 3일 TIL 작성에서 배웠던 gitflow 전략을 사용하여 버전관리와 협업을 진행하였다.</p>
<hr>
<h2 id="과정-중-문제점"><a href="#과정-중-문제점" class="headerlink" title="과정 중 문제점"></a>과정 중 문제점</h2><h3 id="1-크로스-브라우징"><a href="#1-크로스-브라우징" class="headerlink" title="1. 크로스 브라우징"></a>1. 크로스 브라우징</h3><p>safari, FF, Chrome 대표 브라우저에서 동일하게 동작하는지 확인하여야 한다.</p>
<p><strong>safari, FF에서 탭키 issue</strong></p>
<p>FF에서 탭키 포커스가 button 태그에 있을 경우 영역이 점선으로 표현되는 현상</p>
<p><img src="/images/220805/ff.png" alt="firefox"></p>
<p>위 설정을 체크해줘야한다.</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">button</span>:-moz-focusring,</span><br><span class="line">[type=<span class="string">&quot;button&quot;</span>]:-moz-focusring,</span><br><span class="line">[type=<span class="string">&quot;reset&quot;</span>]:-moz-focusring,</span><br><span class="line">[type=<span class="string">&quot;submit&quot;</span>]:-moz-focusring &#123;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">1px</span> dotted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 현상은 normalize.css에서 스타일을 지정해주었기 때문에 발생하였다.</p>
<p>safari에서 탭키가 input 요소이외에는 포커싱안되는 현상</p>
<p><img src="/images/220805/safari.png" alt="safari"></p>
<p>위 설정을 체크해줘야 한다.</p>
<h3 id="2-Lighthouse-성능"><a href="#2-Lighthouse-성능" class="headerlink" title="2. Lighthouse 성능"></a>2. Lighthouse 성능</h3><p>lighthouse 성능 테스트를 사용하여 성능을 측정해본 결과</p>
<p><img src="/images/220805/lighthouse.png" alt="lighthouse"></p>
<p>성능이 매우 낮게 나왔는데, 그 이유는 적절한 이미지 포맷을 사용하지 않았기 때문이다.</p>
<p>이미지 포맷을 webp 형식으로 변환한 후 사용할 경우 성능이 개선되었다.</p>
<p><img src="/images/220805/webp.png" alt="webp"></p>
<hr>
<h2 id="소감"><a href="#소감" class="headerlink" title="소감"></a>소감</h2><p>프로젝트 발표 기획부터 디자인, 마크업 설계, sass 스타일링, git 협업 등으로 1주일이 순식간에 지나간 것 같다.</p>
<p>그만큼 힘들었지만 팀원들과 웃으면서 같이 원하는 목표를 이루기 위해 으쌰으쌰하니깐 동기부여도 되고 좋은 추억도 많이 쌓을 수 있었다.</p>
<p>열심히 노력은 했지만 그래도 아쉬운 점이 많이 남는다.</p>
<ul>
<li><p>이미지 포맷 issue에 대한 작업을 더 참여해보지 않은 것에 대한 아쉬움</p>
</li>
<li><p>화면에 필요한 디자인 요소들을 미리미리 준비하지 못했던 아쉬움</p>
</li>
<li><p>git을 배운대로 제대로 사용해보지 못한 아쉬움</p>
</li>
</ul>
<p>그리고 다른 팀의 발표를 보면서 느낀점은 확실히 한달전에 처음 발표 때와 비교해서 다들 많이 성장했다는 것을 느꼈다.</p>
<p>나도 그 때보다는 더 나아진 모습이라고 생각하지만, 발표를 잘하는 분들을 유심히 관찰하면서 그분들 처럼 능숙하게 발표를 할 수 있도록 더 노력해봐야겠다고 다짐하는 시간을 갖게 되었다.</p>
<p>또한, 데레사강사님의 마지막 말씀이 기억에 남는다.</p>
<blockquote>
<p>남은 5개월 과정이 짧지 않은 기간일 것이니, 과정을 중요시하며 느슨해지지 말고 동기들과 소통을 자주하여 커뮤니케이션 스킬을 향상 시키도록 하자.</p>
</blockquote>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2022/08/05/Project/%EB%B0%B0%EB%AF%BC%20%ED%81%B4%EB%A1%A0%EC%BD%94%EB%94%A9/%EB%B0%B0%EB%8B%AC%EC%9D%98%20%EB%AF%BC%EC%A1%B1%20%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%20%ED%9A%8C%EA%B3%A0/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                댓글 공유
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/categories/Project/page/2/"
                aria-label="이전 포스트"
            >
              <span>이전 포스트</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 2</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2023 loco9939. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">loco9939</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-wcqoifde3xwnijjx9xd2irfrrksglozwqpgaqfvxoft22e4znrk7db1xxnsx.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
